{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@swimlane/ngx-datatable/lib/services/scrollbar-helper.service.ts","ng://@swimlane/ngx-datatable/lib/services/dimensions-helper.service.ts","ng://@swimlane/ngx-datatable/lib/services/column-changes.service.ts","ng://@swimlane/ngx-datatable/lib/components/footer/footer-template.directive.ts","ng://@swimlane/ngx-datatable/lib/directives/visibility.directive.ts","ng://@swimlane/ngx-datatable/lib/directives/draggable.directive.ts","ng://@swimlane/ngx-datatable/lib/events.ts","ng://@swimlane/ngx-datatable/lib/directives/resizeable.directive.ts","ng://@swimlane/ngx-datatable/lib/directives/orderable.directive.ts","ng://@swimlane/ngx-datatable/lib/directives/long-press.directive.ts","ng://@swimlane/ngx-datatable/lib/components/body/scroller.component.ts","ng://@swimlane/ngx-datatable/lib/components/columns/column-header.directive.ts","ng://@swimlane/ngx-datatable/lib/components/columns/column-cell.directive.ts","ng://@swimlane/ngx-datatable/lib/components/columns/tree.directive.ts","ng://@swimlane/ngx-datatable/lib/components/columns/column.directive.ts","ng://@swimlane/ngx-datatable/lib/utils/column.ts","ng://@swimlane/ngx-datatable/lib/types/sort.type.ts","ng://@swimlane/ngx-datatable/lib/types/selection.type.ts","ng://@swimlane/ngx-datatable/lib/utils/camel-case.ts","ng://@swimlane/ngx-datatable/lib/utils/prefixes.ts","ng://@swimlane/ngx-datatable/lib/utils/translate.ts","ng://@swimlane/ngx-datatable/lib/components/header/header.component.ts","ng://@swimlane/ngx-datatable/lib/utils/column-prop-getters.ts","ng://@swimlane/ngx-datatable/lib/types/sort-direction.type.ts","ng://@swimlane/ngx-datatable/lib/utils/sort.ts","ng://@swimlane/ngx-datatable/lib/components/header/header-cell.component.ts","ng://@swimlane/ngx-datatable/lib/utils/row-height-cache.ts","ng://@swimlane/ngx-datatable/lib/components/body/body.component.ts","ng://@swimlane/ngx-datatable/lib/components/footer/footer.directive.ts","ng://@swimlane/ngx-datatable/lib/components/footer/footer.component.ts","ng://@swimlane/ngx-datatable/lib/components/footer/pager.component.ts","ng://@swimlane/ngx-datatable/lib/components/body/progress-bar.component.ts","ng://@swimlane/ngx-datatable/lib/utils/keys.ts","ng://@swimlane/ngx-datatable/lib/components/body/body-row.component.ts","ng://@swimlane/ngx-datatable/lib/components/body/body-row-wrapper.component.ts","ng://@swimlane/ngx-datatable/lib/components/row-detail/row-detail-template.directive.ts","ng://@swimlane/ngx-datatable/lib/components/row-detail/row-detail.directive.ts","ng://@swimlane/ngx-datatable/lib/components/body/body-group-header-template.directive.ts","ng://@swimlane/ngx-datatable/lib/components/body/body-group-header.directive.ts","ng://@swimlane/ngx-datatable/lib/components/body/body-cell.component.ts","ng://@swimlane/ngx-datatable/lib/utils/selection.ts","ng://@swimlane/ngx-datatable/lib/components/body/selection.component.ts","ng://@swimlane/ngx-datatable/lib/components/body/summary/summary-row.component.ts","ng://@swimlane/ngx-datatable/lib/components/ice-custom-tooltip/ice-custom-tooltip.component.ts","ng://@swimlane/ngx-datatable/lib/directives/ice-custom-html-tooltip.directive.ts","ng://@swimlane/ngx-datatable/lib/components/ice-datatable-select/ice-datatable-select.component.ts","ng://@swimlane/ngx-datatable/lib/components/ice-editable-text/ice-editable-text.component.ts","ng://@swimlane/ngx-datatable/lib/utils/tree.ts","ng://@swimlane/ngx-datatable/lib/utils/id.ts","ng://@swimlane/ngx-datatable/lib/utils/column-helper.ts","ng://@swimlane/ngx-datatable/lib/types/column-mode.type.ts","ng://@swimlane/ngx-datatable/lib/types/contextmenu.type.ts","ng://@swimlane/ngx-datatable/lib/utils/math.ts","ng://@swimlane/ngx-datatable/lib/components/datatable.component.ts","ng://@swimlane/ngx-datatable/lib/ngx-datatable.module.ts","ng://@swimlane/ngx-datatable/lib/utils/throttle.ts","ng://@swimlane/ngx-datatable/lib/utils/elm-from-point.ts","ng://@swimlane/ngx-datatable/lib/types/click.type.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","ScrollbarHelper","document","width","getWidth","outer","createElement","style","visibility","msOverflowStyle","body","appendChild","widthNoScroll","offsetWidth","overflow","inner","widthWithScroll","parentNode","removeChild","Injectable","Inject","args","DOCUMENT","DimensionsHelper","getDimensions","element","getBoundingClientRect","ColumnChangesService","columnInputChanges","Subject","defineProperty","asObservable","onInputChange","DataTableFooterTemplateDirective","template","Directive","selector","TemplateRef","VisibilityDirective","zone","isVisible","visible","EventEmitter","ngOnInit","runCheck","ngOnDestroy","clearTimeout","timeout","onVisibilityChange","_this","run","emit","check","_a","nativeElement","offsetHeight","runOutsideAngular","setTimeout","ElementRef","NgZone","HostBinding","Output","DraggableDirective","dragX","dragY","dragStart","dragging","dragEnd","isDragging","ngOnChanges","changes","currentValue","dragModel","onMousedown","_destroySubscription","onMouseup","event","classList","remove","subscription","model","contains","preventDefault","mouseDownPos_1","x","clientX","y","clientY","mouseup","fromEvent","subscribe","ev","mouseMoveSub","pipe","takeUntil","move","add","mouseDownPos","left","top","unsubscribe","undefined","Input","window","ResizeableDirective","renderer","resizeEnabled","resize","resizing","ngAfterViewInit","renderer2","node","addClass","closed","clientWidth","isHandle","initialWidth","mouseDownScreenX","screenX","stopPropagation","newWidth","overMinWidth","minWidth","underMaxWidth","maxWidth","host","[class.resizeable]","Renderer2","HostListener","OrderableDirective","differs","reorder","targetChanged","differ","find","create","ngAfterContentInit","updateSubscriptions","draggables","bind","forEach","d","diffs","diff","createMapDiffs","unsubscribe_1","previousValue","forEachAddedItem","onDragStart","onDragging","onDragEnd","forEachRemovedItem","positions","_b","tslib_1.__values","toArray","_c","dragger","elm","parseInt","offsetLeft","toString","prop","right","index","prevPos","target","isTarget","lastDraggingIndex","prevIndex","newIndex","initialIndex","targets","elementsFromPoint","pos","this_1","el","reduce","acc","curr","$$id","KeyValueDiffers","ContentChildren","descendants","LongPressDirective","pressEnabled","duration","longPressStart","longPressing","longPressEnd","mouseX","mouseY","pressing","isLongPressing","onMouseDown","which","pressModel","mouseEvent","onMouseMove","loop","xThres","Math","abs","yThres","endPress","ScrollerComponent","ngZone","scrollbarV","scrollbarH","scroll","scrollYPos","scrollXPos","prevScrollYPos","prevScrollXPos","_scrollEventListener","parentElement","onScrolled","addEventListener","removeEventListener","setOffset","offsetY","scrollTop","dom","requestAnimationFrame","scrollLeft","updateOffset","direction","Component","class","changeDetection","ChangeDetectionStrategy","OnPush","type","DataTableColumnHeaderDirective","DataTableColumnCellDirective","DataTableColumnCellTreeToggle","DataTableColumnDirective","columnChangesService","isFirstChange","_cellTemplateInput","_cellTemplateQuery","_headerTemplateInput","_headerTemplateQuery","_treeToggleTemplateInput","_treeToggleTemplateQuery","ContentChild","read","static","columnsByPin","cols","ret","center","cols_1","cols_1_1","col","frozenLeft","frozenRight","columnGroupWidths","groups","all","columnTotalWidth","total","floor","columns","totalWidth","columns_1","columns_1_1","c","parseFloat","columnsTotalWidth","columns_2","columns_2_1","column","columnsByPinArr","val","colsByPinArr","colsByPin","single","multi","multiClick","cell","checkbox","camelCase","str","replace","trim","toLowerCase","a","b","toUpperCase","deCamelCase","match","styles","pre","cache","testStyle","prefix","getComputedStyle","documentElement","Array","slice","join","RegExp","lowercase","css","js","substr","getVendorPrefixedName","property","name","transform","backfaceVisibility","hasCSSTransforms","hasCSS3DTransforms","ua","navigator","userAgent","isSafari","test","translateXY","DataTableHeaderComponent","cd","sort","select","columnContextmenu","filter","_columnGroupWidths","_styleByGroup","_innerWidth","_columns","colByPin","setStylesByGroup","_headerHeight","_columnsByPin","_offsetX","onLongPressStart","dragEventTarget","onLongPressEnd","innerWidth","trackByGroups","colGroup","columnTrackingFn","onColumnResized","prevValue","newValue","onColumnReordered","getColumn","targetMarkerContext","onTargetChanged","oldColumn","newColumn","leftColumnCount","centerColumnCount","onSort","sorts","calcNewSorts","idx","map","splice","dir","sortType","SortType","calcStylesByGroup","destroyed","detectChanges","group","widths","offsetX","onColumnFilter","ChangeDetectorRef","emptyStringGetter","getterForProp","numericIndexGetter","indexOf","deepValueGetter","shallowValueGetter","row","obj","fieldName","path","current","split","asc","desc","nextSortDir","SortDirection","orderByComparator","Date","isNaN","isFinite","String","sortRows","rows","dirs","rowToIndexMap","Map","set","temp","comparator","cachedDirs","valueGetter","compareFn","rowA","rowB","cachedDirs_1","cachedDirs_1_1","cachedDir","propA","propB","comparison","has","get","DataTableHeaderCellComponent","sortFn","selectFn","filterCache","cellContext","sortDir","allRowsSelected","_allRowsSelected","_column","markForCheck","_sorts","calcSortDir","sortClass","calcSortClass","cls","sortable","resizeable","headerClass","res","keys","keys_1","keys_1_1","k","headerTemplate","checkboxable","headerCheckboxable","selectionType","SelectionType","onContextmenu","$event","sortAscendingIcon","sortDescendingIcon","setFilter","resetFilter","RowHeightCache","treeArray","clearCache","initCache","details","rowHeight","detailRowHeight","externalVirtual","rowCount","rowIndexes","rowExpansions","isFn","isDetailFn","Error","currentRowHeight","expanded","update","getRowIndex","scrollY","calcRowIndex","atRowIndex","byRowHeight","query","atIndex","sum","queryBetween","atIndexA","atIndexB","dataLength","blockSize","pow","nextPos","DataTableBodyComponent","selected","page","activate","detailToggle","rowContextmenu","treeAction","rowHeightsCache","indexes","getDetailRowHeight","rowDetail","rowTrackingFn","trackByProp","_pageSize","recalcLayout","_rows","_offset","_rowCount","_bodyHeight","virtualization","listener","toggle","toggleRowExpansion","toggleAllRows","updateIndexes","updateRows","groupHeader","updateOffsetY","offset","scroller","rowIndex","pageSize","onBodyScroll","updatePage","first","ceil","last","clear","groupedRows","getRowHeight","getGroupHeight","getRowAndDetailHeight","getRowExpanded","getRowsStyles","getBottomSummaryRowStyles","position","hideIndicator","loadingIndicator","height","bodyHeight","externalPaging","max","min","refreshRowHeightCache","Set","getAdjustedViewPortIndex","viewPortFirstRowIndex","rowExpandedIdx","getRowExpandedIdx","currentIndex","stylesByGroup","bodyWidth","groupExpansionDefault","rowId","rowIdentity","findIndex","onTreeAction","ViewChild","DatatableFooterDirective","_templateInput","_templateQuery","DataTableFooterComponent","selectedCount","DataTablePagerComponent","change","_count","_page","_size","pages","calcPages","count","size","canPrevious","canNext","totalPages","prevPage","selectPage","nextPage","startPage","endPage","isMaxSized","maxSize","num","number","text","ProgressBarComponent","up","down","return","escape","DataTableBodyRowComponent","scrollbarHelper","treeStatus","_groupStyles","_element","_rowDiffer","recalculateColumns","buildStylesByGroup","isSelected","rowClass","ngDoCheck","detail","onActivate","cellIndex","rowElement","onKeyDown","keyCode","isTargetRow","Keys","onMouseenter","decorators","SkipSelf","DataTableRowWrapperComponent","groupContext","rowContext","_expanded","rowDiffer","_rowIndex","getGroupHeaderStyle","DatatableRowDetailTemplateDirective","DatatableRowDetailDirective","toggleExpandRow","expandAllRows","collapseAllRows","DatatableGroupHeaderTemplateDirective","DatatableGroupHeaderDirective","toggleExpandGroup","expandAllGroups","collapseAllGroups","DataTableBodyCellComponent","sanitizer","_isEditable","isFocused","onCheckboxChangeFn","onCheckboxChange","activateFn","_rowDetail","_group","checkValueUpdates","_rowHeight","_isSelected","_row","_treeStatus","status","cellClass","cellTemplate","$$valueGetter","userPipe","sanitizedValue","stripHtml","onFocus","onBlur","onClick","cellElement","middleclickEvent","onDblClick","isTargetCell","html","calcLeftMargin","levelIndent","treeLevelIndent","isTreeColumn","level","hasToShowToolTip","field","tooltip","getTooltipValue","getIcons","icons","iconsArray","selectFieldValue","propArray","onClickRowActionButton","action","sanatizeHtml","bypassSecurityTrustHtml","isEditable","id","editable","of","updateSelect","onEdit","editField","onClickField","DomSanitizer","ViewContainerRef","selectRows","comparefn","selectedIndex","selectRowsBetween","reverse","range","start","end","DataTableSelectionComponent","selectRow","selectEnabled","chkbox","shiftKey","getRowSelectedIdx","ctrlKey","metaKey","selectCheck","onKeyboardFocus","isCellSelection","focusCell","focusRow","nextRowElement","getPrevNextRow","focus","focusElement","previousElementSibling","nextElementSibling","children","nextCellElement","getElementsByClassName","getRowSelected","defaultSumFunc","cells","cellsWithValues","some","noopSumFunc","DataTableSummaryRowComponent","summaryRow","updateInternalColumns","updateValues","_internalColumns","summaryTemplate","cellsFromSingleColumn","sumFunc","getSummaryFunction","summaryFunc","CustomToolTipComponent","encapsulation","ViewEncapsulation","None","ToolTipRendererDirective","_overlay","_overlayPositionBuilder","_elementRef","showToolTip","showToolTipOnTextOverflow","show","scrollWidth","_overlayRef","positionStrategy","flexibleConnectedTo","withPositions","originX","originY","overlayX","overlayY","hasAttached","tooltipRef","attach","ComponentPortal","componentInstance","instance","iceTooltipHtmlText","hide","closeToolTip","detach","Overlay","OverlayPositionBuilder","DatatableSelectComponent","editing","active","align","focusOnEnter","editOnFocus","selectDisabled","options","emitUpdate","ViewChildren","EditableTextComponent","editOnSpace","editOnClick","disabled","errorText","toggleEditing","toggleActive","newText","emitToggleEditing","emitFocus","emitToggleActive","inputEl","content","childNodes","data","optionalGetterForProp","groupRowsByParents","from","to","nodeById","l","TreeNode","uniqIDs","arr","item","toValue","parent_1","fromValue","parent","resolvedRows_1","flatten","f","recursive","child","random","setColumnDefaults","treeColumnFound","isNullOrUndefined","draggable","canAutoResize","translateTemplates","templates","result","templates_1","templates_1_1","props","getOwnPropertyNames","props_1","e_3","props_1_1","standard","flex","force","header","getTotalFlexGrow","totalFlexGrow","flexGrow","adjustColumnWidths","allColumns","expectedWidth","columnsWidth","colsByGroup","attr","e_2","_d","hasMinWidth","remainingWidth","widthPerFlexPoint","_e","_f","scaleColumns","forceFillColumnWidths","startIdx","allowBleed","defaultColWidth","columnsToResize","columnsToResize_1","columnsToResize_1_1","$$oldWidth","additionWidthPerColumn","exceedsWindow","contentWidth","getContentWidth","columnsProcessed","columnsToResize_2","e_5","columnsToResize_2_1","newSize","removeProcessedColumns","columnsProcessed_1","columnsProcessed_1_1","allColumns_1","allColumns_1_1","DatatableComponent","dimensionsHelper","configuration","expandable","columnMode","ColumnMode","headerHeight","footerHeight","externalSorting","reorderable","swapColumns","cssClasses","sortAscending","sortDescending","pagerLeftArrow","pagerRightArrow","pagerPrevious","pagerNext","messages","emptyMessage","totalMessage","selectedMessage","selectAllRowsOnPage","summaryHeight","summaryPosition","tableContextmenu","BehaviorSubject","_subscriptions","recalculate$","_groupRowsBy","key","_internalRows","sortInternalRows","treeFromRelation","treeToRelation","recalculate","groupArrayBy","_limit","_columnTemplates","translateColumns","bodyComponent","rowsOnPage","ResizeSensor","resizeSensor","debounceTime","limit","columnTemplates","v","listenForColumnInputChanges","originalArray","groupBy","recalculatePages","recalculateDims","forceIdx","dims","calcPageSize","calcRowCount","onBodyPage","onFooterPage","onColumnContextmenu","ContextmenuType","onRowContextmenu","onColumnResize","onColumnReorder","prevCol","movedCol","onColumnSort","onHeaderSelect","allSelected","onBodySelect","columnInputChanges$","notifyOnChanges","Optional","NgxDatatableModule","forRoot","ngModule","providers","provide","useValue","NgModule","imports","CommonModule","MatTooltipModule","OverlayModule","MatIconModule","MatButtonModule","MatInputModule","FormsModule","ReactiveFormsModule","declarations","exports","entryComponents","throttle","func","wait","context","previous","later","leading","now","remaining","trailing","elements","previousPointerEvents","elementFromPoint","getPropertyValue","priority","getPropertyPriority","setProperty","double","descriptor","configurable","enumerable"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\n/**\r\n * Gets the width of the scrollbar.  Nesc for windows\r\n * http://stackoverflow.com/a/13382873/888165\r\n */\r\n@Injectable()\r\nexport class ScrollbarHelper {\r\n  width: number = this.getWidth();\r\n\r\n  constructor(@Inject(DOCUMENT) private document: any) {}\r\n\r\n  getWidth(): number {\r\n    const outer = this.document.createElement('div');\r\n    outer.style.visibility = 'hidden';\r\n    outer.style.width = '100px';\r\n    outer.style.msOverflowStyle = 'scrollbar';\r\n    this.document.body.appendChild(outer);\r\n\r\n    const widthNoScroll = outer.offsetWidth;\r\n    outer.style.overflow = 'scroll';\r\n\r\n    const inner = this.document.createElement('div');\r\n    inner.style.width = '100%';\r\n    outer.appendChild(inner);\r\n\r\n    const widthWithScroll = inner.offsetWidth;\r\n    outer.parentNode.removeChild(outer);\r\n\r\n    return widthNoScroll - widthWithScroll;\r\n  }\r\n}\r\n","import { Inject, Injectable } from '@angular/core';\r\n\r\n/**\r\n * Gets the width of the scrollbar.  Nesc for windows\r\n * http://stackoverflow.com/a/13382873/888165\r\n */\r\n@Injectable()\r\nexport class DimensionsHelper {\r\n  getDimensions(element: Element): ClientRect {\r\n    return element.getBoundingClientRect();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\n/**\r\n * service to make DatatableComponent aware of changes to\r\n * input bindings of DataTableColumnDirective\r\n */\r\n@Injectable()\r\nexport class ColumnChangesService {\r\n  private columnInputChanges = new Subject<undefined>();\r\n\r\n  get columnInputChanges$(): Observable<undefined> {\r\n    return this.columnInputChanges.asObservable();\r\n  }\r\n\r\n  onInputChange(): void {\r\n    this.columnInputChanges.next();\r\n  }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({ selector: '[ngx-datatable-footer-template]' })\r\nexport class DataTableFooterTemplateDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { Directive, Output, EventEmitter, ElementRef, HostBinding, NgZone, OnInit, OnDestroy } from '@angular/core';\r\n\r\n/**\r\n * Visibility Observer Directive\r\n *\r\n * Usage:\r\n *\r\n * \t\t<div\r\n * \t\t\tvisibilityObserver\r\n * \t\t\t(visible)=\"onVisible($event)\">\r\n * \t\t</div>\r\n *\r\n */\r\n@Directive({ selector: '[visibilityObserver]' })\r\nexport class VisibilityDirective implements OnInit, OnDestroy {\r\n  @HostBinding('class.visible')\r\n  isVisible: boolean = false;\r\n\r\n  @Output() visible: EventEmitter<any> = new EventEmitter();\r\n\r\n  timeout: any;\r\n\r\n  constructor(private element: ElementRef, private zone: NgZone) {}\r\n\r\n  ngOnInit(): void {\r\n    this.runCheck();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    clearTimeout(this.timeout);\r\n  }\r\n\r\n  onVisibilityChange(): void {\r\n    // trigger zone recalc for columns\r\n    this.zone.run(() => {\r\n      this.isVisible = true;\r\n      this.visible.emit(true);\r\n    });\r\n  }\r\n\r\n  runCheck(): void {\r\n    const check = () => {\r\n      // https://davidwalsh.name/offsetheight-visibility\r\n      const { offsetHeight, offsetWidth } = this.element.nativeElement;\r\n\r\n      if (offsetHeight && offsetWidth) {\r\n        clearTimeout(this.timeout);\r\n        this.onVisibilityChange();\r\n      } else {\r\n        clearTimeout(this.timeout);\r\n        this.zone.runOutsideAngular(() => {\r\n          this.timeout = setTimeout(() => check(), 50);\r\n        });\r\n      }\r\n    };\r\n\r\n    this.timeout = setTimeout(() => check());\r\n  }\r\n}\r\n","import { Directive, ElementRef, Input, Output, EventEmitter, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Observable, Subscription, fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { MouseEvent } from '../events';\r\n\r\n/**\r\n * Draggable Directive for Angular2\r\n *\r\n * Inspiration:\r\n *   https://github.com/AngularClass/angular2-examples/blob/master/rx-draggable/directives/draggable.ts\r\n *   http://stackoverflow.com/questions/35662530/how-to-implement-drag-and-drop-in-angular2\r\n *\r\n */\r\n@Directive({ selector: '[draggable]' })\r\nexport class DraggableDirective implements OnDestroy, OnChanges {\r\n  @Input() dragEventTarget: any;\r\n  @Input() dragModel: any;\r\n  @Input() dragX: boolean = true;\r\n  @Input() dragY: boolean = true;\r\n\r\n  @Output() dragStart: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragging: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragEnd: EventEmitter<any> = new EventEmitter();\r\n\r\n  element: HTMLElement;\r\n  isDragging: boolean = false;\r\n  subscription: Subscription;\r\n\r\n  constructor(element: ElementRef) {\r\n    this.element = element.nativeElement;\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['dragEventTarget'] && changes['dragEventTarget'].currentValue && this.dragModel.dragging) {\r\n      this.onMousedown(changes['dragEventTarget'].currentValue);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._destroySubscription();\r\n  }\r\n\r\n  onMouseup(event: MouseEvent): void {\r\n    if (!this.isDragging) return;\r\n\r\n    this.isDragging = false;\r\n    this.element.classList.remove('dragging');\r\n\r\n    if (this.subscription) {\r\n      this._destroySubscription();\r\n      this.dragEnd.emit({\r\n        event,\r\n        element: this.element,\r\n        model: this.dragModel\r\n      });\r\n    }\r\n  }\r\n\r\n  onMousedown(event: MouseEvent): void {\r\n    // we only want to drag the inner header text\r\n    const isDragElm = (<HTMLElement>event.target).classList.contains('draggable');\r\n\r\n    if (isDragElm && (this.dragX || this.dragY)) {\r\n      event.preventDefault();\r\n      this.isDragging = true;\r\n\r\n      const mouseDownPos = { x: event.clientX, y: event.clientY };\r\n\r\n      const mouseup = fromEvent(document, 'mouseup');\r\n      this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup(ev));\r\n\r\n      const mouseMoveSub = fromEvent(document, 'mousemove')\r\n        .pipe(takeUntil(mouseup))\r\n        .subscribe((ev: MouseEvent) => this.move(ev, mouseDownPos));\r\n\r\n      this.subscription.add(mouseMoveSub);\r\n\r\n      this.dragStart.emit({\r\n        event,\r\n        element: this.element,\r\n        model: this.dragModel\r\n      });\r\n    }\r\n  }\r\n\r\n  move(event: MouseEvent, mouseDownPos: { x: number; y: number }): void {\r\n    if (!this.isDragging) return;\r\n\r\n    const x = event.clientX - mouseDownPos.x;\r\n    const y = event.clientY - mouseDownPos.y;\r\n\r\n    if (this.dragX) this.element.style.left = `${x}px`;\r\n    if (this.dragY) this.element.style.top = `${y}px`;\r\n\r\n    this.element.classList.add('dragging');\r\n\r\n    this.dragging.emit({\r\n      event,\r\n      element: this.element,\r\n      model: this.dragModel\r\n    });\r\n  }\r\n\r\n  private _destroySubscription(): void {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n      this.subscription = undefined;\r\n    }\r\n  }\r\n}\r\n","declare let global: any;\r\n\r\n/* tslint:disable */\r\nexport const MouseEvent = (((typeof window !== 'undefined' && window) as any) || (global as any))\r\n  .MouseEvent as MouseEvent;\r\nexport const KeyboardEvent = (((typeof window !== 'undefined' && window) as any) || (global as any))\r\n  .KeyboardEvent as KeyboardEvent;\r\nexport const Event = (((typeof window !== 'undefined' && window) as any) || (global as any)).Event as Event;\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnDestroy,\r\n  AfterViewInit,\r\n  Renderer2\r\n} from '@angular/core';\r\nimport { Observable, Subscription, fromEvent } from 'rxjs';\r\nimport { MouseEvent } from '../events';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Directive({\r\n  selector: '[resizeable]',\r\n  host: {\r\n    '[class.resizeable]': 'resizeEnabled'\r\n  }\r\n})\r\nexport class ResizeableDirective implements OnDestroy, AfterViewInit {\r\n  @Input() resizeEnabled: boolean = true;\r\n  @Input() minWidth: number;\r\n  @Input() maxWidth: number;\r\n\r\n  @Output() resize: EventEmitter<any> = new EventEmitter();\r\n\r\n  element: HTMLElement;\r\n  subscription: Subscription;\r\n  resizing: boolean = false;\r\n\r\n  constructor(element: ElementRef, private renderer: Renderer2) {\r\n    this.element = element.nativeElement;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    const renderer2 = this.renderer;\r\n    const node = renderer2.createElement('span');\r\n    if (this.resizeEnabled) {\r\n      renderer2.addClass(node, 'resize-handle');\r\n    } else {\r\n      renderer2.addClass(node, 'resize-handle--not-resizable');\r\n    }\r\n    renderer2.appendChild(this.element, node);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._destroySubscription();\r\n  }\r\n\r\n  onMouseup(): void {\r\n    this.resizing = false;\r\n\r\n    if (this.subscription && !this.subscription.closed) {\r\n      this._destroySubscription();\r\n      this.resize.emit(this.element.clientWidth);\r\n    }\r\n  }\r\n\r\n  @HostListener('mousedown', ['$event'])\r\n  onMousedown(event: MouseEvent): void {\r\n    const isHandle = (<HTMLElement>event.target).classList.contains('resize-handle');\r\n    const initialWidth = this.element.clientWidth;\r\n    const mouseDownScreenX = event.screenX;\r\n\r\n    if (isHandle) {\r\n      event.stopPropagation();\r\n      this.resizing = true;\r\n\r\n      const mouseup = fromEvent(document, 'mouseup');\r\n      this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup());\r\n\r\n      const mouseMoveSub = fromEvent(document, 'mousemove')\r\n        .pipe(takeUntil(mouseup))\r\n        .subscribe((e: MouseEvent) => this.move(e, initialWidth, mouseDownScreenX));\r\n\r\n      this.subscription.add(mouseMoveSub);\r\n    }\r\n  }\r\n\r\n  move(event: MouseEvent, initialWidth: number, mouseDownScreenX: number): void {\r\n    const movementX = event.screenX - mouseDownScreenX;\r\n    const newWidth = initialWidth + movementX;\r\n\r\n    const overMinWidth = !this.minWidth || newWidth >= this.minWidth;\r\n    const underMaxWidth = !this.maxWidth || newWidth <= this.maxWidth;\r\n\r\n    if (overMinWidth && underMaxWidth) {\r\n      this.element.style.width = `${newWidth}px`;\r\n    }\r\n  }\r\n\r\n  private _destroySubscription() {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n      this.subscription = undefined;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Output,\r\n  EventEmitter,\r\n  ContentChildren,\r\n  QueryList,\r\n  KeyValueDiffers,\r\n  AfterContentInit,\r\n  OnDestroy,\r\n  Inject\r\n} from '@angular/core';\r\nimport { DraggableDirective } from './draggable.directive';\r\nimport { DOCUMENT } from '@angular/common';\r\n\r\n@Directive({ selector: '[orderable]' })\r\nexport class OrderableDirective implements AfterContentInit, OnDestroy {\r\n  @Output() reorder: EventEmitter<any> = new EventEmitter();\r\n  @Output() targetChanged: EventEmitter<any> = new EventEmitter();\r\n\r\n  @ContentChildren(DraggableDirective, { descendants: true })\r\n  draggables: QueryList<DraggableDirective>;\r\n\r\n  positions: any;\r\n  differ: any;\r\n  lastDraggingIndex: number;\r\n\r\n  constructor(differs: KeyValueDiffers, @Inject(DOCUMENT) private document: any) {\r\n    this.differ = differs.find({}).create();\r\n  }\r\n\r\n  ngAfterContentInit(): void {\r\n    // HACK: Investigate Better Way\r\n    this.updateSubscriptions();\r\n    this.draggables.changes.subscribe(this.updateSubscriptions.bind(this));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.draggables.forEach(d => {\r\n      d.dragStart.unsubscribe();\r\n      d.dragging.unsubscribe();\r\n      d.dragEnd.unsubscribe();\r\n    });\r\n  }\r\n\r\n  updateSubscriptions(): void {\r\n    const diffs = this.differ.diff(this.createMapDiffs());\r\n\r\n    if (diffs) {\r\n      const subscribe = ({ currentValue, previousValue }: any) => {\r\n        unsubscribe({ previousValue });\r\n\r\n        if (currentValue) {\r\n          currentValue.dragStart.subscribe(this.onDragStart.bind(this));\r\n          currentValue.dragging.subscribe(this.onDragging.bind(this));\r\n          currentValue.dragEnd.subscribe(this.onDragEnd.bind(this));\r\n        }\r\n      };\r\n\r\n      const unsubscribe = ({ previousValue }: any) => {\r\n        if (previousValue) {\r\n          previousValue.dragStart.unsubscribe();\r\n          previousValue.dragging.unsubscribe();\r\n          previousValue.dragEnd.unsubscribe();\r\n        }\r\n      };\r\n\r\n      diffs.forEachAddedItem(subscribe);\r\n      // diffs.forEachChangedItem(subscribe.bind(this));\r\n      diffs.forEachRemovedItem(unsubscribe);\r\n    }\r\n  }\r\n\r\n  onDragStart(): void {\r\n    this.positions = {};\r\n\r\n    let i = 0;\r\n    for (const dragger of this.draggables.toArray()) {\r\n      const elm = dragger.element;\r\n      const left = parseInt(elm.offsetLeft.toString(), 0);\r\n      this.positions[dragger.dragModel.prop] = {\r\n        left,\r\n        right: left + parseInt(elm.offsetWidth.toString(), 0),\r\n        index: i++,\r\n        element: elm\r\n      };\r\n    }\r\n  }\r\n\r\n  onDragging({ element, model, event }: any): void {\r\n    const prevPos = this.positions[model.prop];\r\n    const target = this.isTarget(model, event);\r\n\r\n    if (target) {\r\n      if (this.lastDraggingIndex !== target.i) {\r\n        this.targetChanged.emit({\r\n          prevIndex: this.lastDraggingIndex,\r\n          newIndex: target.i,\r\n          initialIndex: prevPos.index\r\n        });\r\n        this.lastDraggingIndex = target.i;\r\n      }\r\n    } else if (this.lastDraggingIndex !== prevPos.index) {\r\n      this.targetChanged.emit({\r\n        prevIndex: this.lastDraggingIndex,\r\n        initialIndex: prevPos.index\r\n      });\r\n      this.lastDraggingIndex = prevPos.index;\r\n    }\r\n  }\r\n\r\n  onDragEnd({ element, model, event }: any): void {\r\n    const prevPos = this.positions[model.prop];\r\n\r\n    const target = this.isTarget(model, event);\r\n    if (target) {\r\n      this.reorder.emit({\r\n        prevIndex: prevPos.index,\r\n        newIndex: target.i,\r\n        model\r\n      });\r\n    }\r\n\r\n    this.lastDraggingIndex = undefined;\r\n    element.style.left = 'auto';\r\n  }\r\n\r\n  isTarget(model: any, event: any): any {\r\n    let i = 0;\r\n    const x = event.x || event.clientX;\r\n    const y = event.y || event.clientY;\r\n    const targets = this.document.elementsFromPoint(x, y);\r\n\r\n    for (const prop in this.positions) {\r\n      // current column position which throws event.\r\n      const pos = this.positions[prop];\r\n\r\n      // since we drag the inner span, we need to find it in the elements at the cursor\r\n      if (model.prop !== prop && targets.find((el: any) => el === pos.element)) {\r\n        return {\r\n          pos,\r\n          i\r\n        };\r\n      }\r\n\r\n      i++;\r\n    }\r\n  }\r\n\r\n  private createMapDiffs(): { [key: string]: DraggableDirective } {\r\n    return this.draggables.toArray().reduce((acc, curr) => {\r\n      acc[curr.dragModel.$$id] = curr;\r\n      return acc;\r\n    }, {});\r\n  }\r\n}\r\n","import { Directive, Input, Output, EventEmitter, HostBinding, HostListener, OnDestroy } from '@angular/core';\r\nimport { Observable, Subscription, fromEvent } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { MouseEvent } from '../events';\r\n\r\n@Directive({ selector: '[long-press]' })\r\nexport class LongPressDirective implements OnDestroy {\r\n  @Input() pressEnabled: boolean = true;\r\n  @Input() pressModel: any;\r\n  @Input() duration: number = 500;\r\n\r\n  @Output() longPressStart: EventEmitter<any> = new EventEmitter();\r\n  @Output() longPressing: EventEmitter<any> = new EventEmitter();\r\n  @Output() longPressEnd: EventEmitter<any> = new EventEmitter();\r\n\r\n  pressing: boolean;\r\n  isLongPressing: boolean;\r\n  timeout: any;\r\n  mouseX: number = 0;\r\n  mouseY: number = 0;\r\n\r\n  subscription: Subscription;\r\n\r\n  @HostBinding('class.press')\r\n  get press(): boolean {\r\n    return this.pressing;\r\n  }\r\n\r\n  @HostBinding('class.longpress')\r\n  get isLongPress(): boolean {\r\n    return this.isLongPressing;\r\n  }\r\n\r\n  @HostListener('mousedown', ['$event'])\r\n  onMouseDown(event: MouseEvent): void {\r\n    // don't do right/middle clicks\r\n    if (event.which !== 1 || !this.pressEnabled) return;\r\n\r\n    // don't start drag if its on resize handle\r\n    const target = <HTMLElement>event.target;\r\n    if (target.classList.contains('resize-handle')) return;\r\n\r\n    this.mouseX = event.clientX;\r\n    this.mouseY = event.clientY;\r\n\r\n    this.pressing = true;\r\n    this.isLongPressing = false;\r\n\r\n    const mouseup = fromEvent(document, 'mouseup');\r\n    this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup());\r\n\r\n    this.timeout = setTimeout(() => {\r\n      this.isLongPressing = true;\r\n      this.longPressStart.emit({\r\n        event,\r\n        model: this.pressModel\r\n      });\r\n\r\n      this.subscription.add(\r\n        fromEvent(document, 'mousemove')\r\n          .pipe(takeUntil(mouseup))\r\n          .subscribe((mouseEvent: MouseEvent) => this.onMouseMove(mouseEvent))\r\n      );\r\n\r\n      this.loop(event);\r\n    }, this.duration);\r\n\r\n    this.loop(event);\r\n  }\r\n\r\n  onMouseMove(event: MouseEvent): void {\r\n    if (this.pressing && !this.isLongPressing) {\r\n      const xThres = Math.abs(event.clientX - this.mouseX) > 10;\r\n      const yThres = Math.abs(event.clientY - this.mouseY) > 10;\r\n\r\n      if (xThres || yThres) {\r\n        this.endPress();\r\n      }\r\n    }\r\n  }\r\n\r\n  loop(event: MouseEvent): void {\r\n    if (this.isLongPressing) {\r\n      this.timeout = setTimeout(() => {\r\n        this.longPressing.emit({\r\n          event,\r\n          model: this.pressModel\r\n        });\r\n        this.loop(event);\r\n      }, 50);\r\n    }\r\n  }\r\n\r\n  endPress(): void {\r\n    clearTimeout(this.timeout);\r\n    this.isLongPressing = false;\r\n    this.pressing = false;\r\n    this._destroySubscription();\r\n\r\n    this.longPressEnd.emit({\r\n      model: this.pressModel\r\n    });\r\n  }\r\n\r\n  onMouseup(): void {\r\n    this.endPress();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._destroySubscription();\r\n  }\r\n\r\n  private _destroySubscription(): void {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n      this.subscription = undefined;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  ElementRef,\r\n  Output,\r\n  EventEmitter,\r\n  Renderer2,\r\n  NgZone,\r\n  OnInit,\r\n  OnDestroy,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { MouseEvent } from '../../events';\r\n\r\n@Component({\r\n  selector: 'datatable-scroller',\r\n  template: `\r\n    <ng-content></ng-content>\r\n  `,\r\n  host: {\r\n    class: 'datatable-scroll'\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ScrollerComponent implements OnInit, OnDestroy {\r\n  @Input() scrollbarV: boolean = false;\r\n  @Input() scrollbarH: boolean = false;\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  scrollHeight: number;\r\n\r\n  @HostBinding('style.width.px')\r\n  @Input()\r\n  scrollWidth: number;\r\n\r\n  @Output() scroll: EventEmitter<any> = new EventEmitter();\r\n\r\n  scrollYPos: number = 0;\r\n  scrollXPos: number = 0;\r\n  prevScrollYPos: number = 0;\r\n  prevScrollXPos: number = 0;\r\n  element: any;\r\n  parentElement: any;\r\n  onScrollListener: any;\r\n\r\n  private _scrollEventListener: any = null;\r\n\r\n  constructor(private ngZone: NgZone, element: ElementRef, private renderer: Renderer2) {\r\n    this.element = element.nativeElement;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // manual bind so we don't always listen\r\n    if (this.scrollbarV || this.scrollbarH) {\r\n      const renderer = this.renderer;\r\n      this.parentElement = renderer.parentNode(renderer.parentNode(this.element));\r\n      this._scrollEventListener = this.onScrolled.bind(this);\r\n      this.parentElement.addEventListener('scroll', this._scrollEventListener);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this._scrollEventListener) {\r\n      this.parentElement.removeEventListener('scroll', this._scrollEventListener);\r\n      this._scrollEventListener = null;\r\n    }\r\n  }\r\n\r\n  setOffset(offsetY: number): void {\r\n    if (this.parentElement) {\r\n      this.parentElement.scrollTop = offsetY;\r\n    }\r\n  }\r\n\r\n  onScrolled(event: MouseEvent): void {\r\n    const dom: Element = <Element>event.currentTarget;\r\n    requestAnimationFrame(() => {\r\n      this.scrollYPos = dom.scrollTop;\r\n      this.scrollXPos = dom.scrollLeft;\r\n      this.updateOffset();\r\n    });\r\n  }\r\n\r\n  updateOffset(): void {\r\n    let direction: string;\r\n    if (this.scrollYPos < this.prevScrollYPos) {\r\n      direction = 'down';\r\n    } else if (this.scrollYPos > this.prevScrollYPos) {\r\n      direction = 'up';\r\n    }\r\n\r\n    this.scroll.emit({\r\n      direction,\r\n      scrollYPos: this.scrollYPos,\r\n      scrollXPos: this.scrollXPos\r\n    });\r\n\r\n    this.prevScrollYPos = this.scrollYPos;\r\n    this.prevScrollXPos = this.scrollXPos;\r\n  }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({ selector: '[ngx-datatable-header-template]' })\r\nexport class DataTableColumnHeaderDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({ selector: '[ngx-datatable-cell-template]' })\r\nexport class DataTableColumnCellDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({ selector: '[ngx-datatable-tree-toggle]' })\r\nexport class DataTableColumnCellTreeToggle {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { Directive, TemplateRef, ContentChild, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { DataTableColumnHeaderDirective } from './column-header.directive';\r\nimport { DataTableColumnCellDirective } from './column-cell.directive';\r\nimport { DataTableColumnCellTreeToggle } from './tree.directive';\r\nimport { ColumnChangesService } from '../../services/column-changes.service';\r\nimport { TableColumnProp } from '../../types/table-column.type';\r\n\r\n@Directive({ selector: 'ngx-datatable-column' })\r\nexport class DataTableColumnDirective implements OnChanges {\r\n  @Input() name: string;\r\n  @Input() prop: TableColumnProp;\r\n  @Input() frozenLeft: any;\r\n  @Input() frozenRight: any;\r\n  @Input() flexGrow: number;\r\n  @Input() resizeable: boolean;\r\n  @Input() comparator: any;\r\n  @Input() pipe: any;\r\n  @Input() sortable: boolean;\r\n  @Input() draggable: boolean;\r\n  @Input() canAutoResize: boolean;\r\n  @Input() minWidth: number;\r\n  @Input() width: number;\r\n  @Input() maxWidth: number;\r\n  @Input() checkboxable: boolean;\r\n  @Input() headerCheckboxable: boolean;\r\n  @Input() headerClass: string | ((data: any) => string | any);\r\n  @Input() cellClass: string | ((data: any) => string | any);\r\n  @Input() isTreeColumn: boolean;\r\n  @Input() treeLevelIndent: number;\r\n  @Input() summaryFunc: (cells: any[]) => any;\r\n  @Input() summaryTemplate: TemplateRef<any>;\r\n\r\n  @Input('cellTemplate')\r\n  _cellTemplateInput: TemplateRef<any>;\r\n\r\n  @ContentChild(DataTableColumnCellDirective, { read: TemplateRef, static: true })\r\n  _cellTemplateQuery: TemplateRef<any>;\r\n\r\n  get cellTemplate(): TemplateRef<any> {\r\n    return this._cellTemplateInput || this._cellTemplateQuery;\r\n  }\r\n\r\n  @Input('headerTemplate')\r\n  _headerTemplateInput: TemplateRef<any>;\r\n\r\n  @ContentChild(DataTableColumnHeaderDirective, { read: TemplateRef, static: true })\r\n  _headerTemplateQuery: TemplateRef<any>;\r\n\r\n  get headerTemplate(): TemplateRef<any> {\r\n    return this._headerTemplateInput || this._headerTemplateQuery;\r\n  }\r\n\r\n  @Input('treeToggleTemplate')\r\n  _treeToggleTemplateInput: TemplateRef<any>;\r\n\r\n  @ContentChild(DataTableColumnCellTreeToggle, { read: TemplateRef, static: true })\r\n  _treeToggleTemplateQuery: TemplateRef<any>;\r\n\r\n  get treeToggleTemplate(): TemplateRef<any> {\r\n    return this._treeToggleTemplateInput || this._treeToggleTemplateQuery;\r\n  }\r\n\r\n  private isFirstChange = true;\r\n\r\n  constructor(private columnChangesService: ColumnChangesService) {}\r\n\r\n  ngOnChanges() {\r\n    if (this.isFirstChange) {\r\n      this.isFirstChange = false;\r\n    } else {\r\n      this.columnChangesService.onInputChange();\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Returns the columns by pin.\r\n */\r\nexport function columnsByPin(cols: any[]) {\r\n  const ret: { left: any; center: any; right: any } = {\r\n    left: [],\r\n    center: [],\r\n    right: []\r\n  };\r\n\r\n  if (cols) {\r\n    for (const col of cols) {\r\n      if (col.frozenLeft) {\r\n        ret.left.push(col);\r\n      } else if (col.frozenRight) {\r\n        ret.right.push(col);\r\n      } else {\r\n        ret.center.push(col);\r\n      }\r\n    }\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Returns the widths of all group sets of a column\r\n */\r\nexport function columnGroupWidths(groups: any, all: any) {\r\n  return {\r\n    left: columnTotalWidth(groups.left),\r\n    center: columnTotalWidth(groups.center),\r\n    right: columnTotalWidth(groups.right),\r\n    total: Math.floor(columnTotalWidth(all))\r\n  };\r\n}\r\n\r\n/**\r\n * Calculates the total width of all columns and their groups\r\n */\r\nexport function columnTotalWidth(columns: any[], prop?: string) {\r\n  let totalWidth = 0;\r\n\r\n  if (columns) {\r\n    for (const c of columns) {\r\n      const has = prop && c[prop];\r\n      const width = has ? c[prop] : c.width;\r\n      totalWidth = totalWidth + parseFloat(width);\r\n    }\r\n  }\r\n\r\n  return totalWidth;\r\n}\r\n\r\n/**\r\n * Calculates the total width of all columns and their groups\r\n */\r\nexport function columnsTotalWidth(columns: any, prop?: any) {\r\n  let totalWidth = 0;\r\n\r\n  for (const column of columns) {\r\n    const has = prop && column[prop];\r\n    totalWidth = totalWidth + (has ? column[prop] : column.width);\r\n  }\r\n\r\n  return totalWidth;\r\n}\r\n\r\nexport function columnsByPinArr(val: any) {\r\n  const colsByPinArr = [];\r\n  const colsByPin = columnsByPin(val);\r\n\r\n  colsByPinArr.push({ type: 'left', columns: colsByPin['left'] });\r\n  colsByPinArr.push({ type: 'center', columns: colsByPin['center'] });\r\n  colsByPinArr.push({ type: 'right', columns: colsByPin['right'] });\r\n\r\n  return colsByPinArr;\r\n}\r\n","export enum SortType {\r\n  single = 'single',\r\n  multi = 'multi'\r\n}\r\n","export enum SelectionType {\r\n  single = 'single',\r\n  multi = 'multi',\r\n  multiClick = 'multiClick',\r\n  cell = 'cell',\r\n  checkbox = 'checkbox'\r\n}\r\n","/**\r\n * Converts strings from something to camel case\r\n * http://stackoverflow.com/questions/10425287/convert-dash-separated-string-to-camelcase\r\n */\r\nexport function camelCase(str: string): string {\r\n  // Replace special characters with a space\r\n  str = str.replace(/[^a-zA-Z0-9 ]/g, ' ');\r\n  // put a space before an uppercase letter\r\n  str = str.replace(/([a-z](?=[A-Z]))/g, '$1 ');\r\n\r\n  // Lower case first character and some other stuff\r\n  str = str\r\n    .replace(/([^a-zA-Z0-9 ])|^[0-9]+/g, '')\r\n    .trim()\r\n    .toLowerCase();\r\n\r\n  // uppercase characters preceded by a space or number\r\n  str = str.replace(/([ 0-9]+)([a-zA-Z])/g, function(a, b, c) {\r\n    return b.trim() + c.toUpperCase();\r\n  });\r\n\r\n  return str;\r\n}\r\n\r\n/**\r\n * Converts strings from camel case to words\r\n * http://stackoverflow.com/questions/7225407/convert-camelcasetext-to-camel-case-text\r\n */\r\nexport function deCamelCase(str: string): string {\r\n  return str.replace(/([A-Z])/g, match => ` ${match}`).replace(/^./, match => match.toUpperCase());\r\n}\r\n","import { camelCase } from './camel-case';\r\n\r\nconst cache = {};\r\nconst testStyle = typeof document !== 'undefined' ? document.createElement('div').style : undefined;\r\n\r\n// Get Prefix\r\n// http://davidwalsh.name/vendor-prefix\r\nconst prefix = (function() {\r\n  const styles = typeof window !== 'undefined' ? window.getComputedStyle(document.documentElement, '') : undefined;\r\n  const match =\r\n    typeof styles !== 'undefined'\r\n      ? Array.prototype.slice\r\n          .call(styles)\r\n          .join('')\r\n          .match(/-(moz|webkit|ms)-/)\r\n      : null;\r\n  const pre = match !== null ? match[1] : undefined;\r\n  // tslint:disable-next-line: tsr-detect-non-literal-regexp\r\n  const dom = typeof pre !== 'undefined' ? 'WebKit|Moz|MS|O'.match(new RegExp('(' + pre + ')', 'i'))[1] : undefined;\r\n\r\n  return dom\r\n    ? {\r\n        dom,\r\n        lowercase: pre,\r\n        css: `-${pre}-`,\r\n        js: pre[0].toUpperCase() + pre.substr(1)\r\n      }\r\n    : undefined;\r\n})();\r\n\r\nexport function getVendorPrefixedName(property: string) {\r\n  const name = camelCase(property);\r\n\r\n  if (!cache[name]) {\r\n    if (prefix !== undefined && testStyle[prefix.css + property] !== undefined) {\r\n      cache[name] = prefix.css + property;\r\n    } else if (testStyle[property] !== undefined) {\r\n      cache[name] = property;\r\n    }\r\n  }\r\n\r\n  return cache[name];\r\n}\r\n","import { getVendorPrefixedName } from './prefixes';\r\nimport { camelCase } from './camel-case';\r\n\r\n// browser detection and prefixing tools\r\nconst transform = typeof window !== 'undefined' ? getVendorPrefixedName('transform') : undefined;\r\nconst backfaceVisibility = typeof window !== 'undefined' ? getVendorPrefixedName('backfaceVisibility') : undefined;\r\nconst hasCSSTransforms = typeof window !== 'undefined' ? !!getVendorPrefixedName('transform') : undefined;\r\nconst hasCSS3DTransforms = typeof window !== 'undefined' ? !!getVendorPrefixedName('perspective') : undefined;\r\nconst ua = typeof window !== 'undefined' ? window.navigator.userAgent : 'Chrome';\r\nconst isSafari = /Safari\\//.test(ua) && !/Chrome\\//.test(ua);\r\n\r\nexport function translateXY(styles: any, x: number, y: number) {\r\n  if (typeof transform !== 'undefined' && hasCSSTransforms) {\r\n    if (!isSafari && hasCSS3DTransforms) {\r\n      styles[transform] = `translate3d(${x}px, ${y}px, 0)`;\r\n      styles[backfaceVisibility] = 'hidden';\r\n    } else {\r\n      styles[camelCase(transform)] = `translate(${x}px, ${y}px)`;\r\n    }\r\n  } else {\r\n    styles.top = `${y}px`;\r\n    styles.left = `${x}px`;\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Output,\r\n  EventEmitter,\r\n  Input,\r\n  HostBinding,\r\n  ChangeDetectorRef,\r\n  ChangeDetectionStrategy,\r\n  ViewRef\r\n} from '@angular/core';\r\nimport { MouseEvent } from '../../events';\r\nimport { columnsByPin, columnGroupWidths, columnsByPinArr } from '../../utils/column';\r\nimport { SortType } from '../../types/sort.type';\r\nimport { SelectionType } from '../../types/selection.type';\r\nimport { DataTableColumnDirective } from '../columns/column.directive';\r\nimport { translateXY } from '../../utils/translate';\r\n\r\n@Component({\r\n  selector: 'datatable-header',\r\n  template: `\r\n    <div\r\n      orderable\r\n      (reorder)=\"onColumnReordered($event)\"\r\n      (targetChanged)=\"onTargetChanged($event)\"\r\n      [style.width.px]=\"_columnGroupWidths.total\"\r\n      class=\"datatable-header-inner\"\r\n    >\r\n      <div\r\n        *ngFor=\"let colGroup of _columnsByPin; trackBy: trackByGroups\"\r\n        [class]=\"'datatable-row-' + colGroup.type\"\r\n        [ngStyle]=\"_styleByGroup[colGroup.type]\"\r\n      >\r\n        <datatable-header-cell\r\n          *ngFor=\"let column of colGroup.columns; trackBy: columnTrackingFn\"\r\n          [ngClass]=\"{ 'filter-template-wrap': column.filter }\"\r\n          resizeable\r\n          [resizeEnabled]=\"column.resizeable\"\r\n          (resize)=\"onColumnResized($event, column)\"\r\n          long-press\r\n          [pressModel]=\"column\"\r\n          [pressEnabled]=\"reorderable && column.draggable\"\r\n          (longPressStart)=\"onLongPressStart($event)\"\r\n          (longPressEnd)=\"onLongPressEnd($event)\"\r\n          draggable\r\n          [dragX]=\"reorderable && column.draggable && column.dragging\"\r\n          [dragY]=\"false\"\r\n          [dragModel]=\"column\"\r\n          [dragEventTarget]=\"dragEventTarget\"\r\n          [headerHeight]=\"headerHeight\"\r\n          [isTarget]=\"column.isTarget\"\r\n          [targetMarkerTemplate]=\"targetMarkerTemplate\"\r\n          [targetMarkerContext]=\"column.targetMarkerContext\"\r\n          [column]=\"column\"\r\n          [sortType]=\"sortType\"\r\n          [sorts]=\"sorts\"\r\n          [selectionType]=\"selectionType\"\r\n          [sortAscendingIcon]=\"sortAscendingIcon\"\r\n          [sortDescendingIcon]=\"sortDescendingIcon\"\r\n          [allRowsSelected]=\"allRowsSelected\"\r\n          (sort)=\"onSort($event)\"\r\n          (filter)=\"onColumnFilter($event)\"\r\n          (select)=\"select.emit($event)\"\r\n          (columnContextmenu)=\"columnContextmenu.emit($event)\"\r\n        >\r\n        </datatable-header-cell>\r\n      </div>\r\n    </div>\r\n  `,\r\n  host: {\r\n    class: 'datatable-header'\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataTableHeaderComponent {\r\n  @Input() sortAscendingIcon: any;\r\n  @Input() sortDescendingIcon: any;\r\n  @Input() scrollbarH: boolean;\r\n  @Input() dealsWithGroup: boolean;\r\n  @Input() targetMarkerTemplate: any;\r\n\r\n  targetMarkerContext: any;\r\n\r\n  @Input() set innerWidth(val: number) {\r\n    this._innerWidth = val;\r\n    setTimeout(() => {\r\n      if (this._columns) {\r\n        const colByPin = columnsByPin(this._columns);\r\n        this._columnGroupWidths = columnGroupWidths(colByPin, this._columns);\r\n        this.setStylesByGroup();\r\n      }\r\n    });\r\n  }\r\n\r\n  get innerWidth(): number {\r\n    return this._innerWidth;\r\n  }\r\n\r\n  @Input() sorts: any[];\r\n  @Input() sortType: SortType;\r\n  @Input() allRowsSelected: boolean;\r\n  @Input() selectionType: SelectionType;\r\n  @Input() reorderable: boolean;\r\n\r\n  dragEventTarget: any;\r\n\r\n  @HostBinding('style.height')\r\n  @Input()\r\n  set headerHeight(val: any) {\r\n    if (val !== 'auto') {\r\n      this._headerHeight = `${val}px`;\r\n    } else {\r\n      this._headerHeight = val;\r\n    }\r\n  }\r\n\r\n  get headerHeight(): any {\r\n    return this._headerHeight;\r\n  }\r\n\r\n  @Input() set columns(val: any[]) {\r\n    this._columns = val;\r\n\r\n    const colsByPin = columnsByPin(val);\r\n    this._columnsByPin = columnsByPinArr(val);\r\n    setTimeout(() => {\r\n      this._columnGroupWidths = columnGroupWidths(colsByPin, val);\r\n      this.setStylesByGroup();\r\n    });\r\n  }\r\n\r\n  get columns(): any[] {\r\n    return this._columns;\r\n  }\r\n\r\n  @Input()\r\n  set offsetX(val: number) {\r\n    this._offsetX = val;\r\n    this.setStylesByGroup();\r\n  }\r\n  get offsetX() {\r\n    return this._offsetX;\r\n  }\r\n\r\n  @Output() sort: EventEmitter<any> = new EventEmitter();\r\n  @Output() reorder: EventEmitter<any> = new EventEmitter();\r\n  @Output() resize: EventEmitter<any> = new EventEmitter();\r\n  @Output() select: EventEmitter<any> = new EventEmitter();\r\n  @Output() columnContextmenu = new EventEmitter<{ event: MouseEvent; column: any }>(false);\r\n  @Output() filter: EventEmitter<any> = new EventEmitter();\r\n\r\n  _columnsByPin: any;\r\n  _columnGroupWidths: any = {\r\n    total: 100\r\n  };\r\n  _innerWidth: number;\r\n  _offsetX: number;\r\n  _columns: any[];\r\n  _headerHeight: string;\r\n  _styleByGroup: { [prop: string]: {} } = {\r\n    left: {},\r\n    center: {},\r\n    right: {}\r\n  };\r\n\r\n  constructor(private cd: ChangeDetectorRef) {}\r\n\r\n  onLongPressStart({ event, model }: { event: any; model: any }) {\r\n    model.dragging = true;\r\n    this.dragEventTarget = event;\r\n  }\r\n\r\n  onLongPressEnd({ event, model }: { event: any; model: any }) {\r\n    this.dragEventTarget = event;\r\n\r\n    // delay resetting so sort can be\r\n    // prevented if we were dragging\r\n    setTimeout(() => {\r\n      // datatable component creates copies from columns on reorder\r\n      // set dragging to false on new objects\r\n      const column = this._columns.find(c => c.$$id === model.$$id);\r\n      if (column) {\r\n        column.dragging = false;\r\n      }\r\n    }, 5);\r\n  }\r\n\r\n  @HostBinding('style.width')\r\n  get headerWidth(): string {\r\n    if (this.scrollbarH) {\r\n      return this.innerWidth + 'px';\r\n    }\r\n\r\n    return '100%';\r\n  }\r\n\r\n  trackByGroups(index: number, colGroup: any): any {\r\n    return colGroup.type;\r\n  }\r\n\r\n  columnTrackingFn(index: number, column: any): any {\r\n    return column.$$id;\r\n  }\r\n\r\n  onColumnResized(width: number, column: DataTableColumnDirective): void {\r\n    if (width <= column.minWidth) {\r\n      width = column.minWidth;\r\n    } else if (width >= column.maxWidth) {\r\n      width = column.maxWidth;\r\n    }\r\n\r\n    this.resize.emit({\r\n      column,\r\n      prevValue: column.width,\r\n      newValue: width\r\n    });\r\n  }\r\n\r\n  onColumnReordered({ prevIndex, newIndex, model }: any): void {\r\n    const column = this.getColumn(newIndex);\r\n    column.isTarget = false;\r\n    column.targetMarkerContext = undefined;\r\n    this.reorder.emit({\r\n      column: model,\r\n      prevValue: prevIndex,\r\n      newValue: newIndex\r\n    });\r\n  }\r\n\r\n  onTargetChanged({ prevIndex, newIndex, initialIndex }: any): void {\r\n    if (prevIndex || prevIndex === 0) {\r\n      const oldColumn = this.getColumn(prevIndex);\r\n      oldColumn.isTarget = false;\r\n      oldColumn.targetMarkerContext = undefined;\r\n    }\r\n    if (newIndex || newIndex === 0) {\r\n      const newColumn = this.getColumn(newIndex);\r\n      newColumn.isTarget = true;\r\n\r\n      if (initialIndex !== newIndex) {\r\n        newColumn.targetMarkerContext = {\r\n          class: 'targetMarker '.concat(initialIndex > newIndex ? 'dragFromRight' : 'dragFromLeft')\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  getColumn(index: number): any {\r\n    const leftColumnCount = this._columnsByPin[0].columns.length;\r\n    if (index < leftColumnCount) {\r\n      return this._columnsByPin[0].columns[index];\r\n    }\r\n\r\n    const centerColumnCount = this._columnsByPin[1].columns.length;\r\n    if (index < leftColumnCount + centerColumnCount) {\r\n      return this._columnsByPin[1].columns[index - leftColumnCount];\r\n    }\r\n\r\n    return this._columnsByPin[2].columns[index - leftColumnCount - centerColumnCount];\r\n  }\r\n\r\n  onSort({ column, prevValue, newValue }: any): void {\r\n    // if we are dragging don't sort!\r\n    if (column.dragging) {\r\n      return;\r\n    }\r\n\r\n    const sorts = this.calcNewSorts(column, prevValue, newValue);\r\n    this.sort.emit({\r\n      sorts,\r\n      column,\r\n      prevValue,\r\n      newValue\r\n    });\r\n  }\r\n\r\n  calcNewSorts(column: any, prevValue: number, newValue: number): any[] {\r\n    let idx = 0;\r\n\r\n    if (!this.sorts) {\r\n      this.sorts = [];\r\n    }\r\n\r\n    const sorts = this.sorts.map((s, i) => {\r\n      s = { ...s };\r\n      if (s.prop === column.prop) {\r\n        idx = i;\r\n      }\r\n      return s;\r\n    });\r\n\r\n    if (newValue === undefined) {\r\n      sorts.splice(idx, 1);\r\n    } else if (prevValue) {\r\n      sorts[idx].dir = newValue;\r\n    } else {\r\n      if (this.sortType === SortType.single) {\r\n        sorts.splice(0, this.sorts.length);\r\n      }\r\n\r\n      sorts.push({ dir: newValue, prop: column.prop });\r\n    }\r\n\r\n    return sorts;\r\n  }\r\n\r\n  setStylesByGroup() {\r\n    this._styleByGroup.left = this.calcStylesByGroup('left');\r\n    this._styleByGroup.center = this.calcStylesByGroup('center');\r\n    this._styleByGroup.right = this.calcStylesByGroup('right');\r\n    if (!(this.cd as ViewRef).destroyed) {\r\n      this.cd.detectChanges();\r\n    }\r\n  }\r\n\r\n  calcStylesByGroup(group: string): any {\r\n    const widths = this._columnGroupWidths;\r\n    const offsetX = this.offsetX;\r\n\r\n    const styles = {\r\n      width: `${widths[group]}px`\r\n    };\r\n\r\n    if (group === 'center') {\r\n      translateXY(styles, offsetX * -1, 0);\r\n    } else if (group === 'right') {\r\n      const totalDiff = widths.total - this.innerWidth;\r\n      const offset = totalDiff * -1;\r\n      translateXY(styles, offset, 0);\r\n    }\r\n\r\n    return styles;\r\n  }\r\n\r\n  onColumnFilter(event: any): void {\r\n    this.filter.emit(event);\r\n  }\r\n}\r\n","import { TableColumnProp } from '../types/table-column.type';\r\n\r\n// maybe rename this file to prop-getters.ts\r\n\r\nexport type ValueGetter = (obj: any, prop: TableColumnProp) => any;\r\n\r\n/**\r\n * Always returns the empty string ''\r\n */\r\nexport function emptyStringGetter(): string {\r\n  return '';\r\n}\r\n\r\n/**\r\n * Returns the appropriate getter function for this kind of prop.\r\n * If prop == null, returns the emptyStringGetter.\r\n */\r\nexport function getterForProp(prop: TableColumnProp): ValueGetter {\r\n  if (prop == null) {\r\n    return emptyStringGetter;\r\n  }\r\n\r\n  if (typeof prop === 'number') {\r\n    return numericIndexGetter;\r\n  } else {\r\n    // deep or simple\r\n    if (prop.indexOf('.') !== -1) {\r\n      return deepValueGetter;\r\n    } else {\r\n      return shallowValueGetter;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the value at this numeric index.\r\n * @param row array of values\r\n * @param index numeric index\r\n * @returns any or '' if invalid index\r\n */\r\nexport function numericIndexGetter(row: any[], index: number): any {\r\n  if (row == null) {\r\n    return '';\r\n  }\r\n  // mimic behavior of deepValueGetter\r\n  if (!row || index == null) {\r\n    return row;\r\n  }\r\n\r\n  const value = row[index];\r\n  if (value == null) {\r\n    return '';\r\n  }\r\n  return value;\r\n}\r\n\r\n/**\r\n * Returns the value of a field.\r\n * (more efficient than deepValueGetter)\r\n * @param obj object containing the field\r\n * @param fieldName field name string\r\n */\r\nexport function shallowValueGetter(obj: any, fieldName: string): any {\r\n  if (obj == null) {\r\n    return '';\r\n  }\r\n  if (!obj || !fieldName) {\r\n    return obj;\r\n  }\r\n\r\n  const value = obj[fieldName];\r\n  if (value == null) {\r\n    return '';\r\n  }\r\n  return value;\r\n}\r\n\r\n/**\r\n * Returns a deep object given a string. zoo['animal.type']\r\n */\r\nexport function deepValueGetter(obj: any, path: string): any {\r\n  if (obj == null) {\r\n    return '';\r\n  }\r\n  if (!obj || !path) {\r\n    return obj;\r\n  }\r\n\r\n  // check if path matches a root-level field\r\n  // { \"a.b.c\": 123 }\r\n  let current = obj[path];\r\n  if (current !== undefined) {\r\n    return current;\r\n  }\r\n\r\n  current = obj;\r\n  const split = path.split('.');\r\n\r\n  if (split.length) {\r\n    for (let i = 0; i < split.length; i++) {\r\n      current = current[split[i]];\r\n\r\n      // if found undefined, return empty string\r\n      if (current === undefined || current === null) {\r\n        return '';\r\n      }\r\n    }\r\n  }\r\n\r\n  return current;\r\n}\r\n","export enum SortDirection {\r\n  asc = 'asc',\r\n  desc = 'desc'\r\n}\r\n","import { getterForProp } from './column-prop-getters';\r\nimport { SortType } from '../types/sort.type';\r\nimport { SortDirection } from '../types/sort-direction.type';\r\nimport { SortPropDir } from '../types/sort-prop-dir.type';\r\n/**\r\n * Gets the next sort direction\r\n */\r\nexport function nextSortDir(sortType: SortType, current: SortDirection): SortDirection | undefined {\r\n  if (sortType === SortType.single) {\r\n    if (current === SortDirection.asc) {\r\n      return SortDirection.desc;\r\n    } else {\r\n      return SortDirection.asc;\r\n    }\r\n  } else {\r\n    if (!current) {\r\n      return SortDirection.asc;\r\n    } else if (current === SortDirection.asc) {\r\n      return SortDirection.desc;\r\n    } else if (current === SortDirection.desc) {\r\n      return undefined;\r\n    }\r\n    // avoid TS7030: Not all code paths return a value.\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Adapted from fueld-ui on 6/216\r\n * https://github.com/FuelInteractive/fuel-ui/tree/master/src/pipes/OrderBy\r\n */\r\nexport function orderByComparator(a: any, b: any): number {\r\n  if (a === null || typeof a === 'undefined') a = 0;\r\n  if (b === null || typeof b === 'undefined') b = 0;\r\n  if (a instanceof Date && b instanceof Date) {\r\n    if (a < b) return -1;\r\n    if (a > b) return 1;\r\n  } else if (isNaN(parseFloat(a)) || !isFinite(a) || (isNaN(parseFloat(b)) || !isFinite(b))) {\r\n    // Convert to string in case of a=0 or b=0\r\n    a = String(a);\r\n    b = String(b);\r\n    // Isn't a number so lowercase the string to properly compare\r\n    if (a.toLowerCase() < b.toLowerCase()) return -1;\r\n    if (a.toLowerCase() > b.toLowerCase()) return 1;\r\n  } else {\r\n    // Parse strings as numbers to compare properly\r\n    if (parseFloat(a) < parseFloat(b)) return -1;\r\n    if (parseFloat(a) > parseFloat(b)) return 1;\r\n  }\r\n\r\n  // equal each other\r\n  return 0;\r\n}\r\n\r\n/**\r\n * creates a shallow copy of the `rows` input and returns the sorted copy. this function\r\n * does not sort the `rows` argument in place\r\n */\r\nexport function sortRows(rows: any[], columns: any[], dirs: SortPropDir[]): any[] {\r\n  if (!rows) return [];\r\n  if (!dirs || !dirs.length || !columns) return [...rows];\r\n\r\n  /**\r\n   * record the row ordering of results from prior sort operations (if applicable)\r\n   * this is necessary to guarantee stable sorting behavior\r\n   */\r\n  const rowToIndexMap = new Map<any, number>();\r\n  rows.forEach((row, index) => rowToIndexMap.set(row, index));\r\n\r\n  const temp = [...rows];\r\n  const cols = columns.reduce((obj, col) => {\r\n    if (col.comparator && typeof col.comparator === 'function') {\r\n      obj[col.prop] = col.comparator;\r\n    }\r\n    return obj;\r\n  }, {});\r\n\r\n  // cache valueGetter and compareFn so that they\r\n  // do not need to be looked-up in the sort function body\r\n  const cachedDirs = dirs.map(dir => {\r\n    const prop = dir.prop;\r\n    return {\r\n      prop,\r\n      dir: dir.dir,\r\n      valueGetter: getterForProp(prop),\r\n      compareFn: cols[prop] || orderByComparator\r\n    };\r\n  });\r\n\r\n  return temp.sort(function(rowA: any, rowB: any) {\r\n    for (const cachedDir of cachedDirs) {\r\n      // Get property and valuegetters for column to be sorted\r\n      const { prop, valueGetter } = cachedDir;\r\n      // Get A and B cell values from rows based on properties of the columns\r\n      const propA = valueGetter(rowA, prop);\r\n      const propB = valueGetter(rowB, prop);\r\n\r\n      // Compare function gets five parameters:\r\n      // Two cell values to be compared as propA and propB\r\n      // Two rows corresponding to the cells as rowA and rowB\r\n      // Direction of the sort for this column as SortDirection\r\n      // Compare can be a standard JS comparison function (a,b) => -1|0|1\r\n      // as additional parameters are silently ignored. The whole row and sort\r\n      // direction enable more complex sort logic.\r\n      const comparison =\r\n        cachedDir.dir !== SortDirection.desc\r\n          ? cachedDir.compareFn(propA, propB, rowA, rowB, cachedDir.dir)\r\n          : -cachedDir.compareFn(propA, propB, rowA, rowB, cachedDir.dir);\r\n\r\n      // Don't return 0 yet in case of needing to sort by next property\r\n      if (comparison !== 0) return comparison;\r\n    }\r\n\r\n    if (!(rowToIndexMap.has(rowA) && rowToIndexMap.has(rowB))) return 0;\r\n\r\n    /**\r\n     * all else being equal, preserve original order of the rows (stable sort)\r\n     */\r\n    return rowToIndexMap.get(rowA) < rowToIndexMap.get(rowB) ? -1 : 1;\r\n  });\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  EventEmitter,\r\n  Output,\r\n  HostBinding,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { MouseEvent } from '../../events';\r\nimport { SortType } from '../../types/sort.type';\r\nimport { SelectionType } from '../../types/selection.type';\r\nimport { TableColumn } from '../../types/table-column.type';\r\nimport { nextSortDir } from '../../utils/sort';\r\nimport { SortDirection } from '../../types/sort-direction.type';\r\nimport { Subject } from 'rxjs';\r\nimport { debounceTime, takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'datatable-header-cell',\r\n  template: `\r\n    <div class=\"datatable-header-cell-template-wrap\">\r\n      <ng-container *ngIf=\"column.filter\">\r\n        <mat-form-field class=\"filter-header\">\r\n          <input\r\n            matInput\r\n            [placeholder]=\"column.name\"\r\n            [(ngModel)]=\"filterCache[column.prop]\"\r\n            (ngModelChange)=\"setFilter(column.prop)\"\r\n          />\r\n          <button\r\n            mat-button\r\n            *ngIf=\"filterCache[column.prop]\"\r\n            matSuffix\r\n            mat-icon-button\r\n            aria-label=\"Clear\"\r\n            (click)=\"resetFilter(column.prop)\"\r\n          >\r\n            <mat-icon class=\"mat-icon material-icons\">close</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n        <button mat-icon-button>\r\n          <mat-icon class=\"mat-icon material-icons\" (click)=\"onSort()\">sort</mat-icon>\r\n        </button>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!column.filter\">\r\n        <ng-template\r\n          *ngIf=\"isTarget\"\r\n          [ngTemplateOutlet]=\"targetMarkerTemplate\"\r\n          [ngTemplateOutletContext]=\"targetMarkerContext\"\r\n        >\r\n        </ng-template>\r\n        <label *ngIf=\"isCheckboxable\" class=\"datatable-checkbox\">\r\n          <input type=\"checkbox\" [checked]=\"allRowsSelected\" (change)=\"select.emit(!allRowsSelected)\" />\r\n        </label>\r\n        <span *ngIf=\"!column.headerTemplate\" class=\"datatable-header-cell-wrapper\">\r\n          <span class=\"datatable-header-cell-label draggable\" (click)=\"onSort()\" [innerHTML]=\"name\"> </span>\r\n        </span>\r\n        <ng-template\r\n          *ngIf=\"column.headerTemplate\"\r\n          [ngTemplateOutlet]=\"column.headerTemplate\"\r\n          [ngTemplateOutletContext]=\"cellContext\"\r\n        >\r\n        </ng-template>\r\n        <span (click)=\"onSort()\" [class]=\"sortClass\"> </span>\r\n      </ng-container>\r\n    </div>\r\n  `,\r\n  host: {\r\n    class: 'datatable-header-cell'\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataTableHeaderCellComponent {\r\n  @Input() sortType: SortType;\r\n  @Input() sortAscendingIcon: string;\r\n  @Input() sortDescendingIcon: string;\r\n\r\n  @Input() isTarget: boolean;\r\n  @Input() targetMarkerTemplate: any;\r\n  @Input() targetMarkerContext: any;\r\n\r\n  _allRowsSelected: boolean;\r\n\r\n  @Input() set allRowsSelected(value) {\r\n    this._allRowsSelected = value;\r\n    this.cellContext.allRowsSelected = value;\r\n  }\r\n  get allRowsSelected() {\r\n    return this._allRowsSelected;\r\n  }\r\n\r\n  @Input() selectionType: SelectionType;\r\n\r\n  @Input() set column(column: TableColumn) {\r\n    this._column = column;\r\n    this.cellContext.column = column;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get column(): TableColumn {\r\n    return this._column;\r\n  }\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  headerHeight: number;\r\n\r\n  @Input() set sorts(val: any[]) {\r\n    this._sorts = val;\r\n    this.sortDir = this.calcSortDir(val);\r\n    this.cellContext.sortDir = this.sortDir;\r\n    this.sortClass = this.calcSortClass(this.sortDir);\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get sorts(): any[] {\r\n    return this._sorts;\r\n  }\r\n\r\n  @Output() sort: EventEmitter<any> = new EventEmitter();\r\n  @Output() select: EventEmitter<any> = new EventEmitter();\r\n  @Output() columnContextmenu = new EventEmitter<{ event: MouseEvent; column: any }>(false);\r\n  @Output() filter: EventEmitter<any> = new EventEmitter();\r\n\r\n  @HostBinding('class')\r\n  get columnCssClasses(): any {\r\n    let cls = 'datatable-header-cell';\r\n\r\n    if (this.column.sortable) cls += ' sortable';\r\n    if (this.column.resizeable) cls += ' resizeable';\r\n    if (this.column.headerClass) {\r\n      if (typeof this.column.headerClass === 'string') {\r\n        cls += ' ' + this.column.headerClass;\r\n      } else if (typeof this.column.headerClass === 'function') {\r\n        const res = this.column.headerClass({\r\n          column: this.column\r\n        });\r\n\r\n        if (typeof res === 'string') {\r\n          cls += res;\r\n        } else if (typeof res === 'object') {\r\n          const keys = Object.keys(res);\r\n          for (const k of keys) {\r\n            if (res[k] === true) cls += ` ${k}`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const sortDir = this.sortDir;\r\n    if (sortDir) {\r\n      cls += ` sort-active sort-${sortDir}`;\r\n    }\r\n\r\n    return cls;\r\n  }\r\n\r\n  @HostBinding('attr.title')\r\n  get name(): string {\r\n    // guaranteed to have a value by setColumnDefaults() in column-helper.ts\r\n    return this.column.headerTemplate === undefined ? this.column.name : undefined;\r\n  }\r\n\r\n  @HostBinding('style.minWidth.px')\r\n  get minWidth(): number {\r\n    return this.column.minWidth;\r\n  }\r\n\r\n  @HostBinding('style.maxWidth.px')\r\n  get maxWidth(): number {\r\n    return this.column.maxWidth;\r\n  }\r\n\r\n  @HostBinding('style.width.px')\r\n  get width(): number {\r\n    return this.column.width;\r\n  }\r\n\r\n  get isCheckboxable(): boolean {\r\n    return this.column.checkboxable && this.column.headerCheckboxable && this.selectionType === SelectionType.checkbox;\r\n  }\r\n\r\n  sortFn = this.onSort.bind(this);\r\n  sortClass: string;\r\n  sortDir: SortDirection;\r\n  selectFn = this.select.emit.bind(this.select);\r\n  filterCache = {};\r\n\r\n  cellContext: any = {\r\n    column: this.column,\r\n    sortDir: this.sortDir,\r\n    sortFn: this.sortFn,\r\n    allRowsSelected: this.allRowsSelected,\r\n    selectFn: this.selectFn\r\n  };\r\n\r\n  private _column: TableColumn;\r\n  private _sorts: any[];\r\n\r\n  constructor(private cd: ChangeDetectorRef) {}\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextmenu($event: MouseEvent): void {\r\n    this.columnContextmenu.emit({ event: $event, column: this.column });\r\n  }\r\n\r\n  calcSortDir(sorts: any[]): any {\r\n    if (sorts && this.column) {\r\n      const sort = sorts.find((s: any) => {\r\n        return s.prop === this.column.prop;\r\n      });\r\n\r\n      if (sort) return sort.dir;\r\n    }\r\n  }\r\n\r\n  onSort(): void {\r\n    if (!this.column.sortable) return;\r\n\r\n    const newValue = nextSortDir(this.sortType, this.sortDir);\r\n    this.sort.emit({\r\n      column: this.column,\r\n      prevValue: this.sortDir,\r\n      newValue\r\n    });\r\n  }\r\n\r\n  calcSortClass(sortDir: SortDirection): string {\r\n    if (sortDir === SortDirection.asc) {\r\n      return `sort-btn sort-asc ${this.sortAscendingIcon}`;\r\n    } else if (sortDir === SortDirection.desc) {\r\n      return `sort-btn sort-desc ${this.sortDescendingIcon}`;\r\n    } else {\r\n      return `sort-btn`;\r\n    }\r\n  }\r\n\r\n  setFilter(column) {\r\n    this.filter.emit({\r\n      column,\r\n      value: this.filterCache[column]\r\n    });\r\n  }\r\n\r\n  resetFilter(column) {\r\n    this.filterCache[column] = '';\r\n    this.filter.emit({\r\n      column\r\n    });\r\n  }\r\n}\r\n","/**\r\n * This object contains the cache of the various row heights that are present inside\r\n * the data table.   Its based on Fenwick tree data structure that helps with\r\n * querying sums that have time complexity of log n.\r\n *\r\n * Fenwick Tree Credits: http://petr-mitrichev.blogspot.com/2013/05/fenwick-tree-range-updates.html\r\n * https://github.com/mikolalysenko/fenwick-tree\r\n *\r\n */\r\nexport class RowHeightCache {\r\n  /**\r\n   * Tree Array stores the cumulative information of the row heights to perform efficient\r\n   * range queries and updates.  Currently the tree is initialized to the base row\r\n   * height instead of the detail row height.\r\n   */\r\n  private treeArray: number[] = [];\r\n\r\n  /**\r\n   * Clear the Tree array.\r\n   */\r\n  clearCache(): void {\r\n    this.treeArray = [];\r\n  }\r\n\r\n  /**\r\n   * Initialize the Fenwick tree with row Heights.\r\n   *\r\n   * @param rows The array of rows which contain the expanded status.\r\n   * @param rowHeight The row height.\r\n   * @param detailRowHeight The detail row height.\r\n   */\r\n  initCache(details: any): void {\r\n    const { rows, rowHeight, detailRowHeight, externalVirtual, rowCount, rowIndexes, rowExpansions } = details;\r\n    const isFn = typeof rowHeight === 'function';\r\n    const isDetailFn = typeof detailRowHeight === 'function';\r\n\r\n    if (!isFn && isNaN(rowHeight)) {\r\n      throw new Error(`Row Height cache initialization failed. Please ensure that 'rowHeight' is a\r\n        valid number or function value: (${rowHeight}) when 'scrollbarV' is enabled.`);\r\n    }\r\n\r\n    // Add this additional guard in case detailRowHeight is set to 'auto' as it wont work.\r\n    if (!isDetailFn && isNaN(detailRowHeight)) {\r\n      throw new Error(`Row Height cache initialization failed. Please ensure that 'detailRowHeight' is a\r\n        valid number or function value: (${detailRowHeight}) when 'scrollbarV' is enabled.`);\r\n    }\r\n\r\n    const n = externalVirtual ? rowCount : rows.length;\r\n    this.treeArray = new Array(n);\r\n\r\n    for (let i = 0; i < n; ++i) {\r\n      this.treeArray[i] = 0;\r\n    }\r\n\r\n    for (let i = 0; i < n; ++i) {\r\n      const row = rows[i];\r\n      let currentRowHeight = rowHeight;\r\n      if (isFn) {\r\n        currentRowHeight = rowHeight(row);\r\n      }\r\n\r\n      // Add the detail row height to the already expanded rows.\r\n      // This is useful for the table that goes through a filter or sort.\r\n      const expanded = rowExpansions.has(row);\r\n      if (row && expanded) {\r\n        if (isDetailFn) {\r\n          const index = rowIndexes.get(row);\r\n          currentRowHeight += detailRowHeight(row, index);\r\n        } else {\r\n          currentRowHeight += detailRowHeight;\r\n        }\r\n      }\r\n\r\n      this.update(i, currentRowHeight);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Given the ScrollY position i.e. sum, provide the rowIndex\r\n   * that is present in the current view port.  Below handles edge cases.\r\n   */\r\n  getRowIndex(scrollY: number): number {\r\n    if (scrollY === 0) return 0;\r\n    return this.calcRowIndex(scrollY);\r\n  }\r\n\r\n  /**\r\n   * When a row is expanded or rowHeight is changed, update the height.  This can\r\n   * be utilized in future when Angular Data table supports dynamic row heights.\r\n   */\r\n  update(atRowIndex: number, byRowHeight: number): void {\r\n    if (!this.treeArray.length) {\r\n      throw new Error(`Update at index ${atRowIndex} with value ${byRowHeight} failed:\r\n        Row Height cache not initialized.`);\r\n    }\r\n\r\n    const n = this.treeArray.length;\r\n    atRowIndex |= 0;\r\n\r\n    while (atRowIndex < n) {\r\n      this.treeArray[atRowIndex] += byRowHeight;\r\n      atRowIndex |= atRowIndex + 1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Range Sum query from 1 to the rowIndex\r\n   */\r\n  query(atIndex: number): number {\r\n    if (!this.treeArray.length) {\r\n      throw new Error(`query at index ${atIndex} failed: Fenwick tree array not initialized.`);\r\n    }\r\n\r\n    let sum = 0;\r\n    atIndex |= 0;\r\n\r\n    while (atIndex >= 0) {\r\n      sum += this.treeArray[atIndex];\r\n      atIndex = (atIndex & (atIndex + 1)) - 1;\r\n    }\r\n\r\n    return sum;\r\n  }\r\n\r\n  /**\r\n   * Find the total height between 2 row indexes\r\n   */\r\n  queryBetween(atIndexA: number, atIndexB: number): number {\r\n    return this.query(atIndexB) - this.query(atIndexA - 1);\r\n  }\r\n\r\n  /**\r\n   * Given the ScrollY position i.e. sum, provide the rowIndex\r\n   * that is present in the current view port.\r\n   */\r\n  private calcRowIndex(sum: number): number {\r\n    if (!this.treeArray.length) return 0;\r\n\r\n    let pos = -1;\r\n    const dataLength = this.treeArray.length;\r\n\r\n    // Get the highest bit for the block size.\r\n    const highestBit = Math.pow(2, dataLength.toString(2).length - 1);\r\n\r\n    for (let blockSize = highestBit; blockSize !== 0; blockSize >>= 1) {\r\n      const nextPos = pos + blockSize;\r\n      if (nextPos < dataLength && sum >= this.treeArray[nextPos]) {\r\n        sum -= this.treeArray[nextPos];\r\n        pos = nextPos;\r\n      }\r\n    }\r\n\r\n    return pos + 1;\r\n  }\r\n}\r\n","import {\n  Component,\n  Output,\n  EventEmitter,\n  Input,\n  HostBinding,\n  ChangeDetectorRef,\n  ViewChild,\n  OnInit,\n  OnDestroy,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { ScrollerComponent } from './scroller.component';\nimport { MouseEvent } from '../../events';\nimport { SelectionType } from '../../types/selection.type';\nimport { columnsByPin, columnGroupWidths } from '../../utils/column';\nimport { RowHeightCache } from '../../utils/row-height-cache';\nimport { translateXY } from '../../utils/translate';\n\n@Component({\n  selector: 'datatable-body',\n  template: `\n    <datatable-selection\n      #selector\n      [selected]=\"selected\"\n      [rows]=\"rows\"\n      [selectCheck]=\"selectCheck\"\n      [selectEnabled]=\"selectEnabled\"\n      [selectionType]=\"selectionType\"\n      [rowIdentity]=\"rowIdentity\"\n      (select)=\"select.emit($event)\"\n      (activate)=\"activate.emit($event)\"\n    >\n      <datatable-progress *ngIf=\"loadingIndicator\"> </datatable-progress>\n      <datatable-scroller\n        *ngIf=\"rows?.length\"\n        [scrollbarV]=\"scrollbarV\"\n        [scrollbarH]=\"scrollbarH\"\n        [scrollHeight]=\"scrollHeight\"\n        [scrollWidth]=\"columnGroupWidths?.total\"\n        (scroll)=\"onBodyScroll($event)\"\n      >\n        <datatable-summary-row\n          *ngIf=\"summaryRow && summaryPosition === 'top'\"\n          [rowHeight]=\"summaryHeight\"\n          [offsetX]=\"offsetX\"\n          [innerWidth]=\"innerWidth\"\n          [rows]=\"rows\"\n          [columns]=\"columns\"\n        >\n        </datatable-summary-row>\n        <datatable-row-wrapper\n          [groupedRows]=\"groupedRows\"\n          *ngFor=\"let group of temp; let i = index; trackBy: rowTrackingFn\"\n          [innerWidth]=\"innerWidth\"\n          [ngStyle]=\"getRowsStyles(group)\"\n          [rowDetail]=\"rowDetail\"\n          [groupHeader]=\"groupHeader\"\n          [offsetX]=\"offsetX\"\n          [detailRowHeight]=\"getDetailRowHeight(group[i], i)\"\n          [row]=\"group\"\n          [expanded]=\"getRowExpanded(group)\"\n          [rowIndex]=\"getRowIndex(group[i])\"\n          (rowContextmenu)=\"rowContextmenu.emit($event)\"\n        >\n          <datatable-body-row\n            *ngIf=\"!groupedRows; else groupedRowsTemplate\"\n            tabindex=\"-1\"\n            [isSelected]=\"selector.getRowSelected(group)\"\n            [innerWidth]=\"innerWidth\"\n            [offsetX]=\"offsetX\"\n            [columns]=\"columns\"\n            [rowDetail]=\"rowDetail\"\n            [rowHeight]=\"getRowHeight(group)\"\n            [row]=\"group\"\n            [rowIndex]=\"getRowIndex(group)\"\n            [expanded]=\"getRowExpanded(group)\"\n            [rowClass]=\"rowClass\"\n            [displayCheck]=\"displayCheck\"\n            [treeStatus]=\"group.treeStatus\"\n            (treeAction)=\"onTreeAction(group)\"\n            (activate)=\"selector.onActivate($event, indexes.first + i)\"\n          >\n          </datatable-body-row>\n          <ng-template #groupedRowsTemplate>\n            <datatable-body-row\n              *ngFor=\"let row of group.value; let i = index; trackBy: rowTrackingFn\"\n              tabindex=\"-1\"\n              [isSelected]=\"selector.getRowSelected(row)\"\n              [innerWidth]=\"innerWidth\"\n              [offsetX]=\"offsetX\"\n              [columns]=\"columns\"\n              [rowHeight]=\"getRowHeight(row)\"\n              [row]=\"row\"\n              [group]=\"group.value\"\n              [rowIndex]=\"getRowIndex(row)\"\n              [expanded]=\"getRowExpanded(row)\"\n              [rowClass]=\"rowClass\"\n              (activate)=\"selector.onActivate($event, i)\"\n            >\n            </datatable-body-row>\n          </ng-template>\n        </datatable-row-wrapper>\n        <datatable-summary-row\n          *ngIf=\"summaryRow && summaryPosition === 'bottom'\"\n          [ngStyle]=\"getBottomSummaryRowStyles()\"\n          [rowHeight]=\"summaryHeight\"\n          [offsetX]=\"offsetX\"\n          [innerWidth]=\"innerWidth\"\n          [rows]=\"rows\"\n          [columns]=\"columns\"\n        >\n        </datatable-summary-row>\n      </datatable-scroller>\n      <div class=\"empty-row\" *ngIf=\"!rows?.length && !loadingIndicator\" [innerHTML]=\"emptyMessage\"></div>\n    </datatable-selection>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    class: 'datatable-body'\n  }\n})\nexport class DataTableBodyComponent implements OnInit, OnDestroy {\n  @Input() scrollbarV: boolean;\n  @Input() scrollbarH: boolean;\n  @Input() loadingIndicator: boolean;\n  @Input() externalPaging: boolean;\n  @Input() rowHeight: number | 'auto' | ((row?: any) => number);\n  @Input() offsetX: number;\n  @Input() emptyMessage: string;\n  @Input() selectionType: SelectionType;\n  @Input() selected: any[] = [];\n  @Input() rowIdentity: any;\n  @Input() rowDetail: any;\n  @Input() groupHeader: any;\n  @Input() selectCheck: any;\n  @Input() displayCheck: any;\n  @Input() trackByProp: string;\n  @Input() rowClass: any;\n  @Input() groupedRows: any;\n  @Input() groupExpansionDefault: boolean;\n  @Input() innerWidth: number;\n  @Input() groupRowsBy: string;\n  @Input() virtualization: boolean;\n  @Input() summaryRow: boolean;\n  @Input() summaryPosition: string;\n  @Input() summaryHeight: number;\n\n  @Input() set pageSize(val: number) {\n    this._pageSize = val;\n    this.recalcLayout();\n  }\n\n  get pageSize(): number {\n    return this._pageSize;\n  }\n\n  @Input() set rows(val: any[]) {\n    this._rows = val;\n    this.recalcLayout();\n  }\n\n  get rows(): any[] {\n    return this._rows;\n  }\n\n  @Input() set columns(val: any[]) {\n    this._columns = val;\n    const colsByPin = columnsByPin(val);\n    this.columnGroupWidths = columnGroupWidths(colsByPin, val);\n  }\n\n  get columns(): any[] {\n    return this._columns;\n  }\n\n  @Input() set offset(val: number) {\n    this._offset = val;\n    this.recalcLayout();\n  }\n\n  get offset(): number {\n    return this._offset;\n  }\n\n  @Input() set rowCount(val: number) {\n    this._rowCount = val;\n    this.recalcLayout();\n  }\n\n  get rowCount(): number {\n    return this._rowCount;\n  }\n\n  @HostBinding('style.width')\n  get bodyWidth(): string {\n    if (this.scrollbarH) {\n      return this.innerWidth + 'px';\n    } else {\n      return '100%';\n    }\n  }\n\n  @Input()\n  @HostBinding('style.height')\n  set bodyHeight(val) {\n    if (this.scrollbarV) {\n      this._bodyHeight = val + 'px';\n    } else {\n      this._bodyHeight = 'auto';\n    }\n\n    this.recalcLayout();\n  }\n\n  get bodyHeight() {\n    return this._bodyHeight;\n  }\n\n  @Output() scroll: EventEmitter<any> = new EventEmitter();\n  @Output() page: EventEmitter<any> = new EventEmitter();\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n  @Output() select: EventEmitter<any> = new EventEmitter();\n  @Output() detailToggle: EventEmitter<any> = new EventEmitter();\n  @Output() rowContextmenu = new EventEmitter<{ event: MouseEvent; row: any }>(false);\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\n\n  @ViewChild(ScrollerComponent, { static: false }) scroller: ScrollerComponent;\n\n  /**\n   * Returns if selection is enabled.\n   */\n  get selectEnabled(): boolean {\n    return !!this.selectionType;\n  }\n\n  /**\n   * Property that would calculate the height of scroll bar\n   * based on the row heights cache for virtual scroll and virtualization. Other scenarios\n   * calculate scroll height automatically (as height will be undefined).\n   */\n  get scrollHeight(): number | undefined {\n    if (this.scrollbarV && this.virtualization && this.rowCount) {\n      return this.rowHeightsCache.query(this.rowCount - 1);\n    }\n    // avoid TS7030: Not all code paths return a value.\n    return undefined;\n  }\n\n  rowHeightsCache: RowHeightCache = new RowHeightCache();\n  temp: any[] = [];\n  offsetY = 0;\n  indexes: any = {};\n  columnGroupWidths: any;\n  columnGroupWidthsWithoutGroup: any;\n  rowTrackingFn: any;\n  listener: any;\n  rowIndexes: any = new Map();\n  rowExpansions: any[] = [];\n\n  _rows: any[];\n  _bodyHeight: any;\n  _columns: any[];\n  _rowCount: number;\n  _offset: number;\n  _pageSize: number;\n\n  /**\n   * Creates an instance of DataTableBodyComponent.\n   */\n  constructor(private cd: ChangeDetectorRef) {\n    // declare fn here so we can get access to the `this` property\n    this.rowTrackingFn = (index: number, row: any): any => {\n      const idx = this.getRowIndex(row);\n      if (this.trackByProp) {\n        return row[this.trackByProp];\n      } else {\n        return idx;\n      }\n    };\n  }\n\n  /**\n   * Called after the constructor, initializing input properties\n   */\n  ngOnInit(): void {\n    if (this.rowDetail) {\n      this.listener = this.rowDetail.toggle.subscribe(({ type, value }: { type: string; value: any }) => {\n        if (type === 'row') {\n          this.toggleRowExpansion(value);\n        }\n        if (type === 'all') {\n          this.toggleAllRows(value);\n        }\n\n        // Refresh rows after toggle\n        // Fixes #883\n        this.updateIndexes();\n        this.updateRows();\n        this.cd.markForCheck();\n      });\n    }\n\n    if (this.groupHeader) {\n      this.listener = this.groupHeader.toggle.subscribe(({ type, value }: { type: string; value: any }) => {\n        if (type === 'group') {\n          this.toggleRowExpansion(value);\n        }\n        if (type === 'all') {\n          this.toggleAllRows(value);\n        }\n\n        // Refresh rows after toggle\n        // Fixes #883\n        this.updateIndexes();\n        this.updateRows();\n        this.cd.markForCheck();\n      });\n    }\n  }\n\n  /**\n   * Called once, before the instance is destroyed.\n   */\n  ngOnDestroy(): void {\n    if ((this.rowDetail || this.groupHeader) && this.listener) {\n      this.listener.unsubscribe();\n    }\n  }\n\n  /**\n   * Updates the Y offset given a new offset.\n   */\n  updateOffsetY(offset?: number): void {\n    // scroller is missing on empty table\n    if (!this.scroller) {\n      return;\n    }\n\n    if (this.scrollbarV && this.virtualization && offset) {\n      // First get the row Index that we need to move to.\n      const rowIndex = this.pageSize * offset;\n      offset = this.rowHeightsCache.query(rowIndex - 1);\n    } else if (this.scrollbarV && !this.virtualization) {\n      offset = 0;\n    }\n\n    this.scroller.setOffset(offset || 0);\n  }\n\n  /**\n   * Body was scrolled, this is mainly useful for\n   * when a user is server-side pagination via virtual scroll.\n   */\n  onBodyScroll(event: any): void {\n    const scrollYPos: number = event.scrollYPos;\n    const scrollXPos: number = event.scrollXPos;\n\n    // if scroll change, trigger update\n    // this is mainly used for header cell positions\n    if (this.offsetY !== scrollYPos || this.offsetX !== scrollXPos) {\n      this.scroll.emit({\n        offsetY: scrollYPos,\n        offsetX: scrollXPos\n      });\n    }\n\n    this.offsetY = scrollYPos;\n    this.offsetX = scrollXPos;\n\n    this.updateIndexes();\n    this.updatePage(event.direction);\n    this.updateRows();\n  }\n\n  /**\n   * Updates the page given a direction.\n   */\n  updatePage(direction: string): void {\n    let offset = this.indexes.first / this.pageSize;\n\n    if (direction === 'up') {\n      offset = Math.ceil(offset);\n    } else if (direction === 'down') {\n      offset = Math.floor(offset);\n    }\n\n    if (direction !== undefined && !isNaN(offset)) {\n      this.page.emit({ offset });\n    }\n  }\n\n  /**\n   * Updates the rows in the view port\n   */\n  updateRows(): void {\n    const { first, last } = this.indexes;\n    let rowIndex = first;\n    let idx = 0;\n    const temp: any[] = [];\n\n    this.rowIndexes.clear();\n\n    // if grouprowsby has been specified treat row paging\n    // parameters as group paging parameters ie if limit 10 has been\n    // specified treat it as 10 groups rather than 10 rows\n    if (this.groupedRows) {\n      let maxRowsPerGroup = 3;\n      // if there is only one group set the maximum number of\n      // rows per group the same as the total number of rows\n      if (this.groupedRows.length === 1) {\n        maxRowsPerGroup = this.groupedRows[0].value.length;\n      }\n\n      while (rowIndex < last && rowIndex < this.groupedRows.length) {\n        // Add the groups into this page\n        const group = this.groupedRows[rowIndex];\n        temp[idx] = group;\n        idx++;\n\n        // Group index in this context\n        rowIndex++;\n      }\n    } else {\n      while (rowIndex < last && rowIndex < this.rowCount) {\n        const row = this.rows[rowIndex];\n\n        if (row) {\n          this.rowIndexes.set(row, rowIndex);\n          temp[idx] = row;\n        }\n\n        idx++;\n        rowIndex++;\n      }\n    }\n\n    this.temp = temp;\n  }\n\n  /**\n   * Get the row height\n   */\n  getRowHeight(row: any): number {\n    // if its a function return it\n    if (typeof this.rowHeight === 'function') {\n      return this.rowHeight(row);\n    }\n\n    return this.rowHeight as number;\n  }\n\n  /**\n   * @param group the group with all rows\n   */\n  getGroupHeight(group: any): number {\n    let rowHeight = 0;\n\n    if (group.value) {\n      for (let index = 0; index < group.value.length; index++) {\n        rowHeight += this.getRowAndDetailHeight(group.value[index]);\n      }\n    }\n\n    return rowHeight;\n  }\n\n  /**\n   * Calculate row height based on the expanded state of the row.\n   */\n  getRowAndDetailHeight(row: any): number {\n    let rowHeight = this.getRowHeight(row);\n    const expanded = this.getRowExpanded(row);\n\n    // Adding detail row height if its expanded.\n    if (expanded) {\n      rowHeight += this.getDetailRowHeight(row);\n    }\n\n    return rowHeight;\n  }\n\n  /**\n   * Get the height of the detail row.\n   */\n  getDetailRowHeight = (row?: any, index?: any): number => {\n    if (!this.rowDetail) {\n      return 0;\n    }\n    const rowHeight = this.rowDetail.rowHeight;\n    return typeof rowHeight === 'function' ? rowHeight(row, index) : (rowHeight as number);\n  };\n\n  /**\n   * Calculates the styles for the row so that the rows can be moved in 2D space\n   * during virtual scroll inside the DOM.   In the below case the Y position is\n   * manipulated.   As an example, if the height of row 0 is 30 px and row 1 is\n   * 100 px then following styles are generated:\n   *\n   * transform: translate3d(0px, 0px, 0px);    ->  row0\n   * transform: translate3d(0px, 30px, 0px);   ->  row1\n   * transform: translate3d(0px, 130px, 0px);  ->  row2\n   *\n   * Row heights have to be calculated based on the row heights cache as we wont\n   * be able to determine which row is of what height before hand.  In the above\n   * case the positionY of the translate3d for row2 would be the sum of all the\n   * heights of the rows before it (i.e. row0 and row1).\n   *\n   * @param rows the row that needs to be placed in the 2D space.\n   * @returns the CSS3 style to be applied\n   *\n   * @memberOf DataTableBodyComponent\n   */\n  getRowsStyles(rows: any): any {\n    const styles: any = {};\n\n    // only add styles for the group if there is a group\n    if (this.groupedRows) {\n      styles.width = this.columnGroupWidths.total;\n    }\n\n    if (this.scrollbarV && this.virtualization) {\n      let idx = 0;\n\n      if (this.groupedRows) {\n        // Get the latest row rowindex in a group\n        const row = rows[rows.length - 1];\n        idx = row ? this.getRowIndex(row) : 0;\n      } else {\n        idx = this.getRowIndex(rows);\n      }\n\n      // const pos = idx * rowHeight;\n      // The position of this row would be the sum of all row heights\n      // until the previous row position.\n      const pos = this.rowHeightsCache.query(idx - 1);\n\n      translateXY(styles, 0, pos);\n    }\n\n    return styles;\n  }\n\n  /**\n   * Calculate bottom summary row offset for scrollbar mode.\n   * For more information about cache and offset calculation\n   * see description for `getRowsStyles` method\n   *\n   * @returns the CSS3 style to be applied\n   *\n   * @memberOf DataTableBodyComponent\n   */\n  getBottomSummaryRowStyles(): any {\n    if (!this.scrollbarV || !this.rows || !this.rows.length) {\n      return null;\n    }\n\n    const styles = { position: 'absolute' };\n    const pos = this.rowHeightsCache.query(this.rows.length - 1);\n\n    translateXY(styles, 0, pos);\n\n    return styles;\n  }\n\n  /**\n   * Hides the loading indicator\n   */\n  hideIndicator(): void {\n    setTimeout(() => (this.loadingIndicator = false), 500);\n  }\n\n  /**\n   * Updates the index of the rows in the viewport\n   */\n  updateIndexes(): void {\n    let first = 0;\n    let last = 0;\n\n    if (this.scrollbarV) {\n      if (this.virtualization) {\n        // Calculation of the first and last indexes will be based on where the\n        // scrollY position would be at.  The last index would be the one\n        // that shows up inside the view port the last.\n        const height = parseInt(this.bodyHeight, 0);\n        first = this.rowHeightsCache.getRowIndex(this.offsetY);\n        last = this.rowHeightsCache.getRowIndex(height + this.offsetY) + 1;\n      } else {\n        // If virtual rows are not needed\n        // We render all in one go\n        first = 0;\n        last = this.rowCount;\n      }\n    } else {\n      // The server is handling paging and will pass an array that begins with the\n      // element at a specified offset.  first should always be 0 with external paging.\n      if (!this.externalPaging) {\n        first = Math.max(this.offset * this.pageSize, 0);\n      }\n      last = Math.min(first + this.pageSize, this.rowCount);\n    }\n\n    this.indexes = { first, last };\n  }\n\n  /**\n   * Refreshes the full Row Height cache.  Should be used\n   * when the entire row array state has changed.\n   */\n  refreshRowHeightCache(): void {\n    if (!this.scrollbarV || (this.scrollbarV && !this.virtualization)) {\n      return;\n    }\n\n    // clear the previous row height cache if already present.\n    // this is useful during sorts, filters where the state of the\n    // rows array is changed.\n    this.rowHeightsCache.clearCache();\n\n    // Initialize the tree only if there are rows inside the tree.\n    if (this.rows && this.rows.length) {\n      const rowExpansions = new Set();\n      for (const row of this.rows) {\n        if (this.getRowExpanded(row)) {\n          rowExpansions.add(row);\n        }\n      }\n\n      this.rowHeightsCache.initCache({\n        rows: this.rows,\n        rowHeight: this.rowHeight,\n        detailRowHeight: this.getDetailRowHeight,\n        externalVirtual: this.scrollbarV && this.externalPaging,\n        rowCount: this.rowCount,\n        rowIndexes: this.rowIndexes,\n        rowExpansions\n      });\n    }\n  }\n\n  /**\n   * Gets the index for the view port\n   */\n  getAdjustedViewPortIndex(): number {\n    // Capture the row index of the first row that is visible on the viewport.\n    // If the scroll bar is just below the row which is highlighted then make that as the\n    // first index.\n    const viewPortFirstRowIndex = this.indexes.first;\n\n    if (this.scrollbarV && this.virtualization) {\n      const offsetScroll = this.rowHeightsCache.query(viewPortFirstRowIndex - 1);\n      return offsetScroll <= this.offsetY ? viewPortFirstRowIndex - 1 : viewPortFirstRowIndex;\n    }\n\n    return viewPortFirstRowIndex;\n  }\n\n  /**\n   * Toggle the Expansion of the row i.e. if the row is expanded then it will\n   * collapse and vice versa.   Note that the expanded status is stored as\n   * a part of the row object itself as we have to preserve the expanded row\n   * status in case of sorting and filtering of the row set.\n   */\n  toggleRowExpansion(row: any): void {\n    // Capture the row index of the first row that is visible on the viewport.\n    const viewPortFirstRowIndex = this.getAdjustedViewPortIndex();\n    const rowExpandedIdx = this.getRowExpandedIdx(row, this.rowExpansions);\n    const expanded = rowExpandedIdx > -1;\n\n    // If the detailRowHeight is auto --> only in case of non-virtualized scroll\n    if (this.scrollbarV && this.virtualization) {\n      const detailRowHeight = this.getDetailRowHeight(row) * (expanded ? -1 : 1);\n      // const idx = this.rowIndexes.get(row) || 0;\n      const idx = this.getRowIndex(row);\n      this.rowHeightsCache.update(idx, detailRowHeight);\n    }\n\n    // Update the toggled row and update thive nevere heights in the cache.\n    if (expanded) {\n      this.rowExpansions.splice(rowExpandedIdx, 1);\n    } else {\n      this.rowExpansions.push(row);\n    }\n\n    this.detailToggle.emit({\n      rows: [row],\n      currentIndex: viewPortFirstRowIndex\n    });\n  }\n\n  /**\n   * Expand/Collapse all the rows no matter what their state is.\n   */\n  toggleAllRows(expanded: boolean): void {\n    // clear prev expansions\n    this.rowExpansions = [];\n\n    // Capture the row index of the first row that is visible on the viewport.\n    const viewPortFirstRowIndex = this.getAdjustedViewPortIndex();\n\n    if (expanded) {\n      for (const row of this.rows) {\n        this.rowExpansions.push(row);\n      }\n    }\n\n    if (this.scrollbarV) {\n      // Refresh the full row heights cache since every row was affected.\n      this.recalcLayout();\n    }\n\n    // Emit all rows that have been expanded.\n    this.detailToggle.emit({\n      rows: this.rows,\n      currentIndex: viewPortFirstRowIndex\n    });\n  }\n\n  /**\n   * Recalculates the table\n   */\n  recalcLayout(): void {\n    this.refreshRowHeightCache();\n    this.updateIndexes();\n    this.updateRows();\n  }\n\n  /**\n   * Tracks the column\n   */\n  columnTrackingFn(index: number, column: any): any {\n    return column.$$id;\n  }\n\n  /**\n   * Gets the row pinning group styles\n   */\n  stylesByGroup(group: string) {\n    const widths = this.columnGroupWidths;\n    const offsetX = this.offsetX;\n\n    const styles = {\n      width: `${widths[group]}px`\n    };\n\n    if (group === 'left') {\n      translateXY(styles, offsetX, 0);\n    } else if (group === 'right') {\n      const bodyWidth = parseInt(this.innerWidth + '', 0);\n      const totalDiff = widths.total - bodyWidth;\n      const offsetDiff = totalDiff - offsetX;\n      const offset = offsetDiff * -1;\n      translateXY(styles, offset, 0);\n    }\n\n    return styles;\n  }\n\n  /**\n   * Returns if the row was expanded and set default row expansion when row expansion is empty\n   */\n  getRowExpanded(row: any): boolean {\n    if (this.rowExpansions.length === 0 && this.groupExpansionDefault) {\n      for (const group of this.groupedRows) {\n        this.rowExpansions.push(group);\n      }\n    }\n\n    return this.getRowExpandedIdx(row, this.rowExpansions) > -1;\n  }\n\n  getRowExpandedIdx(row: any, expanded: any[]): number {\n    if (!expanded || !expanded.length) return -1;\n\n    const rowId = this.rowIdentity(row);\n    return expanded.findIndex(r => {\n      const id = this.rowIdentity(r);\n      return id === rowId;\n    });\n  }\n\n  /**\n   * Gets the row index given a row\n   */\n  getRowIndex(row: any): number {\n    return this.rowIndexes.get(row) || 0;\n  }\n\n  onTreeAction(row: any) {\n    this.treeAction.emit({ row });\n  }\n}\n","import { Input, Output, EventEmitter, Directive, TemplateRef, ContentChild } from '@angular/core';\r\nimport { DataTableFooterTemplateDirective } from './footer-template.directive';\r\n\r\n@Directive({ selector: 'ngx-datatable-footer' })\r\nexport class DatatableFooterDirective {\r\n  @Input() footerHeight: number;\r\n  @Input() totalMessage: string;\r\n  @Input() selectedMessage: string | boolean;\r\n  @Input() pagerLeftArrowIcon: string;\r\n  @Input() pagerRightArrowIcon: string;\r\n  @Input() pagerPreviousIcon: string;\r\n  @Input() pagerNextIcon: string;\r\n\r\n  @Input('template')\r\n  _templateInput: TemplateRef<any>;\r\n\r\n  @ContentChild(DataTableFooterTemplateDirective, { read: TemplateRef, static: false })\r\n  _templateQuery: TemplateRef<any>;\r\n\r\n  get template(): TemplateRef<any> {\r\n    return this._templateInput || this._templateQuery;\r\n  }\r\n}\r\n","import { Component, Output, EventEmitter, ChangeDetectionStrategy, Input, TemplateRef } from '@angular/core';\r\nimport { DatatableFooterDirective } from './footer.directive';\r\n@Component({\r\n  selector: 'datatable-footer',\r\n  template: `\r\n    <div\r\n      class=\"datatable-footer-inner\"\r\n      [ngClass]=\"{ 'selected-count': selectedMessage }\"\r\n      [style.height.px]=\"footerHeight\"\r\n    >\r\n      <ng-template\r\n        *ngIf=\"footerTemplate\"\r\n        [ngTemplateOutlet]=\"footerTemplate.template\"\r\n        [ngTemplateOutletContext]=\"{\r\n          rowCount: rowCount,\r\n          pageSize: pageSize,\r\n          selectedCount: selectedCount,\r\n          curPage: curPage,\r\n          offset: offset\r\n        }\"\r\n      >\r\n      </ng-template>\r\n      <div class=\"page-count\" *ngIf=\"!footerTemplate\">\r\n        <span *ngIf=\"selectedMessage\"> {{ selectedCount?.toLocaleString() }} {{ selectedMessage }} / </span>\r\n        {{ rowCount?.toLocaleString() }} {{ totalMessage }}\r\n      </div>\r\n      <datatable-pager\r\n        *ngIf=\"!footerTemplate\"\r\n        [pagerLeftArrowIcon]=\"pagerLeftArrowIcon\"\r\n        [pagerRightArrowIcon]=\"pagerRightArrowIcon\"\r\n        [pagerPreviousIcon]=\"pagerPreviousIcon\"\r\n        [pagerNextIcon]=\"pagerNextIcon\"\r\n        [page]=\"curPage\"\r\n        [size]=\"pageSize\"\r\n        [count]=\"rowCount\"\r\n        [hidden]=\"!isVisible\"\r\n        (change)=\"page.emit($event)\"\r\n      >\r\n      </datatable-pager>\r\n    </div>\r\n  `,\r\n  host: {\r\n    class: 'datatable-footer'\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataTableFooterComponent {\r\n  @Input() footerHeight: number;\r\n  @Input() rowCount: number;\r\n  @Input() pageSize: number;\r\n  @Input() offset: number;\r\n  @Input() pagerLeftArrowIcon: string;\r\n  @Input() pagerRightArrowIcon: string;\r\n  @Input() pagerPreviousIcon: string;\r\n  @Input() pagerNextIcon: string;\r\n  @Input() totalMessage: string;\r\n  @Input() footerTemplate: DatatableFooterDirective;\r\n\r\n  @Input() selectedCount: number = 0;\r\n  @Input() selectedMessage: string | boolean;\r\n\r\n  @Output() page: EventEmitter<any> = new EventEmitter();\r\n\r\n  get isVisible(): boolean {\r\n    return this.rowCount / this.pageSize > 1;\r\n  }\r\n\r\n  get curPage(): number {\r\n    return this.offset + 1;\r\n  }\r\n}\r\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'datatable-pager',\r\n  template: `\r\n    <ul class=\"pager\">\r\n      <li [class.disabled]=\"!canPrevious()\">\r\n        <a role=\"button\" aria-label=\"go to first page\" href=\"javascript:void(0)\" (click)=\"selectPage(1)\">\r\n          <i class=\"{{ pagerPreviousIcon }}\"></i>\r\n        </a>\r\n      </li>\r\n      <li [class.disabled]=\"!canPrevious()\">\r\n        <a role=\"button\" aria-label=\"go to previous page\" href=\"javascript:void(0)\" (click)=\"prevPage()\">\r\n          <i class=\"{{ pagerLeftArrowIcon }}\"></i>\r\n        </a>\r\n      </li>\r\n      <li\r\n        role=\"button\"\r\n        [attr.aria-label]=\"'page ' + pg.number\"\r\n        class=\"pages\"\r\n        *ngFor=\"let pg of pages\"\r\n        [class.active]=\"pg.number === page\"\r\n      >\r\n        <a href=\"javascript:void(0)\" (click)=\"selectPage(pg.number)\">\r\n          {{ pg.text }}\r\n        </a>\r\n      </li>\r\n      <li [class.disabled]=\"!canNext()\">\r\n        <a role=\"button\" aria-label=\"go to next page\" href=\"javascript:void(0)\" (click)=\"nextPage()\">\r\n          <i class=\"{{ pagerRightArrowIcon }}\"></i>\r\n        </a>\r\n      </li>\r\n      <li [class.disabled]=\"!canNext()\">\r\n        <a role=\"button\" aria-label=\"go to last page\" href=\"javascript:void(0)\" (click)=\"selectPage(totalPages)\">\r\n          <i class=\"{{ pagerNextIcon }}\"></i>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  `,\r\n  host: {\r\n    class: 'datatable-pager'\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataTablePagerComponent {\r\n  @Input() pagerLeftArrowIcon: string;\r\n  @Input() pagerRightArrowIcon: string;\r\n  @Input() pagerPreviousIcon: string;\r\n  @Input() pagerNextIcon: string;\r\n\r\n  @Input()\r\n  set size(val: number) {\r\n    this._size = val;\r\n    this.pages = this.calcPages();\r\n  }\r\n\r\n  get size(): number {\r\n    return this._size;\r\n  }\r\n\r\n  @Input()\r\n  set count(val: number) {\r\n    this._count = val;\r\n    this.pages = this.calcPages();\r\n  }\r\n\r\n  get count(): number {\r\n    return this._count;\r\n  }\r\n\r\n  @Input()\r\n  set page(val: number) {\r\n    this._page = val;\r\n    this.pages = this.calcPages();\r\n  }\r\n\r\n  get page(): number {\r\n    return this._page;\r\n  }\r\n\r\n  get totalPages(): number {\r\n    const count = this.size < 1 ? 1 : Math.ceil(this.count / this.size);\r\n    return Math.max(count || 0, 1);\r\n  }\r\n\r\n  @Output() change: EventEmitter<any> = new EventEmitter();\r\n\r\n  _count: number = 0;\r\n  _page: number = 1;\r\n  _size: number = 0;\r\n  pages: any;\r\n\r\n  canPrevious(): boolean {\r\n    return this.page > 1;\r\n  }\r\n\r\n  canNext(): boolean {\r\n    return this.page < this.totalPages;\r\n  }\r\n\r\n  prevPage(): void {\r\n    this.selectPage(this.page - 1);\r\n  }\r\n\r\n  nextPage(): void {\r\n    this.selectPage(this.page + 1);\r\n  }\r\n\r\n  selectPage(page: number): void {\r\n    if (page > 0 && page <= this.totalPages && page !== this.page) {\r\n      this.page = page;\r\n\r\n      this.change.emit({\r\n        page\r\n      });\r\n    }\r\n  }\r\n\r\n  calcPages(page?: number): any[] {\r\n    const pages = [];\r\n    let startPage = 1;\r\n    let endPage = this.totalPages;\r\n    const maxSize = 5;\r\n    const isMaxSized = maxSize < this.totalPages;\r\n\r\n    page = page || this.page;\r\n\r\n    if (isMaxSized) {\r\n      startPage = page - Math.floor(maxSize / 2);\r\n      endPage = page + Math.floor(maxSize / 2);\r\n\r\n      if (startPage < 1) {\r\n        startPage = 1;\r\n        endPage = Math.min(startPage + maxSize - 1, this.totalPages);\r\n      } else if (endPage > this.totalPages) {\r\n        startPage = Math.max(this.totalPages - maxSize + 1, 1);\r\n        endPage = this.totalPages;\r\n      }\r\n    }\r\n\r\n    for (let num = startPage; num <= endPage; num++) {\r\n      pages.push({\r\n        number: num,\r\n        text: <string>(<any>num)\r\n      });\r\n    }\r\n\r\n    return pages;\r\n  }\r\n}\r\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'datatable-progress',\r\n  template: `\r\n    <div class=\"progress-linear\" role=\"progressbar\">\r\n      <div class=\"container\">\r\n        <div class=\"bar\"></div>\r\n      </div>\r\n    </div>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ProgressBarComponent {}\r\n","export enum Keys {\r\n  up = 38,\r\n  down = 40,\r\n  return = 13,\r\n  escape = 27,\r\n  left = 37,\r\n  right = 39\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  HostBinding,\r\n  ElementRef,\r\n  Output,\r\n  KeyValueDiffers,\r\n  KeyValueDiffer,\r\n  EventEmitter,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  DoCheck,\r\n  SkipSelf\r\n} from '@angular/core';\r\n\r\nimport { TreeStatus } from './body-cell.component';\r\nimport { columnsByPin, columnGroupWidths, columnsByPinArr } from '../../utils/column';\r\nimport { Keys } from '../../utils/keys';\r\nimport { ScrollbarHelper } from '../../services/scrollbar-helper.service';\r\nimport { translateXY } from '../../utils/translate';\r\nimport { style } from '@angular/animations';\r\n\r\n@Component({\r\n  selector: 'datatable-body-row',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <div\r\n      *ngFor=\"let colGroup of _columnsByPin; let i = index; trackBy: trackByGroups\"\r\n      class=\"datatable-row-{{ colGroup.type }} datatable-row-group\"\r\n      [ngStyle]=\"_groupStyles[colGroup.type]\"\r\n    >\r\n      <datatable-body-cell\r\n        *ngFor=\"let column of colGroup.columns; let ii = index; trackBy: columnTrackingFn\"\r\n        tabindex=\"-1\"\r\n        [row]=\"row\"\r\n        [group]=\"group\"\r\n        [rowDetail]=\"rowDetail\"\r\n        [expanded]=\"expanded\"\r\n        [isSelected]=\"isSelected\"\r\n        [rowIndex]=\"rowIndex\"\r\n        [column]=\"column\"\r\n        [rowHeight]=\"rowHeight\"\r\n        [displayCheck]=\"displayCheck\"\r\n        [treeStatus]=\"treeStatus\"\r\n        (activate)=\"onActivate($event, ii)\"\r\n        (treeAction)=\"onTreeAction()\"\r\n      >\r\n      </datatable-body-cell>\r\n    </div>\r\n  `\r\n})\r\nexport class DataTableBodyRowComponent implements DoCheck {\r\n  @Input() set columns(val: any[]) {\r\n    this._columns = val;\r\n    this.recalculateColumns(val);\r\n    this.buildStylesByGroup();\r\n  }\r\n\r\n  get columns(): any[] {\r\n    return this._columns;\r\n  }\r\n\r\n  @Input() set innerWidth(val: number) {\r\n    if (this._columns) {\r\n      const colByPin = columnsByPin(this._columns);\r\n      this._columnGroupWidths = columnGroupWidths(colByPin, this._columns);\r\n    }\r\n\r\n    this._innerWidth = val;\r\n    this.recalculateColumns();\r\n    this.buildStylesByGroup();\r\n  }\r\n\r\n  get innerWidth(): number {\r\n    return this._innerWidth;\r\n  }\r\n\r\n  @Input() expanded: boolean;\r\n  @Input() rowClass: any;\r\n  @Input() row: any;\r\n  @Input() group: any;\r\n  @Input() isSelected: boolean;\r\n  @Input() rowIndex: number;\r\n  @Input() displayCheck: any;\r\n  @Input() treeStatus: TreeStatus = 'collapsed';\r\n  @Input() rowDetail: any;\r\n\r\n  @Input()\r\n  set offsetX(val: number) {\r\n    this._offsetX = val;\r\n    this.buildStylesByGroup();\r\n  }\r\n  get offsetX() {\r\n    return this._offsetX;\r\n  }\r\n\r\n  @HostBinding('class')\r\n  get cssClass() {\r\n    let cls = 'datatable-body-row';\r\n    if (this.isSelected) {\r\n      cls += ' active';\r\n    }\r\n    if (this.rowIndex % 2 !== 0) {\r\n      cls += ' datatable-row-odd';\r\n    }\r\n    if (this.rowIndex % 2 === 0) {\r\n      cls += ' datatable-row-even';\r\n    }\r\n\r\n    if (this.rowClass) {\r\n      const res = this.rowClass(this.row);\r\n      if (typeof res === 'string') {\r\n        cls += ` ${res}`;\r\n      } else if (typeof res === 'object') {\r\n        const keys = Object.keys(res);\r\n        for (const k of keys) {\r\n          if (res[k] === true) {\r\n            cls += ` ${k}`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return cls;\r\n  }\r\n\r\n  @HostBinding('style.height.px')\r\n  @Input()\r\n  rowHeight: number;\r\n\r\n  @HostBinding('style.width.px')\r\n  get columnsTotalWidths(): string {\r\n    return this._columnGroupWidths.total;\r\n  }\r\n\r\n  @Output() activate: EventEmitter<any> = new EventEmitter();\r\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\r\n\r\n  _element: any;\r\n  _columnGroupWidths: any;\r\n  _columnsByPin: any;\r\n  _offsetX: number;\r\n  _columns: any[];\r\n  _innerWidth: number;\r\n  _groupStyles: { [prop: string]: {} } = {\r\n    left: {},\r\n    center: {},\r\n    right: {}\r\n  };\r\n\r\n  private _rowDiffer: KeyValueDiffer<{}, {}>;\r\n\r\n  constructor(\r\n    private differs: KeyValueDiffers,\r\n    @SkipSelf() private scrollbarHelper: ScrollbarHelper,\r\n    private cd: ChangeDetectorRef,\r\n    element: ElementRef\r\n  ) {\r\n    this._element = element.nativeElement;\r\n    this._rowDiffer = differs.find({}).create();\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    if (this._rowDiffer.diff(this.row)) {\r\n      this.cd.markForCheck();\r\n    }\r\n  }\r\n\r\n  trackByGroups(index: number, colGroup: any): any {\r\n    return colGroup.type;\r\n  }\r\n\r\n  columnTrackingFn(index: number, column: any): any {\r\n    return column.$$id;\r\n  }\r\n\r\n  buildStylesByGroup() {\r\n    this._groupStyles.left = this.calcStylesByGroup('left');\r\n    this._groupStyles.center = this.calcStylesByGroup('center');\r\n    this._groupStyles.right = this.calcStylesByGroup('right');\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  calcStylesByGroup(group: string) {\r\n    const widths = this._columnGroupWidths;\r\n    const offsetX = this.offsetX;\r\n\r\n    const styles = {\r\n      width: `${widths[group]}px`\r\n    };\r\n\r\n    if (this.row && !!this.row.detail && group === 'left') {\r\n      styles.width = `100%`;\r\n    }\r\n\r\n    if (group === 'left') {\r\n      translateXY(styles, offsetX, 0);\r\n    } else if (group === 'right') {\r\n      const bodyWidth = parseInt(this.innerWidth + '', 0);\r\n      const totalDiff = widths.total - bodyWidth;\r\n      const offsetDiff = totalDiff - offsetX;\r\n      const offset = (offsetDiff + this.scrollbarHelper.width) * -1;\r\n      translateXY(styles, offset, 0);\r\n    }\r\n\r\n    return styles;\r\n  }\r\n\r\n  onActivate(event: any, index: number): void {\r\n    event.cellIndex = index;\r\n    event.rowElement = this._element;\r\n    this.activate.emit(event);\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeyDown(event: KeyboardEvent): void {\r\n    const keyCode = event.keyCode;\r\n    const isTargetRow = event.target === this._element;\r\n\r\n    const isAction =\r\n      keyCode === Keys.return ||\r\n      keyCode === Keys.down ||\r\n      keyCode === Keys.up ||\r\n      keyCode === Keys.left ||\r\n      keyCode === Keys.right;\r\n\r\n    if (isAction && isTargetRow) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.activate.emit({\r\n        type: 'keydown',\r\n        event,\r\n        row: this.row,\r\n        rowElement: this._element\r\n      });\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseenter', ['$event'])\r\n  onMouseenter(event: any): void {\r\n    this.activate.emit({\r\n      type: 'mouseenter',\r\n      event,\r\n      row: this.row,\r\n      rowElement: this._element\r\n    });\r\n  }\r\n\r\n  recalculateColumns(val: any[] = this.columns): void {\r\n    this._columns = val;\r\n    const colsByPin = columnsByPin(this._columns);\r\n    this._columnsByPin = columnsByPinArr(this._columns);\r\n    this._columnGroupWidths = columnGroupWidths(colsByPin, this._columns);\r\n  }\r\n\r\n  onTreeAction() {\r\n    this.treeAction.emit();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostListener,\r\n  DoCheck,\r\n  ChangeDetectionStrategy,\r\n  KeyValueDiffer,\r\n  ChangeDetectorRef,\r\n  KeyValueDiffers\r\n} from '@angular/core';\r\nimport { MouseEvent } from '../../events';\r\n\r\n@Component({\r\n  selector: 'datatable-row-wrapper',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <div *ngIf=\"groupHeader && groupHeader.template\" class=\"datatable-group-header\" [ngStyle]=\"getGroupHeaderStyle()\">\r\n      <ng-template\r\n        *ngIf=\"groupHeader && groupHeader.template\"\r\n        [ngTemplateOutlet]=\"groupHeader.template\"\r\n        [ngTemplateOutletContext]=\"groupContext\"\r\n      >\r\n      </ng-template>\r\n    </div>\r\n    <ng-content *ngIf=\"(groupHeader && groupHeader.template && expanded) || (!groupHeader || !groupHeader.template)\">\r\n    </ng-content>\r\n    <div\r\n      *ngIf=\"rowDetail && rowDetail.template && expanded\"\r\n      [style.height.px]=\"detailRowHeight\"\r\n      class=\"datatable-row-detail\"\r\n    >\r\n      <ng-template\r\n        *ngIf=\"rowDetail && rowDetail.template\"\r\n        [ngTemplateOutlet]=\"rowDetail.template\"\r\n        [ngTemplateOutletContext]=\"rowContext\"\r\n      >\r\n      </ng-template>\r\n    </div>\r\n  `,\r\n  host: {\r\n    class: 'datatable-row-wrapper'\r\n  }\r\n})\r\nexport class DataTableRowWrapperComponent implements DoCheck {\r\n  @Input() innerWidth: number;\r\n  @Input() rowDetail: any;\r\n  @Input() groupHeader: any;\r\n  @Input() offsetX: number;\r\n  @Input() detailRowHeight: any;\r\n  @Input() row: any;\r\n  @Input() groupedRows: any;\r\n  @Output() rowContextmenu = new EventEmitter<{ event: MouseEvent; row: any }>(false);\r\n\r\n  @Input() set rowIndex(val: number) {\r\n    this._rowIndex = val;\r\n    this.rowContext.rowIndex = val;\r\n    this.groupContext.rowIndex = val;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get rowIndex(): number {\r\n    return this._rowIndex;\r\n  }\r\n\r\n  @Input() set expanded(val: boolean) {\r\n    this._expanded = val;\r\n    this.groupContext.expanded = val;\r\n    this.rowContext.expanded = val;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get expanded(): boolean {\r\n    return this._expanded;\r\n  }\r\n\r\n  groupContext: any = {\r\n    group: this.row,\r\n    expanded: this.expanded,\r\n    rowIndex: this.rowIndex\r\n  };\r\n\r\n  rowContext: any = {\r\n    row: this.row,\r\n    expanded: this.expanded,\r\n    rowIndex: this.rowIndex\r\n  };\r\n\r\n  private rowDiffer: KeyValueDiffer<{}, {}>;\r\n  private _expanded: boolean = false;\r\n  private _rowIndex: number;\r\n\r\n  constructor(private cd: ChangeDetectorRef, private differs: KeyValueDiffers) {\r\n    this.rowDiffer = differs.find({}).create();\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    if (this.rowDiffer.diff(this.row)) {\r\n      this.rowContext.row = this.row;\r\n      this.groupContext.group = this.row;\r\n      this.cd.markForCheck();\r\n    }\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextmenu($event: MouseEvent): void {\r\n    this.rowContextmenu.emit({ event: $event, row: this.row });\r\n  }\r\n\r\n  getGroupHeaderStyle(): any {\r\n    const styles = {};\r\n\r\n    styles['transform'] = 'translate3d(' + this.offsetX + 'px, 0px, 0px)';\r\n    styles['backface-visibility'] = 'hidden';\r\n    styles['width'] = this.innerWidth;\r\n\r\n    return styles;\r\n  }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[ngx-datatable-row-detail-template]'\r\n})\r\nexport class DatatableRowDetailTemplateDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { Input, Output, EventEmitter, Directive, TemplateRef, ContentChild } from '@angular/core';\r\nimport { DatatableRowDetailTemplateDirective } from './row-detail-template.directive';\r\n\r\n@Directive({ selector: 'ngx-datatable-row-detail' })\r\nexport class DatatableRowDetailDirective {\r\n  /**\r\n   * The detail row height is required especially\r\n   * when virtual scroll is enabled.\r\n   */\r\n  @Input() rowHeight: number | ((row?: any, index?: number) => number) = 0;\r\n\r\n  @Input('template')\r\n  _templateInput: TemplateRef<any>;\r\n\r\n  @ContentChild(DatatableRowDetailTemplateDirective, { read: TemplateRef, static: true })\r\n  _templateQuery: TemplateRef<any>;\r\n\r\n  get template(): TemplateRef<any> {\r\n    return this._templateInput || this._templateQuery;\r\n  }\r\n\r\n  /**\r\n   * Row detail row visbility was toggled.\r\n   */\r\n  @Output() toggle: EventEmitter<any> = new EventEmitter();\r\n\r\n  /**\r\n   * Toggle the expansion of the row\r\n   */\r\n  toggleExpandRow(row: any): void {\r\n    this.toggle.emit({\r\n      type: 'row',\r\n      value: row\r\n    });\r\n  }\r\n\r\n  /**\r\n   * API method to expand all the rows.\r\n   */\r\n  expandAllRows(): void {\r\n    this.toggle.emit({\r\n      type: 'all',\r\n      value: true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * API method to collapse all the rows.\r\n   */\r\n  collapseAllRows(): void {\r\n    this.toggle.emit({\r\n      type: 'all',\r\n      value: false\r\n    });\r\n  }\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[ngx-datatable-group-header-template]'\r\n})\r\nexport class DatatableGroupHeaderTemplateDirective {\r\n  constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { Input, Output, EventEmitter, Directive, TemplateRef, ContentChild } from '@angular/core';\r\nimport { DatatableGroupHeaderTemplateDirective } from './body-group-header-template.directive';\r\n\r\n@Directive({ selector: 'ngx-datatable-group-header' })\r\nexport class DatatableGroupHeaderDirective {\r\n  /**\r\n   * Row height is required when virtual scroll is enabled.\r\n   */\r\n  @Input() rowHeight: number | ((group?: any, index?: number) => number) = 0;\r\n\r\n  @Input('template')\r\n  _templateInput: TemplateRef<any>;\r\n\r\n  @ContentChild(DatatableGroupHeaderTemplateDirective, { read: TemplateRef, static: true })\r\n  _templateQuery: TemplateRef<any>;\r\n\r\n  get template(): TemplateRef<any> {\r\n    return this._templateInput || this._templateQuery;\r\n  }\r\n\r\n  /**\r\n   * Track toggling of group visibility\r\n   */\r\n  @Output() toggle: EventEmitter<any> = new EventEmitter();\r\n\r\n  /**\r\n   * Toggle the expansion of a group\r\n   */\r\n  toggleExpandGroup(group: any): void {\r\n    this.toggle.emit({\r\n      type: 'group',\r\n      value: group\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Expand all groups\r\n   */\r\n  expandAllGroups(): void {\r\n    this.toggle.emit({\r\n      type: 'all',\r\n      value: true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Collapse all groups\r\n   */\r\n  collapseAllGroups(): void {\r\n    this.toggle.emit({\r\n      type: 'all',\r\n      value: false\r\n    });\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  PipeTransform,\r\n  HostBinding,\r\n  ViewChild,\r\n  ChangeDetectorRef,\r\n  Output,\r\n  EventEmitter,\r\n  HostListener,\r\n  ElementRef,\r\n  ViewContainerRef,\r\n  OnDestroy,\r\n  DoCheck,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { TableColumn } from '../../types/table-column.type';\r\nimport { MouseEvent, KeyboardEvent } from '../../events';\r\nimport { SortDirection } from '../../types/sort-direction.type';\r\nimport { Keys } from '../../utils/keys';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Observable, of } from 'rxjs';\r\n\r\nexport type TreeStatus = 'collapsed' | 'expanded' | 'loading' | 'disabled';\r\n\r\n@Component({\r\n  selector: 'datatable-body-cell',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <div\r\n      class=\"datatable-body-cell-label\"\r\n      style=\"display: flex; align-items:center; height: 100%;\"\r\n      [style.margin-left.px]=\"calcLeftMargin(column, row)\"\r\n    >\r\n      <a\r\n        *ngIf=\"column?.prop === 'ice-expandable' && row?.detail?.length > 0\"\r\n        href=\"javascript:void(0)\"\r\n        [class.datatable-icon-down]=\"!expanded\"\r\n        [class.datatable-icon-up]=\"expanded\"\r\n        style=\"font-size: 18px; display: flex; align-items: center;\"\r\n        title=\"Expand/Collapse Row\"\r\n        (click)=\"toggleExpandRow(row, $event)\"\r\n      >\r\n      </a>\r\n      <ng-container *ngIf=\"column?.prop !== 'ice-expandable'\">\r\n        <label\r\n          *ngIf=\"column.checkboxable && (!displayCheck || displayCheck(row, column, value))\"\r\n          class=\"datatable-checkbox\"\r\n        >\r\n          <input type=\"checkbox\" [checked]=\"isSelected\" (click)=\"onCheckboxChange($event)\" />\r\n        </label>\r\n        <ng-container *ngIf=\"column.isTreeColumn\">\r\n          <button\r\n            *ngIf=\"!column.treeToggleTemplate\"\r\n            class=\"datatable-tree-button\"\r\n            [disabled]=\"treeStatus === 'disabled'\"\r\n            (click)=\"onTreeAction()\"\r\n          >\r\n            <span>\r\n              <i *ngIf=\"treeStatus === 'loading'\" class=\"icon datatable-icon-collapse\"></i>\r\n              <i *ngIf=\"treeStatus === 'collapsed'\" class=\"icon datatable-icon-up\"></i>\r\n              <i *ngIf=\"treeStatus === 'expanded' || treeStatus === 'disabled'\" class=\"icon datatable-icon-down\"></i>\r\n            </span>\r\n          </button>\r\n          <ng-template\r\n            *ngIf=\"column.treeToggleTemplate\"\r\n            [ngTemplateOutlet]=\"column.treeToggleTemplate\"\r\n            [ngTemplateOutletContext]=\"{ cellContext: cellContext }\"\r\n          >\r\n          </ng-template>\r\n        </ng-container>\r\n\r\n        <div *ngIf=\"column.icons as icons\" style=\"display: flex; flex-direction: column; margin-right: 10px;\">\r\n          <mat-icon\r\n            *ngFor=\"let i of getIcons(row, icons)\"\r\n            [innerHTML]=\"i.icon\"\r\n            [matTooltip]=\"i.text\"\r\n            class=\"{{ i.class }} mat-icon material-icons ice-ml-10\"\r\n          ></mat-icon>\r\n        </div>\r\n\r\n        <mat-icon\r\n          *ngIf=\"\r\n            column.iconCustomTooltipHtmlText &&\r\n            column.prop &&\r\n            selectFieldValue(row, column.iconCustomTooltipHtmlText) as customHtml\r\n          \"\r\n          iceCustomHtmlToolTip\r\n          [iceTooltipHtmlText]=\"sanatizeHtml(customHtml)\"\r\n          [duration]=\"1500\"\r\n          class=\"material-icons\"\r\n          [ngClass]=\"column.prop && selectFieldValue(row, column.iconColor)\"\r\n          >priority_high</mat-icon\r\n        >\r\n\r\n        <mat-icon\r\n          *ngIf=\"column.prop && row[column.prop.toString() + 'InfoTooltip']\"\r\n          [matTooltip]=\"column.prop && row[column.prop.toString() + 'InfoTooltip']\"\r\n          class=\"mat-icon material-icons\"\r\n          >info</mat-icon\r\n        >\r\n\r\n        <mat-icon\r\n          *ngIf=\"column.prop && row[column.prop.toString() + 'Excluded']\"\r\n          [matTooltip]=\"column.prop && row[column.prop.toString() + 'Excluded']\"\r\n          class=\"mat-icon material-icons\"\r\n          >block</mat-icon\r\n        >\r\n\r\n        <h4\r\n          *ngIf=\"\r\n            !column.actionButtonIcon &&\r\n            !column.cellTemplate &&\r\n            !column.selectOptions &&\r\n            (!column.editable || !(isEditable(column, row) | async))\r\n          \"\r\n          class=\"ice-data-table-row\"\r\n          iceCustomHtmlToolTip\r\n          [iceTooltipHtmlText]=\"getTooltipValue(value, row, column)\"\r\n          [showToolTipOnTextOverflow]=\"true\"\r\n          [showToolTip]=\"hasToShowToolTip(row, column)\"\r\n          [innerHTML]=\"value\"\r\n          (click)=\"onClickField(row, column.onClickAction, $event)\"\r\n        ></h4>\r\n\r\n        <button\r\n          *ngIf=\"column.actionButtonIcon && !(column.hideActionButton && column.hideActionButton(row) | async)\"\r\n          mat-icon-button\r\n          [matTooltip]=\"column.actionButtonTooltip\"\r\n          (click)=\"onClickRowActionButton($event, column, row)\"\r\n        >\r\n          <mat-icon class=\"mat-icon material-icons\">{{ column.actionButtonIcon }}</mat-icon>\r\n        </button>\r\n\r\n        <ice-datatable-row-select\r\n          style=\"margin-top: 18px\"\r\n          [options]=\"column.selectOptions\"\r\n          [ngClass]=\"column.cellClass\"\r\n          (update)=\"updateSelect(column, row, $event)\"\r\n          [value]=\"value || column.defaultValue\"\r\n          [selectDisabled]=\"column.disabled\"\r\n          *ngIf=\"column.selectOptions && !(column.hideIfEmpty && column.disabled && value === '')\"\r\n        ></ice-datatable-row-select>\r\n\r\n        <ng-container *ngIf=\"!column.selectOptions && (column.editable && isEditable(column, row) | async)\">\r\n          <mat-icon class=\"mat-icon material-icons\" *ngIf=\"!column.hideEditIcon\">edit</mat-icon>\r\n          <ice-editable-text\r\n            [ngClass]=\"column.cellClass\"\r\n            (update)=\"editField(column, row, $event)\"\r\n            [errorText]=\"selectFieldValue(row, column.errorMessageField)\"\r\n            [value]=\"value\"\r\n          >\r\n            {{ value }}\r\n          </ice-editable-text>\r\n        </ng-container>\r\n\r\n        <ng-template\r\n          #cellTemplate\r\n          *ngIf=\"column.cellTemplate\"\r\n          [ngTemplateOutlet]=\"column.cellTemplate\"\r\n          [ngTemplateOutletContext]=\"cellContext\"\r\n        >\r\n        </ng-template>\r\n      </ng-container>\r\n    </div>\r\n  `\r\n})\r\nexport class DataTableBodyCellComponent implements DoCheck, OnDestroy {\r\n  @Input() displayCheck: (row: any, column?: TableColumn, value?: any) => boolean;\r\n\r\n  @Input() set rowDetail(rowDetail: any) {\r\n    this._rowDetail = rowDetail;\r\n  }\r\n\r\n  get rowDetail(): any {\r\n    return this._rowDetail;\r\n  }\r\n\r\n  @Input() set group(group: any) {\r\n    this._group = group;\r\n    this.cellContext.group = group;\r\n    this.checkValueUpdates();\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get group() {\r\n    return this._group;\r\n  }\r\n\r\n  @Input() set rowHeight(val: number) {\r\n    this._rowHeight = val;\r\n    this.cellContext.rowHeight = val;\r\n    this.checkValueUpdates();\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get rowHeight() {\r\n    return this._rowHeight;\r\n  }\r\n\r\n  @Input() set isSelected(val: boolean) {\r\n    this._isSelected = val;\r\n    this.cellContext.isSelected = val;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get isSelected(): boolean {\r\n    return this._isSelected;\r\n  }\r\n\r\n  @Input() set expanded(val: boolean) {\r\n    this._expanded = val;\r\n    this.cellContext.expanded = val;\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get expanded(): boolean {\r\n    return this._expanded;\r\n  }\r\n\r\n  @Input() set rowIndex(val: number) {\r\n    this._rowIndex = val;\r\n    this.cellContext.rowIndex = val;\r\n    this.checkValueUpdates();\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get rowIndex(): number {\r\n    return this._rowIndex;\r\n  }\r\n\r\n  @Input() set column(column: TableColumn) {\r\n    this._column = column;\r\n    this.cellContext.column = column;\r\n    this.checkValueUpdates();\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get column(): TableColumn {\r\n    return this._column;\r\n  }\r\n\r\n  @Input() set row(row: any) {\r\n    this._row = row;\r\n    this.cellContext.row = row;\r\n    this.checkValueUpdates();\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get row(): any {\r\n    return this._row;\r\n  }\r\n\r\n  @Input() set sorts(val: any[]) {\r\n    this._sorts = val;\r\n    this.calcSortDir = this.calcSortDir(val);\r\n  }\r\n\r\n  get sorts(): any[] {\r\n    return this._sorts;\r\n  }\r\n\r\n  @Input() set treeStatus(status: TreeStatus) {\r\n    if (status !== 'collapsed' && status !== 'expanded' && status !== 'loading' && status !== 'disabled') {\r\n      this._treeStatus = 'collapsed';\r\n    } else {\r\n      this._treeStatus = status;\r\n    }\r\n    this.cellContext.treeStatus = this._treeStatus;\r\n    this.checkValueUpdates();\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  get treeStatus(): TreeStatus {\r\n    return this._treeStatus;\r\n  }\r\n\r\n  @Output() activate: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\r\n\r\n  @ViewChild('cellTemplate', { read: ViewContainerRef, static: true })\r\n  cellTemplate: ViewContainerRef;\r\n\r\n  @HostBinding('class')\r\n  get columnCssClasses(): any {\r\n    let cls = 'datatable-body-cell';\r\n    if (this.column.cellClass) {\r\n      if (typeof this.column.cellClass === 'string') {\r\n        cls += ' ' + this.column.cellClass;\r\n      } else if (typeof this.column.cellClass === 'function') {\r\n        const res = this.column.cellClass({\r\n          row: this.row,\r\n          group: this.group,\r\n          column: this.column,\r\n          value: this.value,\r\n          rowHeight: this.rowHeight\r\n        });\r\n\r\n        if (typeof res === 'string') {\r\n          cls += res;\r\n        } else if (typeof res === 'object') {\r\n          const keys = Object.keys(res);\r\n          for (const k of keys) {\r\n            if (res[k] === true) {\r\n              cls += ` ${k}`;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (!this.sortDir) {\r\n      cls += ' sort-active';\r\n    }\r\n    if (this.isFocused) {\r\n      cls += ' active';\r\n    }\r\n    if (this.sortDir === SortDirection.asc) {\r\n      cls += ' sort-asc';\r\n    }\r\n    if (this.sortDir === SortDirection.desc) {\r\n      cls += ' sort-desc';\r\n    }\r\n\r\n    return cls;\r\n  }\r\n\r\n  @HostBinding('style.width.px')\r\n  get width(): number {\r\n    return this.column.width;\r\n  }\r\n\r\n  @HostBinding('style.minWidth.px')\r\n  get minWidth(): number {\r\n    return this.column.minWidth;\r\n  }\r\n\r\n  @HostBinding('style.maxWidth.px')\r\n  get maxWidth(): number {\r\n    return this.column.maxWidth;\r\n  }\r\n\r\n  @HostBinding('style.height')\r\n  get height(): string | number {\r\n    const height = this.rowHeight;\r\n    if (isNaN(height)) {\r\n      return height;\r\n    }\r\n    return height + 'px';\r\n  }\r\n  _isEditable: { [a: string]: Observable<boolean> } = {};\r\n  sanitizedValue: any;\r\n  value: any;\r\n  sortDir: SortDirection;\r\n  isFocused = false;\r\n  onCheckboxChangeFn = this.onCheckboxChange.bind(this);\r\n  activateFn = this.activate.emit.bind(this.activate);\r\n\r\n  cellContext: any = {\r\n    onCheckboxChangeFn: this.onCheckboxChangeFn,\r\n    activateFn: this.activateFn,\r\n    row: this.row,\r\n    group: this.group,\r\n    value: this.value,\r\n    column: this.column,\r\n    rowHeight: this.rowHeight,\r\n    isSelected: this.isSelected,\r\n    rowIndex: this.rowIndex,\r\n    treeStatus: this.treeStatus,\r\n    onTreeAction: this.onTreeAction.bind(this)\r\n  };\r\n\r\n  private _isSelected: boolean;\r\n  private _sorts: any[];\r\n  private _column: TableColumn;\r\n  private _row: any;\r\n  private _rowDetail: any;\r\n  private _group: any;\r\n  private _rowHeight: number;\r\n  private _rowIndex: number;\r\n  private _expanded: boolean;\r\n  private _element: any;\r\n  private _treeStatus: TreeStatus;\r\n\r\n  constructor(element: ElementRef, private cd: ChangeDetectorRef, private sanitizer: DomSanitizer) {\r\n    this._element = element.nativeElement;\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    this.checkValueUpdates();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.cellTemplate) {\r\n      this.cellTemplate.clear();\r\n    }\r\n  }\r\n\r\n  checkValueUpdates(): void {\r\n    let value = '';\r\n\r\n    if (!this.row || !this.column) {\r\n      value = '';\r\n    } else {\r\n      const val = this.column.$$valueGetter(this.row, this.column.prop);\r\n      const userPipe: PipeTransform = this.column.pipe;\r\n\r\n      if (userPipe) {\r\n        value = userPipe.transform(val);\r\n      } else if (value !== undefined) {\r\n        value = val;\r\n      }\r\n    }\r\n\r\n    if (this.value !== value) {\r\n      this.value = value;\r\n      this.cellContext.value = value;\r\n      this.sanitizedValue = value !== null && value !== undefined ? this.stripHtml(value) : value;\r\n      this.cd.markForCheck();\r\n    }\r\n  }\r\n\r\n  @HostListener('focus')\r\n  onFocus(): void {\r\n    this.isFocused = true;\r\n  }\r\n\r\n  @HostListener('blur')\r\n  onBlur(): void {\r\n    this.isFocused = false;\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    this.activate.emit({\r\n      type: 'click',\r\n      event,\r\n      row: this.row,\r\n      group: this.group,\r\n      rowHeight: this.rowHeight,\r\n      column: this.column,\r\n      value: this.value,\r\n      cellElement: this._element\r\n    });\r\n  }\r\n\r\n  @HostListener('mouseup', ['$event'])\r\n  middleclickEvent(event) {\r\n    if (event.which === 2) {\r\n      this.activate.emit({\r\n        type: 'middleclick',\r\n        event,\r\n        row: this.row,\r\n        group: this.group,\r\n        rowHeight: this.rowHeight,\r\n        column: this.column,\r\n        value: this.value,\r\n        cellElement: this._element\r\n      });\r\n    }\r\n  }\r\n\r\n  @HostListener('dblclick', ['$event'])\r\n  onDblClick(event: MouseEvent): void {\r\n    this.activate.emit({\r\n      type: 'dblclick',\r\n      event,\r\n      row: this.row,\r\n      group: this.group,\r\n      rowHeight: this.rowHeight,\r\n      column: this.column,\r\n      value: this.value,\r\n      cellElement: this._element\r\n    });\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeyDown(event: KeyboardEvent): void {\r\n    const keyCode = event.keyCode;\r\n    const isTargetCell = event.target === this._element;\r\n\r\n    const isAction =\r\n      keyCode === Keys.return ||\r\n      keyCode === Keys.down ||\r\n      keyCode === Keys.up ||\r\n      keyCode === Keys.left ||\r\n      keyCode === Keys.right;\r\n\r\n    if (isAction && isTargetCell) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.activate.emit({\r\n        type: 'keydown',\r\n        event,\r\n        row: this.row,\r\n        group: this.group,\r\n        rowHeight: this.rowHeight,\r\n        column: this.column,\r\n        value: this.value,\r\n        cellElement: this._element\r\n      });\r\n    }\r\n  }\r\n\r\n  onCheckboxChange(event: any): void {\r\n    this.activate.emit({\r\n      type: 'checkbox',\r\n      event,\r\n      row: this.row,\r\n      group: this.group,\r\n      rowHeight: this.rowHeight,\r\n      column: this.column,\r\n      value: this.value,\r\n      cellElement: this._element,\r\n      treeStatus: 'collapsed'\r\n    });\r\n  }\r\n\r\n  calcSortDir(sorts: any[]): any {\r\n    if (!sorts) {\r\n      return;\r\n    }\r\n\r\n    const sort = sorts.find((s: any) => {\r\n      return s.prop === this.column.prop;\r\n    });\r\n\r\n    if (sort) {\r\n      return sort.dir;\r\n    }\r\n  }\r\n\r\n  stripHtml(html: string): string {\r\n    if (!html.replace) {\r\n      return html;\r\n    }\r\n    return html.replace(/<\\/?[^>]+(>|$)/g, '');\r\n  }\r\n\r\n  onTreeAction() {\r\n    this.treeAction.emit(this.row);\r\n  }\r\n\r\n  calcLeftMargin(column: any, row: any) {\r\n    const levelIndent = column.treeLevelIndent != null ? column.treeLevelIndent : 50;\r\n    return column.isTreeColumn ? row.level * levelIndent : 0;\r\n  }\r\n\r\n  hasToShowToolTip(row, field) {\r\n    return row && field && field.tooltip && field.tooltip.length > 0;\r\n  }\r\n\r\n  getTooltipValue(value, row, field) {\r\n    if (row && field && field.tooltip && field.tooltip.length > 0) {\r\n      return row[`${field.tooltip}`];\r\n    }\r\n    return value;\r\n  }\r\n\r\n  getIcons(row, icons) {\r\n    if (row && icons) {\r\n      const iconsArray = icons.split('.');\r\n      return iconsArray.length > 1 && row[iconsArray[0]] ? row[iconsArray[0]][iconsArray[1]] || [] : row[icons] || [];\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectFieldValue(row, prop) {\r\n    if (row && prop) {\r\n      const propArray = prop.split('.');\r\n      return propArray.length > 1 && row[propArray[0]] ? row[propArray[0]][propArray[1]] : row[prop];\r\n    }\r\n    return ' ';\r\n  }\r\n\r\n  onClickRowActionButton(event, field, row) {\r\n    if (field && row) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      field.action(row);\r\n    }\r\n  }\r\n\r\n  sanatizeHtml(html: string) {\r\n    return this.sanitizer.bypassSecurityTrustHtml(html) as string;\r\n  }\r\n\r\n  isEditable(field: any, row: any): Observable<boolean> {\r\n    if (field && row) {\r\n      if (!this._isEditable[field.prop + row.id]) {\r\n        this._isEditable[field.prop + row.id] = field.editable(row);\r\n      }\r\n      return this._isEditable[field.prop + row.id];\r\n    }\r\n    return of(false);\r\n  }\r\n\r\n  updateSelect(field, row: any, newValue: any) {\r\n    row[field.prop] = newValue;\r\n    if (field.onEdit) {\r\n      field.onEdit(row);\r\n    }\r\n  }\r\n\r\n  editField(field, row: any, newValue: any) {\r\n    field.onEdit({ ...row, [field.prop]: newValue });\r\n  }\r\n\r\n  toggleExpandRow(row, event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    if (this.rowDetail) {\r\n      this.rowDetail.toggleExpandRow(row);\r\n    }\r\n  }\r\n\r\n  onClickField(row, action, event) {\r\n    if (row && action) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      action(row);\r\n    }\r\n  }\r\n}\r\n","export function selectRows(selected: any[], row: any, comparefn: any) {\r\n  const selectedIndex = comparefn(row, selected);\r\n\r\n  if (selectedIndex > -1) {\r\n    selected.splice(selectedIndex, 1);\r\n  } else {\r\n    selected.push(row);\r\n  }\r\n\r\n  return selected;\r\n}\r\n\r\nexport function selectRowsBetween(\r\n  selected: any[],\r\n  rows: any[],\r\n  index: number,\r\n  prevIndex: number,\r\n  comparefn: any\r\n): any[] {\r\n  const reverse = index < prevIndex;\r\n\r\n  for (let i = 0; i < rows.length; i++) {\r\n    const row = rows[i];\r\n    const greater = i >= prevIndex && i <= index;\r\n    const lesser = i <= prevIndex && i >= index;\r\n\r\n    let range = { start: 0, end: 0 };\r\n    if (reverse) {\r\n      range = {\r\n        start: index,\r\n        end: prevIndex\r\n      };\r\n    } else {\r\n      range = {\r\n        start: prevIndex,\r\n        end: index + 1\r\n      };\r\n    }\r\n\r\n    if ((reverse && lesser) || (!reverse && greater)) {\r\n      // if in the positive range to be added to `selected`, and\r\n      // not already in the selected array, add it\r\n      if (i >= range.start && i <= range.end) {\r\n        selected.push(row);\r\n      }\r\n    }\r\n  }\r\n\r\n  return selected;\r\n}\r\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\r\nimport { SelectionType } from '../../types/selection.type';\r\nimport { selectRowsBetween, selectRows } from '../../utils/selection';\r\nimport { Keys } from '../../utils/keys';\r\n\r\nexport interface Model {\r\n  type: string;\r\n  event: MouseEvent | KeyboardEvent;\r\n  row: any;\r\n  rowElement: any;\r\n  cellElement: any;\r\n  cellIndex: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'datatable-selection',\r\n  template: `\r\n    <ng-content></ng-content>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataTableSelectionComponent {\r\n  @Input() rows: any[];\r\n  @Input() selected: any[];\r\n  @Input() selectEnabled: boolean;\r\n  @Input() selectionType: SelectionType;\r\n  @Input() rowIdentity: any;\r\n  @Input() selectCheck: any;\r\n\r\n  @Output() activate: EventEmitter<any> = new EventEmitter();\r\n  @Output() select: EventEmitter<any> = new EventEmitter();\r\n\r\n  prevIndex: number;\r\n\r\n  selectRow(event: KeyboardEvent | MouseEvent, index: number, row: any): void {\r\n    if (!this.selectEnabled) return;\r\n\r\n    const chkbox = this.selectionType === SelectionType.checkbox;\r\n    const multi = this.selectionType === SelectionType.multi;\r\n    const multiClick = this.selectionType === SelectionType.multiClick;\r\n    let selected: any[] = [];\r\n\r\n    if (multi || chkbox || multiClick) {\r\n      if (event.shiftKey) {\r\n        selected = selectRowsBetween([], this.rows, index, this.prevIndex, this.getRowSelectedIdx.bind(this));\r\n      } else if (event.ctrlKey || event.metaKey || multiClick || chkbox) {\r\n        selected = selectRows([...this.selected], row, this.getRowSelectedIdx.bind(this));\r\n      } else {\r\n        selected = selectRows([], row, this.getRowSelectedIdx.bind(this));\r\n      }\r\n    } else {\r\n      selected = selectRows([], row, this.getRowSelectedIdx.bind(this));\r\n    }\r\n\r\n    if (typeof this.selectCheck === 'function') {\r\n      selected = selected.filter(this.selectCheck.bind(this));\r\n    }\r\n\r\n    this.selected.splice(0, this.selected.length);\r\n    this.selected.push(...selected);\r\n\r\n    this.prevIndex = index;\r\n\r\n    this.select.emit({\r\n      selected\r\n    });\r\n  }\r\n\r\n  onActivate(model: Model, index: number): void {\r\n    const { type, event, row } = model;\r\n    const chkbox = this.selectionType === SelectionType.checkbox;\r\n    const select = (!chkbox && (type === 'click' || type === 'dblclick')) || (chkbox && type === 'checkbox');\r\n\r\n    if (select) {\r\n      this.selectRow(event, index, row);\r\n    } else if (type === 'keydown') {\r\n      if ((<KeyboardEvent>event).keyCode === Keys.return) {\r\n        this.selectRow(event, index, row);\r\n      } else {\r\n        this.onKeyboardFocus(model);\r\n      }\r\n    }\r\n    this.activate.emit(model);\r\n  }\r\n\r\n  onKeyboardFocus(model: Model): void {\r\n    const { keyCode } = <KeyboardEvent>model.event;\r\n    const shouldFocus = keyCode === Keys.up || keyCode === Keys.down || keyCode === Keys.right || keyCode === Keys.left;\r\n\r\n    if (shouldFocus) {\r\n      const isCellSelection = this.selectionType === SelectionType.cell;\r\n\r\n      if (!model.cellElement || !isCellSelection) {\r\n        this.focusRow(model.rowElement, keyCode);\r\n      } else if (isCellSelection) {\r\n        this.focusCell(model.cellElement, model.rowElement, keyCode, model.cellIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  focusRow(rowElement: any, keyCode: number): void {\r\n    const nextRowElement = this.getPrevNextRow(rowElement, keyCode);\r\n    if (nextRowElement) nextRowElement.focus();\r\n  }\r\n\r\n  getPrevNextRow(rowElement: any, keyCode: number): any {\r\n    const parentElement = rowElement.parentElement;\r\n\r\n    if (parentElement) {\r\n      let focusElement: HTMLElement;\r\n      if (keyCode === Keys.up) {\r\n        focusElement = parentElement.previousElementSibling;\r\n      } else if (keyCode === Keys.down) {\r\n        focusElement = parentElement.nextElementSibling;\r\n      }\r\n\r\n      if (focusElement && focusElement.children.length) {\r\n        return focusElement.children[0];\r\n      }\r\n    }\r\n  }\r\n\r\n  focusCell(cellElement: any, rowElement: any, keyCode: number, cellIndex: number): void {\r\n    let nextCellElement: HTMLElement;\r\n\r\n    if (keyCode === Keys.left) {\r\n      nextCellElement = cellElement.previousElementSibling;\r\n    } else if (keyCode === Keys.right) {\r\n      nextCellElement = cellElement.nextElementSibling;\r\n    } else if (keyCode === Keys.up || keyCode === Keys.down) {\r\n      const nextRowElement = this.getPrevNextRow(rowElement, keyCode);\r\n      if (nextRowElement) {\r\n        const children = nextRowElement.getElementsByClassName('datatable-body-cell');\r\n        if (children.length) nextCellElement = children[cellIndex];\r\n      }\r\n    }\r\n\r\n    if (nextCellElement) nextCellElement.focus();\r\n  }\r\n\r\n  getRowSelected(row: any): boolean {\r\n    return this.getRowSelectedIdx(row, this.selected) > -1;\r\n  }\r\n\r\n  getRowSelectedIdx(row: any, selected: any[]): number {\r\n    if (!selected || !selected.length) return -1;\r\n\r\n    const rowId = this.rowIdentity(row);\r\n    return selected.findIndex(r => {\r\n      const id = this.rowIdentity(r);\r\n      return id === rowId;\r\n    });\r\n  }\r\n}\r\n","import { Component, Input, OnChanges, PipeTransform, TemplateRef } from '@angular/core';\r\n\r\nexport interface ISummaryColumn {\r\n  summaryFunc?: (cells: any[]) => any;\r\n  summaryTemplate?: TemplateRef<any>;\r\n\r\n  prop: string;\r\n  pipe?: PipeTransform;\r\n}\r\n\r\nfunction defaultSumFunc(cells: any[]): any {\r\n  const cellsWithValues = cells.filter(cell => !!cell);\r\n\r\n  if (!cellsWithValues.length) {\r\n    return null;\r\n  }\r\n  if (cellsWithValues.some(cell => typeof cell !== 'number')) {\r\n    return null;\r\n  }\r\n\r\n  return cellsWithValues.reduce((res, cell) => res + cell);\r\n}\r\n\r\nfunction noopSumFunc(cells: any[]): void {\r\n  return null;\r\n}\r\n\r\n@Component({\r\n  selector: 'datatable-summary-row',\r\n  template: `\r\n    <datatable-body-row\r\n      *ngIf=\"summaryRow && _internalColumns\"\r\n      tabindex=\"-1\"\r\n      [innerWidth]=\"innerWidth\"\r\n      [offsetX]=\"offsetX\"\r\n      [columns]=\"_internalColumns\"\r\n      [rowHeight]=\"rowHeight\"\r\n      [row]=\"summaryRow\"\r\n      [rowIndex]=\"-1\"\r\n    >\r\n    </datatable-body-row>\r\n  `,\r\n  host: {\r\n    class: 'datatable-summary-row'\r\n  }\r\n})\r\nexport class DataTableSummaryRowComponent implements OnChanges {\r\n  @Input() rows: any[];\r\n  @Input() columns: ISummaryColumn[];\r\n\r\n  @Input() rowHeight: number;\r\n  @Input() offsetX: number;\r\n  @Input() innerWidth: number;\r\n\r\n  _internalColumns: ISummaryColumn[];\r\n  summaryRow: any = {};\r\n\r\n  ngOnChanges() {\r\n    if (!this.columns || !this.rows) {\r\n      return;\r\n    }\r\n    this.updateInternalColumns();\r\n    this.updateValues();\r\n  }\r\n\r\n  private updateInternalColumns() {\r\n    this._internalColumns = this.columns.map(col => ({\r\n      ...col,\r\n      cellTemplate: col.summaryTemplate\r\n    }));\r\n  }\r\n\r\n  private updateValues() {\r\n    this.summaryRow = {};\r\n\r\n    this.columns\r\n      .filter(col => !col.summaryTemplate)\r\n      .forEach(col => {\r\n        const cellsFromSingleColumn = this.rows.map(row => row[col.prop]);\r\n        const sumFunc = this.getSummaryFunction(col);\r\n\r\n        this.summaryRow[col.prop] = col.pipe\r\n          ? col.pipe.transform(sumFunc(cellsFromSingleColumn))\r\n          : sumFunc(cellsFromSingleColumn);\r\n      });\r\n  }\r\n\r\n  private getSummaryFunction(column: ISummaryColumn): (a: any[]) => any {\r\n    if (column.summaryFunc === undefined) {\r\n      return defaultSumFunc;\r\n    } else if (column.summaryFunc === null) {\r\n      return noopSumFunc;\r\n    } else {\r\n      return column.summaryFunc;\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ice-custom-tooltip',\r\n  templateUrl: './ice-custom-tooltip.component.html',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styleUrls: ['./ice-custom-tooltip.component.scss'],\r\n  host: {\r\n    class: 'ice-custom-tooltip'\r\n  }\r\n})\r\nexport class CustomToolTipComponent {\r\n  @Input() text: string;\r\n}\r\n","import { Overlay, OverlayPositionBuilder, OverlayRef } from '@angular/cdk/overlay';\r\nimport { ComponentPortal } from '@angular/cdk/portal';\r\nimport { ComponentRef, Directive, ElementRef, HostListener, Input, OnDestroy } from '@angular/core';\r\nimport { CustomToolTipComponent } from '../components/ice-custom-tooltip/ice-custom-tooltip.component';\r\n\r\n@Directive({\r\n  selector: '[iceCustomHtmlToolTip]'\r\n})\r\nexport class ToolTipRendererDirective implements OnDestroy {\r\n  @Input() iceTooltipHtmlText: string;\r\n  @Input() showToolTip = true;\r\n  @Input() showToolTipOnTextOverflow = false;\r\n  @Input() duration = 0;\r\n\r\n  private _overlayRef: OverlayRef;\r\n  private timeout: any;\r\n  private componentInstance: any;\r\n\r\n  constructor(\r\n    private _overlay: Overlay,\r\n    private _overlayPositionBuilder: OverlayPositionBuilder,\r\n    private _elementRef: ElementRef\r\n  ) {}\r\n\r\n  @HostListener('mouseenter')\r\n  show() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    if (\r\n      (this.showToolTipOnTextOverflow &&\r\n        this._elementRef.nativeElement.offsetWidth < this._elementRef.nativeElement.scrollWidth) ||\r\n      this.showToolTip\r\n    ) {\r\n      if (!this._overlayRef) {\r\n        const positionStrategy = this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions([\r\n          {\r\n            originX: 'start',\r\n            originY: 'top',\r\n            overlayX: 'start',\r\n            overlayY: 'bottom',\r\n            offsetY: -5\r\n          }\r\n        ]);\r\n        this._overlayRef = this._overlay.create({ positionStrategy });\r\n      }\r\n      if (!this._overlayRef.hasAttached()) {\r\n        const tooltipRef: ComponentRef<CustomToolTipComponent> = this._overlayRef.attach(\r\n          new ComponentPortal(CustomToolTipComponent)\r\n        );\r\n        this.componentInstance = tooltipRef;\r\n        tooltipRef.instance.text = this.iceTooltipHtmlText;\r\n      }\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseleave')\r\n  hide() {\r\n    this.timeout = setTimeout(() => {\r\n      this.closeToolTip();\r\n    }, this.duration);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    this.closeToolTip();\r\n    this._overlayRef = null!;\r\n  }\r\n\r\n  private closeToolTip() {\r\n    if (this._overlayRef) {\r\n      this._overlayRef.detach();\r\n      this.componentInstance = null!;\r\n    }\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnInit, Output, ViewChildren } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ice-datatable-row-select',\r\n  templateUrl: './ice-datatable-select.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DatatableSelectComponent implements OnInit {\r\n  editing = false;\r\n  active = false;\r\n  rows = [];\r\n\r\n  @Input() align = 'left';\r\n  @Input() focusOnEnter = false;\r\n  @Input() editOnFocus = false;\r\n  @Input() selectDisabled = false;\r\n  @Output() update = new EventEmitter<string>();\r\n  @Input() options = [];\r\n  @Input() default: string;\r\n  @Input() value: string;\r\n  @ViewChildren('selectElement') selectEl;\r\n\r\n  ngOnInit() {\r\n    if (this.value) {\r\n      this.update.emit(this.value);\r\n    }\r\n  }\r\n\r\n  emitUpdate(newValue) {\r\n    this.update.emit(newValue);\r\n  }\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  Output,\r\n  ViewChild,\r\n  ViewChildren,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ice-editable-text',\r\n  templateUrl: './ice-editable-text.component.html',\r\n  styleUrls: ['./ice-editable-text.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  host: {\r\n    class: 'ice-editable-text'\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class EditableTextComponent implements AfterViewInit {\r\n  editing = false;\r\n  active = false;\r\n\r\n  @Input() align = 'left';\r\n  @Input() editOnSpace = true;\r\n  @Input() editOnClick = true;\r\n  @Input() focusOnEnter = true;\r\n  @Input() editOnFocus = false;\r\n  @Input() disabled = false;\r\n  @Input() value: string;\r\n  @Input() errorText = '';\r\n  @Output() focus = new EventEmitter<null>();\r\n  @Output() toggleEditing = new EventEmitter<null>();\r\n  @Output() toggleActive = new EventEmitter<null>();\r\n  @Output() update = new EventEmitter<string>();\r\n  @ViewChildren('inputElement') inputEl;\r\n  @ViewChild('contentWrapper', { static: false }) content: ElementRef;\r\n\r\n  emitUpdate(newText) {\r\n    if (!this.disabled) {\r\n      this.update.emit(newText);\r\n    }\r\n  }\r\n\r\n  emitToggleEditing($event) {\r\n    $event.stopPropagation();\r\n    if (!this.disabled) {\r\n      this.editing = !this.editing;\r\n    }\r\n  }\r\n\r\n  emitFocus() {\r\n    if (this.focus) {\r\n      this.focus.emit(null);\r\n    }\r\n  }\r\n\r\n  emitToggleActive($event) {\r\n    $event.stopPropagation();\r\n    if (!this.disabled) {\r\n      this.active = !this.active;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputEl.changes.subscribe(d => {\r\n      return d.last && d.last.nativeElement.focus();\r\n    });\r\n    if (this.value == null) {\r\n      this.value =\r\n        this.content &&\r\n        this.content.nativeElement.childNodes.length > 0 &&\r\n        this.content.nativeElement.childNodes[0].data;\r\n    }\r\n  }\r\n}\r\n","import { getterForProp } from './column-prop-getters';\r\nimport { TableColumnProp } from '../types/table-column.type';\r\n\r\nexport type OptionalValueGetter = (row: any) => any | undefined;\r\nexport function optionalGetterForProp(prop: TableColumnProp): OptionalValueGetter {\r\n  return prop && (row => getterForProp(prop)(row, prop));\r\n}\r\n\r\n/**\r\n * This functions rearrange items by their parents\r\n * Also sets the level value to each of the items\r\n *\r\n * Note: Expecting each item has a property called parentId\r\n * Note: This algorithm will fail if a list has two or more items with same ID\r\n * NOTE: This algorithm will fail if there is a deadlock of relationship\r\n *\r\n * For example,\r\n *\r\n * Input\r\n *\r\n * id -> parent\r\n * 1  -> 0\r\n * 2  -> 0\r\n * 3  -> 1\r\n * 4  -> 1\r\n * 5  -> 2\r\n * 7  -> 8\r\n * 6  -> 3\r\n *\r\n *\r\n * Output\r\n * id -> level\r\n * 1      -> 0\r\n * --3    -> 1\r\n * ----6  -> 2\r\n * --4    -> 1\r\n * 2      -> 0\r\n * --5    -> 1\r\n * 7     -> 8\r\n *\r\n *\r\n * @param rows\r\n *\r\n */\r\nexport function groupRowsByParents(rows: any[], from?: OptionalValueGetter, to?: OptionalValueGetter): any[] {\r\n  if (from && to) {\r\n    const nodeById = {};\r\n    const l = rows.length;\r\n    let node: TreeNode | null = null;\r\n\r\n    nodeById[0] = new TreeNode(); // that's the root node\r\n\r\n    const uniqIDs = rows.reduce((arr, item) => {\r\n      const toValue = to(item);\r\n      if (arr.indexOf(toValue) === -1) {\r\n        arr.push(toValue);\r\n      }\r\n      return arr;\r\n    }, []);\r\n\r\n    for (let i = 0; i < l; i++) {\r\n      // make TreeNode objects for each item\r\n      nodeById[to(rows[i])] = new TreeNode(rows[i]);\r\n    }\r\n\r\n    for (let i = 0; i < l; i++) {\r\n      // link all TreeNode objects\r\n      node = nodeById[to(rows[i])];\r\n      let parent = 0;\r\n      const fromValue = from(node.row);\r\n      if (!!fromValue && uniqIDs.indexOf(fromValue) > -1) {\r\n        parent = fromValue;\r\n      }\r\n      node.parent = nodeById[parent];\r\n      node.row['level'] = node.parent.row['level'] + 1;\r\n      node.parent.children.push(node);\r\n    }\r\n\r\n    let resolvedRows: any[] = [];\r\n    nodeById[0].flatten(function() {\r\n      resolvedRows = [...resolvedRows, this.row];\r\n    }, true);\r\n\r\n    return resolvedRows;\r\n  } else {\r\n    return rows;\r\n  }\r\n}\r\n\r\nclass TreeNode {\r\n  public row: any;\r\n  public parent: any;\r\n  public children: any[];\r\n\r\n  constructor(row: any | null = null) {\r\n    if (!row) {\r\n      row = {\r\n        level: -1,\r\n        treeStatus: 'expanded'\r\n      };\r\n    }\r\n    this.row = row;\r\n    this.parent = null;\r\n    this.children = [];\r\n  }\r\n\r\n  flatten(f: any, recursive: boolean) {\r\n    if (this.row['treeStatus'] === 'expanded') {\r\n      for (let i = 0, l = this.children.length; i < l; i++) {\r\n        const child = this.children[i];\r\n        f.apply(child, Array.prototype.slice.call(arguments, 2));\r\n        if (recursive) child.flatten.apply(child, arguments);\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Creates a unique object id.\r\n * http://stackoverflow.com/questions/6248666/how-to-generate-short-uid-like-ax4j9z-in-js\r\n */\r\nexport function id() {\r\n  return ('0000' + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)).slice(-4);\r\n}\r\n","import { camelCase, deCamelCase } from './camel-case';\r\nimport { id } from './id';\r\nimport { getterForProp } from './column-prop-getters';\r\nimport { TableColumn } from '../types/table-column.type';\r\nimport { DataTableColumnDirective } from '../components/columns/column.directive';\r\n\r\n/**\r\n * Sets the column defaults\r\n */\r\nexport function setColumnDefaults(columns: TableColumn[]) {\r\n  if (!columns) return;\r\n\r\n  // Only one column should hold the tree view\r\n  // Thus if multiple columns are provided with\r\n  // isTreeColumn as true we take only the first one\r\n  let treeColumnFound: boolean = false;\r\n\r\n  for (const column of columns) {\r\n    if (!column.$$id) {\r\n      column.$$id = id();\r\n    }\r\n\r\n    // prop can be numeric; zero is valid not a missing prop\r\n    // translate name => prop\r\n    if (isNullOrUndefined(column.prop) && column.name) {\r\n      column.prop = camelCase(column.name);\r\n    }\r\n\r\n    if (!column.$$valueGetter) {\r\n      column.$$valueGetter = getterForProp(column.prop);\r\n    }\r\n\r\n    // format props if no name passed\r\n    if (!isNullOrUndefined(column.prop) && isNullOrUndefined(column.name)) {\r\n      column.name = deCamelCase(String(column.prop));\r\n    }\r\n\r\n    if (isNullOrUndefined(column.prop) && isNullOrUndefined(column.name)) {\r\n      column.name = ''; // Fixes IE and Edge displaying `null`\r\n    }\r\n\r\n    if (!column.hasOwnProperty('resizeable')) {\r\n      column.resizeable = true;\r\n    }\r\n\r\n    if (!column.hasOwnProperty('sortable')) {\r\n      column.sortable = true;\r\n    }\r\n\r\n    if (!column.hasOwnProperty('draggable')) {\r\n      column.draggable = true;\r\n    }\r\n\r\n    if (!column.hasOwnProperty('canAutoResize')) {\r\n      column.canAutoResize = true;\r\n    }\r\n\r\n    if (!column.hasOwnProperty('width')) {\r\n      column.width = 150;\r\n    }\r\n\r\n    if (!column.hasOwnProperty('isTreeColumn')) {\r\n      column.isTreeColumn = false;\r\n    } else {\r\n      if (column.isTreeColumn && !treeColumnFound) {\r\n        // If the first column with isTreeColumn is true found\r\n        // we mark that treeCoulmn is found\r\n        treeColumnFound = true;\r\n      } else {\r\n        // After that isTreeColumn property for any other column\r\n        // will be set as false\r\n        column.isTreeColumn = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function isNullOrUndefined<T>(value: T | null | undefined): value is null | undefined {\r\n  return value === null || value === undefined;\r\n}\r\n\r\n/**\r\n * Translates templates definitions to objects\r\n */\r\nexport function translateTemplates(templates: DataTableColumnDirective[]): any[] {\r\n  const result: any[] = [];\r\n  for (const temp of templates) {\r\n    const col: any = {};\r\n\r\n    const props = Object.getOwnPropertyNames(temp);\r\n    for (const prop of props) {\r\n      col[prop] = temp[prop];\r\n    }\r\n\r\n    if (temp.headerTemplate) {\r\n      col.headerTemplate = temp.headerTemplate;\r\n    }\r\n\r\n    if (temp.cellTemplate) {\r\n      col.cellTemplate = temp.cellTemplate;\r\n    }\r\n\r\n    if (temp.summaryFunc) {\r\n      col.summaryFunc = temp.summaryFunc;\r\n    }\r\n\r\n    if (temp.summaryTemplate) {\r\n      col.summaryTemplate = temp.summaryTemplate;\r\n    }\r\n\r\n    result.push(col);\r\n  }\r\n\r\n  return result;\r\n}\r\n","export enum ColumnMode {\r\n  standard = 'standard',\r\n  flex = 'flex',\r\n  force = 'force'\r\n}\r\n","export enum ContextmenuType {\r\n  header = 'header',\r\n  body = 'body'\r\n}\r\n","import { columnsByPin, columnsTotalWidth } from './column';\r\n\r\n/**\r\n * Calculates the Total Flex Grow\r\n */\r\nexport function getTotalFlexGrow(columns: any[]) {\r\n  let totalFlexGrow = 0;\r\n\r\n  for (const c of columns) {\r\n    totalFlexGrow += c.flexGrow || 0;\r\n  }\r\n\r\n  return totalFlexGrow;\r\n}\r\n\r\n/**\r\n * Adjusts the column widths.\r\n * Inspired by: https://github.com/facebook/fixed-data-table/blob/master/src/FixedDataTableWidthHelper.js\r\n */\r\nexport function adjustColumnWidths(allColumns: any, expectedWidth: any) {\r\n  const columnsWidth = columnsTotalWidth(allColumns);\r\n  const totalFlexGrow = getTotalFlexGrow(allColumns);\r\n  const colsByGroup = columnsByPin(allColumns);\r\n\r\n  if (columnsWidth !== expectedWidth) {\r\n    scaleColumns(colsByGroup, expectedWidth, totalFlexGrow);\r\n  }\r\n}\r\n\r\n/**\r\n * Resizes columns based on the flexGrow property, while respecting manually set widths\r\n */\r\nfunction scaleColumns(colsByGroup: any, maxWidth: any, totalFlexGrow: any) {\r\n  // calculate total width and flexgrow points for coulumns that can be resized\r\n  for (const attr in colsByGroup) {\r\n    for (const column of colsByGroup[attr]) {\r\n      if (!column.canAutoResize) {\r\n        maxWidth -= column.width;\r\n        totalFlexGrow -= column.flexGrow ? column.flexGrow : 0;\r\n      } else {\r\n        column.width = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  const hasMinWidth = {};\r\n  let remainingWidth = maxWidth;\r\n\r\n  // resize columns until no width is left to be distributed\r\n  do {\r\n    const widthPerFlexPoint = remainingWidth / totalFlexGrow;\r\n    remainingWidth = 0;\r\n\r\n    for (const attr in colsByGroup) {\r\n      for (const column of colsByGroup[attr]) {\r\n        // if the column can be resize and it hasn't reached its minimum width yet\r\n        if (column.canAutoResize && !hasMinWidth[column.prop]) {\r\n          const newWidth = column.width + column.flexGrow * widthPerFlexPoint;\r\n          if (column.minWidth !== undefined && newWidth < column.minWidth) {\r\n            remainingWidth += newWidth - column.minWidth;\r\n            column.width = column.minWidth;\r\n            hasMinWidth[column.prop] = true;\r\n          } else {\r\n            column.width = newWidth;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } while (remainingWidth !== 0);\r\n}\r\n\r\n/**\r\n * Forces the width of the columns to\r\n * distribute equally but overflowing when necessary\r\n *\r\n * Rules:\r\n *\r\n *  - If combined withs are less than the total width of the grid,\r\n *    proportion the widths given the min / max / normal widths to fill the width.\r\n *\r\n *  - If the combined widths, exceed the total width of the grid,\r\n *    use the standard widths.\r\n *\r\n *  - If a column is resized, it should always use that width\r\n *\r\n *  - The proportional widths should never fall below min size if specified.\r\n *\r\n *  - If the grid starts off small but then becomes greater than the size ( + / - )\r\n *    the width should use the original width; not the newly proportioned widths.\r\n */\r\nexport function forceFillColumnWidths(\r\n  allColumns: any[],\r\n  expectedWidth: number,\r\n  startIdx: number,\r\n  allowBleed: boolean,\r\n  defaultColWidth: number = 300\r\n) {\r\n  const columnsToResize = allColumns.slice(startIdx + 1, allColumns.length).filter(c => {\r\n    return c.canAutoResize !== false;\r\n  });\r\n\r\n  for (const column of columnsToResize) {\r\n    if (!column.$$oldWidth) {\r\n      column.$$oldWidth = column.width;\r\n    }\r\n  }\r\n\r\n  let additionWidthPerColumn = 0;\r\n  let exceedsWindow = false;\r\n  let contentWidth = getContentWidth(allColumns, defaultColWidth);\r\n  let remainingWidth = expectedWidth - contentWidth;\r\n  const columnsProcessed: any[] = [];\r\n  const remainingWidthLimit = 1; // when to stop\r\n\r\n  // This loop takes care of the\r\n  do {\r\n    additionWidthPerColumn = remainingWidth / columnsToResize.length;\r\n    exceedsWindow = contentWidth >= expectedWidth;\r\n\r\n    for (const column of columnsToResize) {\r\n      if (exceedsWindow && allowBleed) {\r\n        column.width = column.$$oldWidth || column.width || defaultColWidth;\r\n      } else {\r\n        const newSize = (column.width || defaultColWidth) + additionWidthPerColumn;\r\n\r\n        if (column.minWidth && newSize < column.minWidth) {\r\n          column.width = column.minWidth;\r\n          columnsProcessed.push(column);\r\n        } else if (column.maxWidth && newSize > column.maxWidth) {\r\n          column.width = column.maxWidth;\r\n          columnsProcessed.push(column);\r\n        } else {\r\n          column.width = newSize;\r\n        }\r\n      }\r\n\r\n      column.width = Math.max(0, column.width);\r\n    }\r\n\r\n    contentWidth = getContentWidth(allColumns);\r\n    remainingWidth = expectedWidth - contentWidth;\r\n    removeProcessedColumns(columnsToResize, columnsProcessed);\r\n  } while (remainingWidth > remainingWidthLimit && columnsToResize.length !== 0);\r\n}\r\n\r\n/**\r\n * Remove the processed columns from the current active columns.\r\n */\r\nfunction removeProcessedColumns(columnsToResize: any[], columnsProcessed: any[]) {\r\n  for (const column of columnsProcessed) {\r\n    const index = columnsToResize.indexOf(column);\r\n    columnsToResize.splice(index, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * Gets the width of the columns\r\n */\r\nfunction getContentWidth(allColumns: any, defaultColWidth: number = 300): number {\r\n  let contentWidth = 0;\r\n\r\n  for (const column of allColumns) {\r\n    contentWidth += column.width || defaultColWidth;\r\n  }\r\n\r\n  return contentWidth;\r\n}\r\n","import {\n  Component,\n  Input,\n  Output,\n  ElementRef,\n  EventEmitter,\n  ViewChild,\n  HostListener,\n  ContentChildren,\n  OnInit,\n  QueryList,\n  AfterViewInit,\n  HostBinding,\n  ContentChild,\n  DoCheck,\n  KeyValueDiffers,\n  KeyValueDiffer,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  SkipSelf,\n  OnDestroy,\n  Optional,\n  Inject,\n  ViewRef\n} from '@angular/core';\n\nimport { DatatableGroupHeaderDirective } from './body/body-group-header.directive';\n\nimport { BehaviorSubject, Subscription, Subject } from 'rxjs';\nimport { INgxDatatableConfig } from '../ngx-datatable.module';\nimport { groupRowsByParents, optionalGetterForProp } from '../utils/tree';\nimport { TableColumn } from '../types/table-column.type';\nimport { setColumnDefaults, translateTemplates } from '../utils/column-helper';\nimport { ColumnMode } from '../types/column-mode.type';\nimport { SelectionType } from '../types/selection.type';\nimport { SortType } from '../types/sort.type';\nimport { ContextmenuType } from '../types/contextmenu.type';\nimport { DataTableColumnDirective } from './columns/column.directive';\nimport { DatatableRowDetailDirective } from './row-detail/row-detail.directive';\nimport { DatatableFooterDirective } from './footer/footer.directive';\nimport { DataTableBodyComponent } from './body/body.component';\nimport { DataTableHeaderComponent } from './header/header.component';\nimport { ScrollbarHelper } from '../services/scrollbar-helper.service';\nimport { ColumnChangesService } from '../services/column-changes.service';\nimport { DimensionsHelper } from '../services/dimensions-helper.service';\nimport { throttleable } from '../utils/throttle';\nimport { forceFillColumnWidths, adjustColumnWidths } from '../utils/math';\nimport { sortRows } from '../utils/sort';\nimport { ResizeSensor } from 'css-element-queries';\nimport { throttleTime, debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'ngx-datatable',\n  templateUrl: './datatable.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./datatable.component.scss'],\n  host: {\n    class: 'ngx-datatable'\n  }\n})\nexport class DatatableComponent implements OnInit, DoCheck, AfterViewInit {\n  /**\n   * Template for the target marker of drag target columns.\n   */\n  @Input() targetMarkerTemplate: any;\n\n  /**\n   * Rows that are displayed in the table.\n   */\n  @Input() set rows(val: any) {\n    this._rows = val;\n\n    if (val) {\n      this._internalRows = [...val];\n    }\n\n    // auto sort on new updates\n    if (!this.externalSorting) {\n      this.sortInternalRows();\n    }\n\n    // auto group by parent on new update\n    this._internalRows = groupRowsByParents(\n      this._internalRows,\n      optionalGetterForProp(this.treeFromRelation),\n      optionalGetterForProp(this.treeToRelation)\n    );\n\n    // recalculate sizes/etc\n    this.recalculate();\n\n    if (this._rows && this._groupRowsBy) {\n      // If a column has been specified in _groupRowsBy created a new array with the data grouped by that row\n      this.groupedRows = this.groupArrayBy(this._rows, this._groupRowsBy);\n    }\n\n    this.cd.markForCheck();\n  }\n\n  /**\n   * Gets the rows.\n   */\n  get rows(): any {\n    return this._rows;\n  }\n\n  /**\n   * This attribute allows the user to set the name of the column to group the data with\n   */\n  @Input() set groupRowsBy(val: string) {\n    if (val) {\n      this._groupRowsBy = val;\n      if (this._rows && this._groupRowsBy) {\n        // cretes a new array with the data grouped\n        this.groupedRows = this.groupArrayBy(this._rows, this._groupRowsBy);\n      }\n    }\n  }\n\n  get groupRowsBy() {\n    return this._groupRowsBy;\n  }\n\n  /**\n   * This attribute allows the user to set a grouped array in the following format:\n   *  [\n   *    {groupid=1} [\n   *      {id=1 name=\"test1\"},\n   *      {id=2 name=\"test2\"},\n   *      {id=3 name=\"test3\"}\n   *    ]},\n   *    {groupid=2>[\n   *      {id=4 name=\"test4\"},\n   *      {id=5 name=\"test5\"},\n   *      {id=6 name=\"test6\"}\n   *    ]}\n   *  ]\n   */\n  @Input() groupedRows: any[];\n\n  @Input() expandable: boolean = false;\n\n  /**\n   * Columns to be displayed.\n   */\n  @Input() set columns(val: TableColumn[]) {\n    val = [\n      ...(this.expandable\n        ? [\n            {\n              width: 50,\n              prop: 'ice-expandable',\n              name: '',\n              resizeable: false,\n              canAutoResize: false,\n              draggable: false,\n              sortable: false\n            }\n          ]\n        : []),\n      ...val\n    ];\n    if (val) {\n      this._internalColumns = [...val];\n      setColumnDefaults(this._internalColumns);\n      this.recalculateColumns();\n    }\n\n    this._columns = val;\n  }\n\n  /**\n   * Get the columns.\n   */\n  get columns(): TableColumn[] {\n    return this._columns;\n  }\n\n  /**\n   * List of row objects that should be\n   * represented as selected in the grid.\n   * Default value: `[]`\n   */\n  @Input() selected: any[] = [];\n\n  /**\n   * Enable vertical scrollbars\n   */\n  @Input() scrollbarV: boolean = false;\n\n  /**\n   * Enable horz scrollbars\n   */\n  @Input() scrollbarH: boolean = false;\n\n  /**\n   * The row height; which is necessary\n   * to calculate the height for the lazy rendering.\n   */\n  @Input() rowHeight: number | 'auto' | ((row?: any) => number) = 30;\n\n  /**\n   * Type of column width distribution formula.\n   * Example: flex, force, standard\n   */\n  @Input() columnMode: ColumnMode = ColumnMode.standard;\n\n  /**\n   * The minimum header height in pixels.\n   * Pass a falsey for no header\n   */\n  @Input() headerHeight: any = 30;\n\n  /**\n   * The minimum footer height in pixels.\n   * Pass falsey for no footer\n   */\n  @Input() footerHeight: number = 0;\n\n  /**\n   * If the table should use external paging\n   * otherwise its assumed that all data is preloaded.\n   */\n  @Input() externalPaging: boolean = false;\n\n  /**\n   * If the table should use external sorting or\n   * the built-in basic sorting.\n   */\n  @Input() externalSorting: boolean = false;\n\n  /**\n   * The page size to be shown.\n   * Default value: `undefined`\n   */\n  @Input() set limit(val: number | undefined) {\n    this._limit = val;\n\n    // recalculate sizes/etc\n    this.recalculate();\n  }\n\n  /**\n   * Gets the limit.\n   */\n  get limit(): number | undefined {\n    return this._limit;\n  }\n\n  /**\n   * The total count of all rows.\n   * Default value: `0`\n   */\n  @Input() set count(val: number) {\n    this._count = val;\n\n    // recalculate sizes/etc\n    this.recalculate();\n  }\n\n  /**\n   * Gets the count.\n   */\n  get count(): number {\n    return this._count;\n  }\n\n  /**\n   * The current offset ( page - 1 ) shown.\n   * Default value: `0`\n   */\n  @Input() set offset(val: number) {\n    this._offset = val;\n  }\n  get offset(): number {\n    return Math.max(Math.min(this._offset, Math.ceil(this.rowCount / this.pageSize) - 1), 0);\n  }\n\n  /**\n   * Show the linear loading bar.\n   * Default value: `false`\n   */\n  @Input() loadingIndicator: boolean = false;\n\n  /**\n   * Type of row selection. Options are:\n   *\n   *  - `single`\n   *  - `multi`\n   *  - `checkbox`\n   *  - `multiClick`\n   *  - `cell`\n   *\n   * For no selection pass a `falsey`.\n   * Default value: `undefined`\n   */\n  @Input() selectionType: SelectionType;\n\n  /**\n   * Enable/Disable ability to re-order columns\n   * by dragging them.\n   */\n  @Input() reorderable: boolean = true;\n\n  /**\n   * Swap columns on re-order columns or\n   * move them.\n   */\n  @Input() swapColumns: boolean = true;\n\n  /**\n   * The type of sorting\n   */\n  @Input() sortType: SortType = SortType.single;\n\n  /**\n   * Array of sorted columns by property and type.\n   * Default value: `[]`\n   */\n  @Input() sorts: any[] = [];\n\n  /**\n   * Css class overrides\n   */\n  @Input() cssClasses: any = {\n    sortAscending: 'datatable-icon-up',\n    sortDescending: 'datatable-icon-down',\n    pagerLeftArrow: 'datatable-icon-left',\n    pagerRightArrow: 'datatable-icon-right',\n    pagerPrevious: 'datatable-icon-prev',\n    pagerNext: 'datatable-icon-skip'\n  };\n\n  /**\n   * Message overrides for localization\n   *\n   * emptyMessage     [default] = 'No data to display'\n   * totalMessage     [default] = 'total'\n   * selectedMessage  [default] = 'selected'\n   */\n  @Input() messages: any = {\n    // Message to show when array is presented\n    // but contains no values\n    emptyMessage: 'No data to display',\n\n    // Footer total message\n    totalMessage: 'total',\n\n    // Footer selected message\n    selectedMessage: 'selected'\n  };\n\n  /**\n   * Row specific classes.\n   * Similar implementation to ngClass.\n   *\n   *  [rowClass]=\"'first second'\"\n   *  [rowClass]=\"{ 'first': true, 'second': true, 'third': false }\"\n   */\n  @Input() rowClass: any;\n\n  /**\n   * A boolean/function you can use to check whether you want\n   * to select a particular row based on a criteria. Example:\n   *\n   *    (selection) => {\n   *      return selection !== 'Ethel Price';\n   *    }\n   */\n  @Input() selectCheck: any;\n\n  /**\n   * A function you can use to check whether you want\n   * to show the checkbox for a particular row based on a criteria. Example:\n   *\n   *    (row, column, value) => {\n   *      return row.name !== 'Ethel Price';\n   *    }\n   */\n  @Input() displayCheck: (row: any, column?: any, value?: any) => boolean;\n\n  /**\n   * A boolean you can use to set the detault behaviour of rows and groups\n   * whether they will start expanded or not. If ommited the default is NOT expanded.\n   *\n   */\n  @Input() groupExpansionDefault: boolean = false;\n\n  /**\n   * Property to which you can use for custom tracking of rows.\n   * Example: 'name'\n   */\n  @Input() trackByProp: string;\n\n  /**\n   * Property to which you can use for determining select all\n   * rows on current page or not.\n   *\n   * @memberOf DatatableComponent\n   */\n  @Input() selectAllRowsOnPage = false;\n\n  /**\n   * A flag for row virtualization on / off\n   */\n  @Input() virtualization: boolean = true;\n\n  /**\n   * Tree from relation\n   */\n  @Input() treeFromRelation: string;\n\n  /**\n   * Tree to relation\n   */\n  @Input() treeToRelation: string;\n\n  /**\n   * A flag for switching summary row on / off\n   */\n  @Input() summaryRow: boolean = false;\n\n  /**\n   * A height of summary row\n   */\n  @Input() summaryHeight: number = 30;\n\n  /**\n   * A property holds a summary row position: top/bottom\n   */\n  @Input() summaryPosition: string = 'top';\n\n  /**\n   * Body was scrolled typically in a `scrollbarV:true` scenario.\n   */\n  @Output() scroll: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * A cell or row was focused via keyboard or mouse click.\n   */\n  @Output() activate: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * A cell or row was selected.\n   */\n  @Output() select: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Column sort was invoked.\n   */\n  @Output() sort: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Ice column filter was invoked.\n   */\n  @Output() filter: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * The table was paged either triggered by the pager or the body scroll.\n   */\n  @Output() page: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Columns were re-ordered.\n   */\n  @Output() reorder: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Column was resized.\n   */\n  @Output() resize: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * The context menu was invoked on the table.\n   * type indicates whether the header or the body was clicked.\n   * content contains either the column or the row that was clicked.\n   */\n  @Output() tableContextmenu = new EventEmitter<{ event: MouseEvent; type: ContextmenuType; content: any }>(false);\n\n  /**\n   * A row was expanded ot collapsed for tree\n   */\n  @Output() treeAction: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * CSS class applied if the header height if fixed height.\n   */\n  @HostBinding('class.fixed-header')\n  get isFixedHeader(): boolean {\n    const headerHeight: number | string = this.headerHeight;\n    return typeof headerHeight === 'string' ? <string>headerHeight !== 'auto' : true;\n  }\n\n  /**\n   * CSS class applied to the root element if\n   * the row heights are fixed heights.\n   */\n  @HostBinding('class.fixed-row')\n  get isFixedRow(): boolean {\n    return this.rowHeight !== 'auto';\n  }\n\n  /**\n   * CSS class applied to root element if\n   * vertical scrolling is enabled.\n   */\n  @HostBinding('class.scroll-vertical')\n  get isVertScroll(): boolean {\n    return this.scrollbarV;\n  }\n\n  /**\n   * CSS class applied to root element if\n   * virtualization is enabled.\n   */\n  @HostBinding('class.virtualized')\n  get isVirtualized(): boolean {\n    return this.virtualization;\n  }\n\n  /**\n   * CSS class applied to the root element\n   * if the horziontal scrolling is enabled.\n   */\n  @HostBinding('class.scroll-horz')\n  get isHorScroll(): boolean {\n    return this.scrollbarH;\n  }\n\n  /**\n   * CSS class applied to root element is selectable.\n   */\n  @HostBinding('class.selectable')\n  get isSelectable(): boolean {\n    return this.selectionType !== undefined;\n  }\n\n  /**\n   * CSS class applied to root is checkbox selection.\n   */\n  @HostBinding('class.checkbox-selection')\n  get isCheckboxSelection(): boolean {\n    return this.selectionType === SelectionType.checkbox;\n  }\n\n  /**\n   * CSS class applied to root if cell selection.\n   */\n  @HostBinding('class.cell-selection')\n  get isCellSelection(): boolean {\n    return this.selectionType === SelectionType.cell;\n  }\n\n  /**\n   * CSS class applied to root if single select.\n   */\n  @HostBinding('class.single-selection')\n  get isSingleSelection(): boolean {\n    return this.selectionType === SelectionType.single;\n  }\n\n  /**\n   * CSS class added to root element if mulit select\n   */\n  @HostBinding('class.multi-selection')\n  get isMultiSelection(): boolean {\n    return this.selectionType === SelectionType.multi;\n  }\n\n  /**\n   * CSS class added to root element if mulit click select\n   */\n  @HostBinding('class.multi-click-selection')\n  get isMultiClickSelection(): boolean {\n    return this.selectionType === SelectionType.multiClick;\n  }\n\n  /**\n   * Column templates gathered from `ContentChildren`\n   * if described in your markup.\n   */\n  @ContentChildren(DataTableColumnDirective)\n  set columnTemplates(val: QueryList<DataTableColumnDirective>) {\n    this._columnTemplates = val;\n    this.translateColumns(val);\n  }\n\n  /**\n   * Returns the column templates.\n   */\n  get columnTemplates(): QueryList<DataTableColumnDirective> {\n    return this._columnTemplates;\n  }\n\n  /**\n   * Row Detail templates gathered from the ContentChild\n   */\n  @ContentChild(DatatableRowDetailDirective, { static: false })\n  rowDetail: DatatableRowDetailDirective;\n\n  /**\n   * Group Header templates gathered from the ContentChild\n   */\n  @ContentChild(DatatableGroupHeaderDirective, { static: false })\n  groupHeader: DatatableGroupHeaderDirective;\n\n  /**\n   * Footer template gathered from the ContentChild\n   */\n  @ContentChild(DatatableFooterDirective, { static: false })\n  footer: DatatableFooterDirective;\n\n  /**\n   * Reference to the body component for manually\n   * invoking functions on the body.\n   */\n  @ViewChild(DataTableBodyComponent, { static: false })\n  bodyComponent: DataTableBodyComponent;\n\n  /**\n   * Reference to the header component for manually\n   * invoking functions on the header.\n   *\n   * @memberOf DatatableComponent\n   */\n  @ViewChild(DataTableHeaderComponent, { static: false })\n  headerComponent: DataTableHeaderComponent;\n\n  /**\n   * Returns if all rows are selected.\n   */\n  get allRowsSelected(): boolean {\n    let allRowsSelected = this.rows && this.selected && this.selected.length === this.rows.length;\n\n    if (this.selectAllRowsOnPage) {\n      const indexes = this.bodyComponent.indexes;\n      const rowsOnPage = indexes.last - indexes.first;\n      allRowsSelected = this.selected.length === rowsOnPage;\n    }\n\n    return this.selected && this.rows && this.rows.length !== 0 && allRowsSelected;\n  }\n\n  element: HTMLElement;\n  _innerWidth: number;\n  pageSize: number;\n  bodyHeight: number;\n  rowCount: number = 0;\n  rowDiffer: KeyValueDiffer<{}, {}>;\n\n  _offsetX = new BehaviorSubject(0);\n  _limit: number | undefined;\n  _count: number = 0;\n  _offset: number = 0;\n  _rows: any[];\n  _groupRowsBy: string;\n  _internalRows: any[];\n  _internalColumns: TableColumn[];\n  _columns: TableColumn[];\n  _columnTemplates: QueryList<DataTableColumnDirective>;\n  _subscriptions: Subscription[] = [];\n  resizeSensor: ResizeSensor;\n  recalculate$ = new Subject();\n\n  constructor(\n    @SkipSelf() private scrollbarHelper: ScrollbarHelper,\n    @SkipSelf() private dimensionsHelper: DimensionsHelper,\n    private cd: ChangeDetectorRef,\n    element: ElementRef,\n    differs: KeyValueDiffers,\n    private columnChangesService: ColumnChangesService,\n    @Optional() @Inject('configuration') private configuration: INgxDatatableConfig\n  ) {\n    // get ref to elm for measuring\n    this.element = element.nativeElement;\n    this.rowDiffer = differs.find({}).create();\n\n    // apply global settings from Module.forRoot\n    if (this.configuration && this.configuration.messages) {\n      this.messages = { ...this.configuration.messages };\n    }\n  }\n\n  /**\n   * Lifecycle hook that is called after data-bound\n   * properties of a directive are initialized.\n   */\n  ngOnInit(): void {\n    // need to call this immediatly to size\n    // if the table is hidden the visibility\n    // listener will invoke this itself upon show\n    this.recalculate();\n    if (ResizeSensor) {\n      this.resizeSensor = new ResizeSensor(this.element, () => this.recalculate$.next());\n    }\n    this._subscriptions.push(this.recalculate$.pipe(debounceTime(20)).subscribe(() => this.recalculate()));\n  }\n\n  /**\n   * Lifecycle hook that is called after a component's\n   * view has been fully initialized.\n   */\n  ngAfterViewInit(): void {\n    if (!this.externalSorting) {\n      this.sortInternalRows();\n    }\n\n    // this has to be done to prevent the change detection\n    // tree from freaking out because we are readjusting\n    if (typeof requestAnimationFrame === 'undefined') {\n      return;\n    }\n\n    requestAnimationFrame(() => {\n      this.recalculate();\n\n      // emit page for virtual server-side kickoff\n      if (this.externalPaging && this.scrollbarV) {\n        this.page.emit({\n          count: this.count,\n          pageSize: this.pageSize,\n          limit: this.limit,\n          offset: 0\n        });\n      }\n    });\n  }\n\n  /**\n   * Lifecycle hook that is called after a component's\n   * content has been fully initialized.\n   */\n  ngAfterContentInit() {\n    this.columnTemplates.changes.subscribe(v => this.translateColumns(v));\n    this.listenForColumnInputChanges();\n  }\n\n  /**\n   * This will be used when displaying or selecting rows.\n   * when tracking/comparing them, we'll use the value of this fn,\n   *\n   * (`fn(x) === fn(y)` instead of `x === y`)\n   */\n  @Input() rowIdentity: (x: any) => any = (x: any) => {\n    if (this._groupRowsBy) {\n      // each group in groupedRows are stored as {key, value: [rows]},\n      // where key is the groupRowsBy index\n      return x.key;\n    } else {\n      return x;\n    }\n  };\n\n  /**\n   * Translates the templates to the column objects\n   */\n  translateColumns(val: any) {\n    if (val) {\n      const arr = val.toArray();\n      if (arr.length) {\n        this._internalColumns = translateTemplates(arr);\n        setColumnDefaults(this._internalColumns);\n        this.recalculateColumns();\n        this.sortInternalRows();\n        this.cd.markForCheck();\n      }\n    }\n  }\n\n  /**\n   * Creates a map with the data grouped by the user choice of grouping index\n   *\n   * @param originalArray the original array passed via parameter\n   * @param groupByIndex  the index of the column to group the data by\n   */\n  groupArrayBy(originalArray: any, groupBy: any) {\n    // create a map to hold groups with their corresponding results\n    const map = new Map();\n    let i: number = 0;\n\n    originalArray.forEach((item: any) => {\n      const key = item[groupBy];\n      if (!map.has(key)) {\n        map.set(key, [item]);\n      } else {\n        map.get(key).push(item);\n      }\n      i++;\n    });\n\n    const addGroup = (key: any, value: any) => {\n      return { key, value };\n    };\n\n    // convert map back to a simple array of objects\n    return Array.from(map, x => addGroup(x[0], x[1]));\n  }\n\n  /*\n   * Lifecycle hook that is called when Angular dirty checks a directive.\n   */\n  ngDoCheck(): void {\n    if (this.rowDiffer.diff(this.rows)) {\n      if (!this.externalSorting) {\n        this.sortInternalRows();\n      } else {\n        this._internalRows = [...this.rows];\n      }\n\n      // auto group by parent on new update\n      this._internalRows = groupRowsByParents(\n        this._internalRows,\n        optionalGetterForProp(this.treeFromRelation),\n        optionalGetterForProp(this.treeToRelation)\n      );\n\n      this.recalculatePages();\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * Recalc's the sizes of the grid.\n   *\n   * Updated automatically on changes to:\n   *\n   *  - Columns\n   *  - Rows\n   *  - Paging related\n   *\n   * Also can be manually invoked or upon window resize.\n   */\n  recalculate(): void {\n    this.recalculateDims();\n    this.recalculateColumns();\n    requestAnimationFrame(() => {\n      if (!(this.cd as ViewRef).destroyed) {\n        this.cd.detectChanges();\n      }\n    });\n  }\n\n  /**\n   * Recalulcates the column widths based on column width\n   * distribution mode and scrollbar offsets.\n   */\n  recalculateColumns(\n    columns: any[] = this._internalColumns,\n    forceIdx: number = -1,\n    allowBleed: boolean = this.scrollbarH\n  ): any[] | undefined {\n    if (!columns) return undefined;\n\n    let width = this._innerWidth;\n    if (this.scrollbarV) {\n      width = width - this.scrollbarHelper.width;\n    }\n\n    if (this.columnMode === ColumnMode.force) {\n      forceFillColumnWidths(columns, width, forceIdx, allowBleed);\n    } else if (this.columnMode === ColumnMode.flex) {\n      adjustColumnWidths(columns, width);\n    }\n\n    return columns;\n  }\n\n  /**\n   * Recalculates the dimensions of the table size.\n   * Internally calls the page size and row count calcs too.\n   *\n   */\n  recalculateDims(): void {\n    const dims = this.dimensionsHelper.getDimensions(this.element);\n    this._innerWidth = Math.floor(dims.width);\n\n    if (this.scrollbarV) {\n      let height = dims.height;\n      if (this.headerHeight) height = height - this.headerHeight;\n      if (this.footerHeight) height = height - this.footerHeight;\n      this.bodyHeight = height;\n    }\n\n    this.recalculatePages();\n  }\n\n  /**\n   * Recalculates the pages after a update.\n   */\n  recalculatePages(): void {\n    this.pageSize = this.calcPageSize();\n    this.rowCount = this.calcRowCount();\n  }\n\n  /**\n   * Body triggered a page event.\n   */\n  onBodyPage({ offset }: any): void {\n    // Avoid pagination caming from body events like scroll when the table\n    // has no virtualization and the external paging is enable.\n    // This means, let's the developer handle pagination by my him(her) self\n    if (this.externalPaging && !this.virtualization) {\n      return;\n    }\n\n    this.offset = offset;\n\n    this.page.emit({\n      count: this.count,\n      pageSize: this.pageSize,\n      limit: this.limit,\n      offset: this.offset\n    });\n  }\n\n  /**\n   * The body triggered a scroll event.\n   */\n  onBodyScroll(event: MouseEvent): void {\n    this._offsetX.next(event.offsetX);\n    this.scroll.emit(event);\n    this.cd.detectChanges();\n  }\n\n  /**\n   * The footer triggered a page event.\n   */\n  onFooterPage(event: any) {\n    this.offset = event.page - 1;\n    this.bodyComponent.updateOffsetY(this.offset);\n\n    this.page.emit({\n      count: this.count,\n      pageSize: this.pageSize,\n      limit: this.limit,\n      offset: this.offset\n    });\n\n    if (this.selectAllRowsOnPage) {\n      this.selected = [];\n      this.select.emit({\n        selected: this.selected\n      });\n    }\n  }\n\n  /**\n   * Recalculates the sizes of the page\n   */\n  calcPageSize(val: any[] = this.rows): number {\n    // Keep the page size constant even if the row has been expanded.\n    // This is because an expanded row is still considered to be a child of\n    // the original row.  Hence calculation would use rowHeight only.\n    if (this.scrollbarV && this.virtualization) {\n      const size = Math.ceil(this.bodyHeight / (this.rowHeight as number));\n      return Math.max(size, 0);\n    }\n\n    // if limit is passed, we are paging\n    if (this.limit !== undefined) {\n      return this.limit;\n    }\n\n    // otherwise use row length\n    if (val) {\n      return val.length;\n    }\n\n    // other empty :(\n    return 0;\n  }\n\n  /**\n   * Calculates the row count.\n   */\n  calcRowCount(val: any[] = this.rows): number {\n    if (!this.externalPaging) {\n      if (!val) return 0;\n\n      if (this.groupedRows) {\n        return this.groupedRows.length;\n      } else if (this.treeFromRelation != null && this.treeToRelation != null) {\n        return this._internalRows.length;\n      } else {\n        return val.length;\n      }\n    }\n\n    return this.count;\n  }\n\n  /**\n   * The header triggered a contextmenu event.\n   */\n  onColumnContextmenu({ event, column }: any): void {\n    this.tableContextmenu.emit({ event, type: ContextmenuType.header, content: column });\n  }\n\n  /**\n   * The body triggered a contextmenu event.\n   */\n  onRowContextmenu({ event, row }: any): void {\n    this.tableContextmenu.emit({ event, type: ContextmenuType.body, content: row });\n  }\n\n  /**\n   * The header triggered a column resize event.\n   */\n  onColumnResize({ column, newValue }: any): void {\n    /* Safari/iOS 10.2 workaround */\n    if (column === undefined) {\n      return;\n    }\n\n    let idx: number;\n    const cols = this._internalColumns.map((c, i) => {\n      c = { ...c };\n\n      if (c.$$id === column.$$id) {\n        idx = i;\n        c.width = newValue;\n\n        // set this so we can force the column\n        // width distribution to be to this value\n        c.$$oldWidth = newValue;\n      }\n\n      return c;\n    });\n\n    this.recalculateColumns(cols, idx);\n    this._internalColumns = cols;\n\n    this.resize.emit({\n      column,\n      newValue\n    });\n  }\n\n  /**\n   * The header triggered a column re-order event.\n   */\n  onColumnReorder({ column, newValue, prevValue }: any): void {\n    const cols = this._internalColumns.map(c => {\n      return { ...c };\n    });\n\n    if (this.swapColumns) {\n      const prevCol = cols[newValue];\n      cols[newValue] = column;\n      cols[prevValue] = prevCol;\n    } else {\n      if (newValue > prevValue) {\n        const movedCol = cols[prevValue];\n        for (let i = prevValue; i < newValue; i++) {\n          cols[i] = cols[i + 1];\n        }\n        cols[newValue] = movedCol;\n      } else {\n        const movedCol = cols[prevValue];\n        for (let i = prevValue; i > newValue; i--) {\n          cols[i] = cols[i - 1];\n        }\n        cols[newValue] = movedCol;\n      }\n    }\n\n    this._internalColumns = cols;\n\n    this.reorder.emit({\n      column,\n      newValue,\n      prevValue\n    });\n  }\n\n  onColumnFilter(event: any): void {\n    this.filter.emit(event);\n  }\n\n  /**\n   * The header triggered a column sort event.\n   */\n  onColumnSort(event: any): void {\n    // clean selected rows\n    if (this.selectAllRowsOnPage) {\n      this.selected = [];\n      this.select.emit({\n        selected: this.selected\n      });\n    }\n\n    this.sorts = event.sorts;\n\n    // this could be optimized better since it will resort\n    // the rows again on the 'push' detection...\n    if (this.externalSorting === false) {\n      // don't use normal setter so we don't resort\n      this.sortInternalRows();\n    }\n\n    // auto group by parent on new update\n    this._internalRows = groupRowsByParents(\n      this._internalRows,\n      optionalGetterForProp(this.treeFromRelation),\n      optionalGetterForProp(this.treeToRelation)\n    );\n\n    // Always go to first page when sorting to see the newly sorted data\n    this.offset = 0;\n    this.bodyComponent.updateOffsetY(this.offset);\n    this.sort.emit(event);\n  }\n\n  /**\n   * Toggle all row selection\n   */\n  onHeaderSelect(event: any): void {\n    if (this.selectAllRowsOnPage) {\n      // before we splice, chk if we currently have all selected\n      const first = this.bodyComponent.indexes.first;\n      const last = this.bodyComponent.indexes.last;\n      const allSelected = this.selected.length === last - first;\n\n      // remove all existing either way\n      this.selected = [];\n\n      // do the opposite here\n      if (!allSelected) {\n        this.selected.push(...this._internalRows.slice(first, last));\n      }\n    } else {\n      // before we splice, chk if we currently have all selected\n      const allSelected = this.selected.length === this.rows.length;\n      // remove all existing either way\n      this.selected = [];\n      // do the opposite here\n      if (!allSelected) {\n        this.selected.push(...this.rows);\n      }\n    }\n\n    this.select.emit({\n      selected: this.selected\n    });\n  }\n\n  /**\n   * A row was selected from body\n   */\n  onBodySelect(event: any): void {\n    this.select.emit(event);\n  }\n\n  /**\n   * A row was expanded or collapsed for tree\n   */\n  onTreeAction(event: any) {\n    const row = event.row;\n    // TODO: For duplicated items this will not work\n    const rowIndex = this._rows.findIndex(r => r[this.treeToRelation] === event.row[this.treeToRelation]);\n    this.treeAction.emit({ row, rowIndex });\n  }\n\n  ngOnDestroy() {\n    this._subscriptions.forEach(subscription => subscription.unsubscribe());\n    if (this.resizeSensor) {\n      this.resizeSensor.detach();\n    }\n  }\n\n  /**\n   * listen for changes to input bindings of all DataTableColumnDirective and\n   * trigger the columnTemplates.changes observable to emit\n   */\n  private listenForColumnInputChanges(): void {\n    this._subscriptions.push(\n      this.columnChangesService.columnInputChanges$.subscribe(() => {\n        if (this.columnTemplates) {\n          this.columnTemplates.notifyOnChanges();\n        }\n      })\n    );\n  }\n\n  private sortInternalRows(): void {\n    this._internalRows = sortRows(this._internalRows, this._internalColumns, this.sorts);\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { ScrollbarHelper } from './services/scrollbar-helper.service';\r\nimport { DimensionsHelper } from './services/dimensions-helper.service';\r\nimport { ColumnChangesService } from './services/column-changes.service';\r\nimport { DataTableFooterTemplateDirective } from './components/footer/footer-template.directive';\r\nimport { VisibilityDirective } from './directives/visibility.directive';\r\nimport { DraggableDirective } from './directives/draggable.directive';\r\nimport { ResizeableDirective } from './directives/resizeable.directive';\r\nimport { OrderableDirective } from './directives/orderable.directive';\r\nimport { LongPressDirective } from './directives/long-press.directive';\r\nimport { ScrollerComponent } from './components/body/scroller.component';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { DataTableColumnDirective } from './components/columns/column.directive';\r\nimport { DataTableHeaderComponent } from './components/header/header.component';\r\nimport { DataTableHeaderCellComponent } from './components/header/header-cell.component';\r\nimport { DataTableBodyComponent } from './components/body/body.component';\r\nimport { DataTableFooterComponent } from './components/footer/footer.component';\r\nimport { DataTablePagerComponent } from './components/footer/pager.component';\r\nimport { ProgressBarComponent } from './components/body/progress-bar.component';\r\nimport { DataTableBodyRowComponent } from './components/body/body-row.component';\r\nimport { DataTableRowWrapperComponent } from './components/body/body-row-wrapper.component';\r\nimport { DatatableRowDetailDirective } from './components/row-detail/row-detail.directive';\r\nimport { DatatableGroupHeaderDirective } from './components/body/body-group-header.directive';\r\nimport { DatatableRowDetailTemplateDirective } from './components/row-detail/row-detail-template.directive';\r\nimport { DataTableBodyCellComponent } from './components/body/body-cell.component';\r\nimport { DataTableSelectionComponent } from './components/body/selection.component';\r\nimport { DataTableColumnHeaderDirective } from './components/columns/column-header.directive';\r\nimport { DataTableColumnCellDirective } from './components/columns/column-cell.directive';\r\nimport { DataTableColumnCellTreeToggle } from './components/columns/tree.directive';\r\nimport { DatatableFooterDirective } from './components/footer/footer.directive';\r\nimport { DatatableGroupHeaderTemplateDirective } from './components/body/body-group-header-template.directive';\r\nimport { DataTableSummaryRowComponent } from './components/body/summary/summary-row.component';\r\nimport { ToolTipRendererDirective } from './directives/ice-custom-html-tooltip.directive';\r\nimport { CustomToolTipComponent } from './components/ice-custom-tooltip/ice-custom-tooltip.component';\r\nimport { DatatableSelectComponent } from './components/ice-datatable-select/ice-datatable-select.component';\r\nimport { EditableTextComponent } from './components/ice-editable-text/ice-editable-text.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { DatatableComponent } from './components/datatable.component';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatTooltipModule,\r\n    OverlayModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatInputModule,\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  providers: [ScrollbarHelper, DimensionsHelper, ColumnChangesService],\r\n  declarations: [\r\n    DataTableFooterTemplateDirective,\r\n    VisibilityDirective,\r\n    DraggableDirective,\r\n    ResizeableDirective,\r\n    OrderableDirective,\r\n    LongPressDirective,\r\n    ToolTipRendererDirective,\r\n    ScrollerComponent,\r\n    DatatableComponent,\r\n    DataTableColumnDirective,\r\n    DataTableHeaderComponent,\r\n    DataTableHeaderCellComponent,\r\n    DataTableBodyComponent,\r\n    DataTableFooterComponent,\r\n    DataTablePagerComponent,\r\n    ProgressBarComponent,\r\n    DataTableBodyRowComponent,\r\n    DataTableRowWrapperComponent,\r\n    CustomToolTipComponent,\r\n    DatatableSelectComponent,\r\n    EditableTextComponent,\r\n    DatatableRowDetailDirective,\r\n    DatatableGroupHeaderDirective,\r\n    DatatableRowDetailTemplateDirective,\r\n    DataTableBodyCellComponent,\r\n    DataTableSelectionComponent,\r\n    DataTableColumnHeaderDirective,\r\n    DataTableColumnCellDirective,\r\n    DataTableColumnCellTreeToggle,\r\n    DatatableFooterDirective,\r\n    DatatableGroupHeaderTemplateDirective,\r\n    DataTableSummaryRowComponent\r\n  ],\r\n  exports: [\r\n    DatatableComponent,\r\n    DatatableRowDetailDirective,\r\n    DatatableGroupHeaderDirective,\r\n    DatatableRowDetailTemplateDirective,\r\n    DataTableColumnDirective,\r\n    DataTableColumnHeaderDirective,\r\n    DataTableColumnCellDirective,\r\n    DataTableColumnCellTreeToggle,\r\n    DataTableFooterTemplateDirective,\r\n    DatatableFooterDirective,\r\n    DataTablePagerComponent,\r\n    DatatableGroupHeaderTemplateDirective\r\n  ],\r\n  entryComponents: [CustomToolTipComponent]\r\n})\r\nexport class NgxDatatableModule {\r\n  /**\r\n   * Configure global configuration via INgxDatatableConfig\r\n   * @param configuration\r\n   */\r\n  static forRoot(configuration: INgxDatatableConfig): ModuleWithProviders {\r\n    return {\r\n      ngModule: NgxDatatableModule,\r\n      providers: [{ provide: 'configuration', useValue: configuration }]\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Interface definition for INgxDatatableConfig global configuration\r\n */\r\nexport interface INgxDatatableConfig {\r\n  messages: {\r\n    emptyMessage: string; // Message to show when array is presented, but contains no values\r\n    totalMessage: string; // Footer total message\r\n    selectedMessage: string; // Footer selected message\r\n  };\r\n}\r\n","/**\r\n * Throttle a function\r\n */\r\nexport function throttle(func: any, wait: number, options?: any) {\r\n  options = options || {};\r\n  let context: any;\r\n  let args: any;\r\n  let result: any;\r\n  let timeout: any = null;\r\n  let previous = 0;\r\n\r\n  function later() {\r\n    previous = options.leading === false ? 0 : +new Date();\r\n    timeout = null;\r\n    result = func.apply(context, args);\r\n  }\r\n\r\n  return function(this: any) {\r\n    const now = +new Date();\r\n\r\n    if (!previous && options.leading === false) {\r\n      previous = now;\r\n    }\r\n\r\n    const remaining = wait - (now - previous);\r\n    context = this;\r\n    args = arguments;\r\n\r\n    if (remaining <= 0) {\r\n      clearTimeout(timeout);\r\n      timeout = null;\r\n      previous = now;\r\n      result = func.apply(context, args);\r\n    } else if (!timeout && options.trailing !== false) {\r\n      timeout = setTimeout(later, remaining);\r\n    }\r\n\r\n    return result;\r\n  };\r\n}\r\n\r\n/**\r\n * Throttle decorator\r\n *\r\n *  class MyClass {\r\n *    throttleable(10)\r\n *    myFn() { ... }\r\n *  }\r\n */\r\nexport function throttleable(duration: number, options?: any) {\r\n  return function innerDecorator(target: any, key: PropertyKey, descriptor: PropertyDescriptor) {\r\n    return {\r\n      configurable: true,\r\n      enumerable: descriptor.enumerable,\r\n      get: function getter() {\r\n        Object.defineProperty(this, key, {\r\n          configurable: true,\r\n          enumerable: descriptor.enumerable,\r\n          value: throttle(descriptor.value, duration, options)\r\n        });\r\n\r\n        return this[key];\r\n      }\r\n    };\r\n  };\r\n}\r\n","if (typeof document !== 'undefined' && !document.elementsFromPoint) {\r\n  document.elementsFromPoint = elementsFromPoint;\r\n}\r\n\r\n/*tslint:disable*/\r\n/**\r\n * Polyfill for `elementsFromPoint`\r\n *\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/elementsFromPoint\r\n * https://gist.github.com/iddan/54d5d9e58311b0495a91bf06de661380\r\n * https://gist.github.com/oslego/7265412\r\n */\r\nexport function elementsFromPoint(x: number, y: number) {\r\n  const elements = [];\r\n  const previousPointerEvents = [];\r\n  let current: any; // TODO: window.getComputedStyle should be used with inferred type (Element)\r\n  let i;\r\n  let d;\r\n\r\n  //if (document === undefined) return elements;\r\n\r\n  // get all elements via elementFromPoint, and remove them from hit-testing in order\r\n  while ((current = document.elementFromPoint(x, y)) && elements.indexOf(current) === -1 && current != null) {\r\n    // push the element and its current style\r\n    elements.push(current);\r\n    previousPointerEvents.push({\r\n      value: current.style.getPropertyValue('pointer-events'),\r\n      priority: current.style.getPropertyPriority('pointer-events')\r\n    });\r\n\r\n    // add \"pointer-events: none\", to get to the underlying element\r\n    current.style.setProperty('pointer-events', 'none', 'important');\r\n  }\r\n\r\n  // restore the previous pointer-events values\r\n  for (i = previousPointerEvents.length; (d = previousPointerEvents[--i]); ) {\r\n    elements[i].style.setProperty('pointer-events', d.value ? d.value : '', d.priority);\r\n  }\r\n\r\n  // return our results\r\n  return elements;\r\n}\r\n/*tslint:enable*/\r\n","export enum ClickType {\r\n  single = 'single',\r\n  double = 'double'\r\n}\r\n"]}